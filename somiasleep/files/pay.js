/*! For license information please see pay.js.LICENSE.txt */
(()=>{var t={339:t=>{"use strict";t.exports=function(t){return t&&t[0]}},867:t=>{"use strict";t.exports=function(t){return t&&t.length}},907:(t,e,n)=>{"use strict";var o=n(476);t.exports=o(2,(function(t,e){void 0===e&&(e=[]);for(var n=e.length,o=new Array(n),r=0;r<n;r++)o[r]=t(e[r],r,e);return o}))},952:(t,e,n)=>{"use strict";var o=n(579),r=n(673),i=n(907),a=n(96),s=n(292);t.exports=function t(e){switch(o(e)){case"Object":if(s(e)||a(e))break;return r(t,e);case"Array":return i(t,e);case"Date":return new Date(e.valueOf());case"RegExp":return n=e,new RegExp(n.source,(n.global?"g":"")+(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.sticky?"y":"")+(n.unicode?"u":""))}var n;return e}},476:t=>{"use strict";t.exports=function(t,e){return function n(){for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return r.length>=t?e.apply(this,r):function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return n.apply(this,r.concat(e))}}}},970:t=>{"use strict";t.exports=function(){}},688:(t,e,n)=>{"use strict";var o=n(476);t.exports=o(2,(function(t,e){var n,o;return function(){for(var r=this,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];var u=Date.now(),c=n+t-u;n&&c>0?(clearTimeout(o),o=setTimeout((function(){n=u,e.apply(r,a)}),c)):(n=u,e.apply(this,a))}}))},292:(t,e,n)=>{"use strict";var o,r=n(235);try{o=n(986).isValidElementType}catch(t){}o||(o=function(t){return"string"==typeof t||"function"==typeof t||!!t&&r("$$typeof",t)}),t.exports=o},96:(t,e,n)=>{"use strict";var o,r=n(235);try{o=n(986).isElement}catch(t){}o||(o=function(t){return!!t&&r("$$typeof",t)}),t.exports=o},337:t=>{"use strict";t.exports=function(t){return"string"==typeof t||t instanceof String}},235:(t,e,n)=>{"use strict";var o=n(476);t.exports=o(2,(function(t,e){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)}))},673:(t,e,n)=>{"use strict";var o=n(476);t.exports=o(2,(function(t,e){void 0===e&&(e={});var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=t(e[o],o,e));return n}))},843:(t,e,n)=>{"use strict";var o=n(476);t.exports=o(2,(function(t,e){void 0===t&&(t=[]),void 0===e&&(e={});for(var n=e,o=0;o<t.length;o++){if(null==n)return;n=n[t[o]]}return n}))},974:(t,e,n)=>{"use strict";var o=n(476),r=n(843);t.exports=o(3,(function(t,e,n){void 0===t&&(t=[]),void 0===n&&(n={});var o=r(t,n);return null!=o?o:e}))},401:(t,e,n)=>{"use strict";var o=n(476);t.exports=o(2,(function(t,e){return null!=e?e[t]:void 0}))},477:(t,e,n)=>{"use strict";var o=n(476),r=n(401);t.exports=o(3,(function(t,e,n){var o=r(t,n);return null!=o?o:e}))},296:(t,e,n)=>{"use strict";var o=n(782);t.exports=function(t){return o(t).join("_").toLowerCase()}},267:t=>{"use strict";t.exports=function(t){return void 0===t&&(t=""),t.toLowerCase()}},15:t=>{"use strict";t.exports=function(t){return void 0===t&&(t=""),t.toUpperCase()}},782:t=>{"use strict";var e=/([a-z])([A-Z])/g,n=/[^a-zA-Z]+/g;t.exports=function(t){return t.replace(e,(function(t,e,n){return e+" "+n})).split(n)}},579:t=>{"use strict";t.exports=function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}},979:(t,e)=>{"use strict";var n,o=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen");function v(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case o:switch(t=t.type){case i:case s:case a:case h:case f:return t;default:switch(t=t&&t.$$typeof){case d:case c:case l:case p:case m:case u:return t;default:return e}}case r:return e}}}n=Symbol.for("react.module.reference"),e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===o},e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===i||t===s||t===a||t===h||t===f||t===y||"object"==typeof t&&null!==t&&(t.$$typeof===p||t.$$typeof===m||t.$$typeof===u||t.$$typeof===c||t.$$typeof===l||t.$$typeof===n||void 0!==t.getModuleId)}},986:(t,e,n)=>{"use strict";t.exports=n(979)},157:(t,e,n)=>{var o=n(54).default;function r(){"use strict";t.exports=r=function(){return n},t.exports.__esModule=!0,t.exports.default=t.exports;var e,n={},i=Object.prototype,a=i.hasOwnProperty,s=Object.defineProperty||function(t,e,n){t[e]=n.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",d=u.asyncIterator||"@@asyncIterator",l=u.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(e){h=function(t,e,n){return t[e]=n}}function f(t,e,n,o){var r=e&&e.prototype instanceof w?e:w,i=Object.create(r.prototype),a=new A(o||[]);return s(i,"_invoke",{value:B(t,n,a)}),i}function m(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}n.wrap=f;var p="suspendedStart",y="suspendedYield",v="executing",g="completed",b={};function w(){}function k(){}function S(){}var C={};h(C,c,(function(){return this}));var x=Object.getPrototypeOf,P=x&&x(x(_([])));P&&P!==i&&a.call(P,c)&&(C=P);var M=S.prototype=w.prototype=Object.create(C);function E(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(r,i,s,u){var c=m(t[r],t,i);if("throw"!==c.type){var d=c.arg,l=d.value;return l&&"object"==o(l)&&a.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,s,u)}),(function(t){n("throw",t,s,u)})):e.resolve(l).then((function(t){d.value=t,s(d)}),(function(t){return n("throw",t,s,u)}))}u(c.arg)}var r;s(this,"_invoke",{value:function(t,o){function i(){return new e((function(e,r){n(t,o,e,r)}))}return r=r?r.then(i,i):i()}})}function B(t,n,o){var r=p;return function(i,a){if(r===v)throw Error("Generator is already running");if(r===g){if("throw"===i)throw a;return{value:e,done:!0}}for(o.method=i,o.arg=a;;){var s=o.delegate;if(s){var u=O(s,o);if(u){if(u===b)continue;return u}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(r===p)throw r=g,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);r=v;var c=m(t,n,o);if("normal"===c.type){if(r=o.done?g:y,c.arg===b)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(r=g,o.method="throw",o.arg=c.arg)}}}function O(t,n){var o=n.method,r=t.iterator[o];if(r===e)return n.delegate=null,"throw"===o&&t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),b;var i=m(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(a.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(o(t)+" is not iterable")}return k.prototype=S,s(M,"constructor",{value:S,configurable:!0}),s(S,"constructor",{value:k,configurable:!0}),k.displayName=h(S,l,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,h(t,l,"GeneratorFunction")),t.prototype=Object.create(M),t},n.awrap=function(t){return{__await:t}},E(I.prototype),h(I.prototype,d,(function(){return this})),n.AsyncIterator=I,n.async=function(t,e,o,r,i){void 0===i&&(i=Promise);var a=new I(f(t,e,o,r),i);return n.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(M),h(M,l,"Generator"),h(M,c,(function(){return this})),h(M,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),n=[];for(var o in e)n.push(o);return n.reverse(),function t(){for(;n.length;){var o=n.pop();if(o in e)return t.value=o,t.done=!1,t}return t.done=!0,t}},n.values=_,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(o,r){return s.type="throw",s.arg=t,n.next=o,r&&(n.method="next",n.arg=e),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=a.call(i,"catchLoc"),c=a.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&a.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var i=r?r.completion:{};return i.type=t,i.arg=e,r?(this.method="next",this.next=r.finallyLoc,b):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),R(n),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var r=o.arg;R(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:_(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),b}},n}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},54:t=>{function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},998:(t,e,n)=>{var o=n(157)();t.exports=o;try{regeneratorRuntime=o}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.p="/web/sdk/v1/",(()=>{"use strict";function t(t,e){if(null==t)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(e.includes(o))continue;n[o]=t[o]}return n}var e=["url","reqid"],o={url:"https://pay.yandex.ru",reqid:""};function r(n){void 0===n&&(n={});var r=n,i=r.url,a=void 0===i?o.url:i,s=r.reqid,u=void 0===s?o.reqid:s,c=t(r,e);return o=Object.assign(o,{url:a,reqid:u}),c}var i,a=5,s=500,u=[];function c(){if(o.url&&0!==u.length){var t=u.join("\r\n");u=[],i=null;var e=o.url+"/cl/click";if(!(Boolean(navigator.sendBeacon)&&navigator.sendBeacon(e,t))){var n=new XMLHttpRequest;n.open("POST",e),n.send(t)}}}function d(){i&&clearTimeout(i),c()}function l(t,e,n){i&&clearTimeout(i);var r,d=function(t,e,n,o){return[t?"/reqid="+t:"",o&&o.length?"/"+o.join("/"):"",e?"/path="+e:"",n?"/vars="+n:"","/cts="+Date.now(),"/*"].join("")}(o.reqid,t,(r=e,Object.entries(r).reduce((function(t,e){var n=e[0],o=e[1];return!o&&0!==o||"string"!=typeof o&&"number"!=typeof o&&"boolean"!=typeof o||t.push(n+"="+encodeURIComponent(o).replace(/\*/g,"%2A")),t}),new Array).join(",")),n);u.push(d),u.length<a?i=setTimeout(c,s):c()}window.addEventListener("beforeunload",d),window.addEventListener("unload",d),window.addEventListener("blur",d);var h=function(t){return Object.keys(t).map((function(e){return encodeURIComponent(e+"="+t[e])})).join(";")};function f(){try{return document.createEvent("TouchEvent"),"touch"}catch(t){return"desktop"}}var m=["experiments","testIds","boxes"],p={env:"production",initTimestamp:0,page:"",project:"pay",platform:f(),version:"0.0.0",sessionId:"",merchantId:"",experiments:"",sheetEnv:"",testIds:""};function y(e){var n=e.experiments,o=e.testIds,i=e.boxes,a=t(e,m);n&&(a.experiments=h(n)),i?a.testIds=i:o&&o.length&&(a.testIds=o.map(encodeURIComponent).join(";")),p=Object.assign({},p,r(a))}function v(t){return void 0===t&&(t={}),{rum_id:"ru."+p.project+"."+p.platform,"-version":p.version,"-env":p.env,"-project":p.project,"-page":p.page,"-platform":p.platform,"-additional":JSON.stringify(Object.assign({sessionId:p.sessionId,merchantId:p.merchantId||p.sessionId.split(".")[0],env:p.sheetEnv},t))}}function g(){var t=[];return p.experiments&&t.push("experiments="+p.experiments),p.testIds&&t.push("slots="+p.testIds),t}function b(t,e){try{return JSON.parse(t)}catch(t){return e}}var w,k=function(){function t(t){this.adapter=t,this.enabled=void 0;var e=String(Date.now());this.setItem(e,e);var n=this.getItem(e);this.removeItem(e),this.enabled=e===n}var e=t.prototype;return e.setObj=function(t,e){return this.setItem(t,JSON.stringify(e))},e.getObj=function(t,e){void 0===e&&(e=null);var n=this.getItem(t);return n?b(n,e):e},e.setItem=function(t,e){try{this.adapter.setItem(t,e)}catch(t){}},e.getItem=function(t){try{return this.adapter.getItem(t)}catch(t){return null}},e.removeItem=function(t){try{return this.adapter.removeItem(t)}catch(t){return}},t}();new k(window.sessionStorage);try{w=new k(window.localStorage)}catch(t){w=new k(window.sessionStorage)}var S=w,C=function(t){return void 0===t&&(t=5),Math.random().toString(16).slice(2,2+t)},x="_yp_vid",P="_yp_vlh",M=18e5;var E=function(){var t=S.getItem(x),e=S.getItem(P);function n(){S.enabled?(t=[btoa(location.host).substring(0,12),C(8),Date.now()].join("."),S.setItem(x,t)):t="no-vid"}function o(){t&&!function(t){var e=Number(new Date(t));if(!t||Number.isNaN(e))return!0;var n=Date.now();return n-e>M||e-n>M}(Number(e))||n(),e=String(Date.now()),S.setItem(P,e)}return{getVisitId:function(){var e;return o(),null!==(e=t)&&void 0!==e?e:""},hit:o}}(),I=n(974),B=n.n(I),O=function(t,e,n){return void 0===n&&(n=void 0),B()(["flags",e],n,t)},T=function(t){},R={flags:{}},A={fn:T},_=new Promise((function(t){A.fn=function(e){var n=e.flags,o=e.experiments,r=e.testIds,i=e.boxes;A.fn=T,t(R={flags:n,experiments:o,testIds:r,boxes:i})}})),W=function(t,e){return function(t,e,n){var o=O(t,e);return void 0!==o&&(void 0===n||o===n)}(R,t,e)};function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function L(t){var e=function(t,e){if("object"!=U(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=U(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==U(e)?e:e+""}function D(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,L(o.key),o)}}function j(t,e,n){return e&&D(t.prototype,e),n&&D(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function F(t,e){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},F(t,e)}function N(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,F(t,e)}function K(t,e){try{return JSON.parse(t)}catch(t){return e}}function z(){return window.location.origin.endsWith("pay.yandex.ru")?window.location.href:window.location.origin}var V=["message","name","stack"];function q(t){var e=t.message,n=t.level,o=void 0===n?"error":n,r=t.additional,i=p,a=v();return Object.assign({},a,{"-msg":e,"-level":o,"-additional":JSON.stringify(Object.assign({},K(a["-additional"],{}),r)),"-ua":navigator.userAgent,"-ts":Date.now(),"-init-ts":i.initTimestamp,"-url":z(),"-referrer":z()})}function H(e){var n=e.message,o=e.name,r=e.stack,i=t(e,V);return Object.assign({error:n,name:o,stack:r},i)}function Y(t){return function(e,n){var o=void 0;n instanceof Error?o=H(n):null!==n&&((null==n?void 0:n.error)instanceof Error&&(o=H(n.error),delete n.error),o=Object.assign({},o,n)),l("690.2354",q({level:t,message:e,additional:o}),g())}}var Z=Y("fatal"),$=Y("error"),G=Y("warn"),J=Y("info"),Q=Y("debug");function X(t){window.location.assign(t)}function tt(){return window.location.toString()}function et(t,e){void 0===e&&(e="");try{return new URL(t).origin}catch(t){return e}}function nt(t,e){void 0===e&&(e="");try{return new URL(t).pathname}catch(t){return e}}function ot(t,e){void 0===e&&(e="");try{var n=new URL(t);return[n.origin,n.pathname].join("")}catch(t){return e}}function rt(t){var e=function(t,e){void 0===e&&(e="");try{return new URL(t).search.slice(1)}catch(t){return e}}(t);return function(t){var e=new URLSearchParams(t),n={};return e.forEach((function(t,e){n[e]=t})),n}(e)}function it(t,e,n){void 0===n&&(n="");try{var o=new URL(t),r=function(t){var e=Object.entries(t).filter((function(t){return void 0!==t[1]}));return new URLSearchParams(e).toString()}(Object.assign({},rt(t),e));return o.search=r,o.toString()}catch(t){return n}}var at,st="*",ut="*",ct="__YP__",dt="__FQM__",lt=function(){return j((function(t){var e,n,o,r;void 0===t&&(t={}),this.targetUrl=void 0,this.channel=void 0,this.sessionId=void 0,this._sourceSearch=void 0,this.targetUrl=null!==(e=t.targetUrl)&&void 0!==e?e:"/",this.channel=null!==(n=t.channel)&&void 0!==n?n:ut,this.sessionId=null!==(o=t.sessionId)&&void 0!==o?o:"",this._sourceSearch=null!==(r=t.sourceSearch)&&void 0!==r?r:""}),[{key:"targetOrigin",get:function(){return et(this.targetUrl)||st}},{key:"sourceUrl",get:function(){var t=tt();return window.location.search?t:t+"?"+this._sourceSearch}},{key:"sourceOrigin",get:function(){return et(this.sourceUrl)||st}},{key:"isInitialized",get:function(){return"/"!==this.targetUrl}}])}(),ht=function(t){try{return t()}catch(t){return}},ft=function(t){this.options=t},mt=function(){function t(t,e,n){void 0===e&&(e=ut),this.payload=t,this.channel=e,this.sourceUrl=n}var e=t.prototype;return e.toJSON=function(){return this.sourceUrl?{payload:this.payload,channel:this.channel,sourceUrl:this.sourceUrl}:{payload:this.payload,channel:this.channel}},e.toString=function(){return JSON.stringify(this)},j(t,[{key:"origin",get:function(){return this.sourceUrl&&et(this.sourceUrl)||st}}])}(),pt=(n(998),function(){try{document.createEvent("TouchEvent");var t="ontouchstart"in window||navigator.maxTouchPoints;return Boolean(t)}catch(t){return!1}}),yt=function(t){return/Android/i.test(t)},vt=function(t){return yt(t)&&(/wv|WebView/i.test(t)||/Version\/\d+.*\/\d+.0.0.0 Mobile/i.test(t))},gt=function(t){return/iphone|ipod|ipad/i.test(t)},bt=function(t){return/safari/i.test(t)},wt=function(t){return gt(t)&&!bt(t)},kt=navigator.userAgent,St=/Firefox/i.test(kt),Ct=function(t){return/safari/i.test(t)&&!/crios|fxios|chrome|EdgiOS|YaBrowser/i.test(t)}(kt),xt=(bt(kt),yt(kt)),Pt=(vt(kt),gt(kt)),Mt=(wt(kt),function(t){return/YaBrowser|BroPP/i.test(t)}(kt)),Et=(function(t){var e=/bank-sdk\/(\d+\.\d+\.\d+)\b.*\((ios|android)\)/i.exec(t);Boolean(e)}(kt),function(t){wt(t)||vt(t)}(kt),function(t){var e=/PassportSDK\/(\d+\.\d+\.\d+)/i.exec(t);if(Boolean(e))return!0;var n=/YandexPaySDK\/(\d+\.\d+\.\d+)/i.exec(t);return!!Boolean(n)}(kt)),It=(Et&&function(t){var e=t.split(" ");e[e.length-1]}(kt),function(t,e){var n;gt(t)&&Boolean(null===(n=e.webkit)||void 0===n?void 0:n.messageHandlers)}(kt,window),function(t,e){gt(t)&&e.indexedDB}(kt,window),function(t){var e,n=/WebView/i.test(t.userAgent),o=Boolean(null===(e=t.userAgentData)||void 0===e?void 0:e.brands.some((function(t){return/WebView/i.test(t.brand)})))}(navigator),at=window,Boolean(at.ReactNativeWebView),function(t){Boolean(t.flutter_inappwebview)}(window),function(){return window.top}),Bt=function(){var t;return vt(navigator.userAgent)?null:null===(t=It())||void 0===t?void 0:t.opener},Ot=function(t,e,n){var o;return void 0===n&&(n=!1),it(t,((o={})[ct]=e,o[dt]=n?"1":void 0,o))},Tt=function(t,e){if(t.origin!==e.targetOrigin&&t.origin!==st&&e.targetOrigin!==st&&t.origin!==location.origin)throw new Error("Failed to process a message with a different origin\n message origin — "+t.origin+"\n target origin — "+e.targetOrigin);if(t.channel!==e.channel&&t.channel!==ut&&e.channel!==ut)throw new Error("Failed to process a message with a different channel\n message channel — "+t.channel+"\n current channel — "+e.targetOrigin);return t},Rt=function(t){var e=JSON.parse(t.data),n=e.sourceUrl&&et(e.sourceUrl)===t.origin?e.sourceUrl:t.origin;return new mt(e.payload,e.channel,n)},At={},_t=function(t){if(!At[t])try{At[t]=new BroadcastChannel(t)}catch(e){At[t]={onmessage:function(){},addEventListener:function(){},removeEventListener:function(){},postMessage:function(){},close:function(){}}}return At[t]},Wt=function(){return Boolean(window.BroadcastChannel)},Ut=function(t){function e(e,n){var o;return void 0===n&&(n=Bt()),(o=t.call(this,e)||this)._target=null,o.setTarget(n),o}N(e,t);var n=e.prototype;return n.setTarget=function(t){if(this._target=t,!this.isConnected)throw new TypeError("Target is not set or closed.")},n.createMessage=function(t){return new mt(t,this.options.channel,this.options.sourceUrl)},n.send=function(t){var e=this;if(this.isConnected){var n=this.createMessage(t);ht((function(){var t;null===(t=e.target)||void 0===t||t.postMessage(String(n),e.options.targetOrigin)}))}},n.destroy=function(){this._target=null},j(e,[{key:"target",get:function(){return this._target}},{key:"isConnected",get:function(){return Boolean(this.target&&!this.target.closed)}}])}(ft),Lt=function(){function t(){this.listeners=[]}var e=t.prototype;return e.emit=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.listeners.forEach((function(t){t.apply(void 0,e)}))},e.on=function(t){var e=this;return this.listeners.push(t),function(){e.off(t)}},e.off=function(t){this.listeners=this.listeners.filter((function(e){return e!==t}))},e.destroy=function(){this.listeners=[]},t}(),Dt=function(t){function e(e){var n;return(n=t.call(this)||this).options=e,n}return N(e,t),e.prototype.processMessage=function(t){var e=Tt(t,this.options);this.emit(e.payload,e)},e}(Lt),jt=function(t){function e(e){var n;return(n=t.call(this,e)||this).onMessage=function(t){try{var e=Rt(t);n.processMessage(e)}catch(t){0}},window.addEventListener("message",n.onMessage),n}return N(e,t),e.prototype.destroy=function(){window.removeEventListener("message",this.onMessage)},e}(Dt),Ft=n(337),Nt=n.n(Ft),Kt=function(t,e){return void 0===e&&(e=document),e?Nt()(t)?e.querySelector(t):t:null};function zt(t,e){var n=Kt(t);n&&n.classList.remove(e)}function Vt(t,e){var n=Kt(t);n&&n.classList.add(e)}function qt(t,e,n,o){if(t){var r=Kt(t);r&&r.removeEventListener(e,n,o)}}function Ht(t,e,n){if(void 0===n&&(n=!1),t){var o=Kt(t);o&&Object.keys(e).forEach((function(t){o.style.setProperty(t,String(e[t]),n?"important":void 0)}))}}var Yt={remove:function(t){var e=Kt(t);e&&e.parentElement&&e.parentElement.removeChild(e)},add:function(t,e,n){var o=Kt(t);o&&n?o.insertBefore(e,n):o&&o.appendChild(e)},removeClass:zt,addClass:Vt,toggleClass:function(t,e,n){n?Vt(t,e):zt(t,e)},findNode:Kt,off:qt,on:function(t,e,n,o){if(!t)return function(){};var r=Kt(t);return r?(r.addEventListener(e,n,o),function(){return qt(r,e,n,o)}):function(){}},attrs:function(t,e){var n=Kt(t);n&&Object.keys(e).forEach((function(t){n.setAttribute(t,String(e[t]))}))},style:Ht,hide:function(t,e){void 0===e&&(e=!1),Ht(t,{display:"none"},e)},show:function(t,e,n){void 0===e&&(e="block"),void 0===n&&(n=!1),Ht(t,{display:e},n)},getCssProp:function(t,e){var n=Kt(t);return n?getComputedStyle(n)[e]:null},animate:function(t,e){var n,o=e.timingFunction,r=void 0===o?"ease-in-out":o,i=e.duration,a=void 0===i?"200ms":i,s=e.delay,u=void 0===s?"0":s,c=e.property,d=e.from,l=e.to;Kt(t)&&(Ht(t,((n={"transition-timing-function":r,"transition-duration":a,"transition-delay":u,"transition-property":c})[c]=d,n)),setTimeout((function(){var e;Ht(t,((e={})[c]=l,e))}),0))}},Zt=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(t,e){var n=this;return this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(e),function(){return n.off(t,e)}},e.once=function(t,e){var n=this,o=function(r){n.off(t,o),e.call(n,r)};return this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(o),function(){return n.off(t,o)}},e.off=function(t,e){e?this.listeners[t]=(this.listeners[t]||[]).filter((function(t){return e!==t})):delete this.listeners[t]},e.emit=function(t,e){var n=this;(this.listeners[t]||[]).forEach((function(t){t.call(n,e)}))},e.clear=function(){this.listeners={}},e.destroy=function(){this.clear()},t}(),$t=function(t){return t.Simple="SIMPLE",t.Pay="PAY",t.Checkout="CHECKOUT",t}({}),Gt=function(t){return t.White="WHITE",t.WhiteOutlined="WHITE-OUTLINED",t.Black="BLACK",t}({}),Jt=function(t){return t.Auto="AUTO",t.Max="MAX",t.MaxImportant="MAX_IMPORTANT",t}({}),Qt=function(t){return t.Click="CLICK",t}({}),Xt=function(t){return t.Widget="WIDGET",t.WidgetUser="WIDGET_USER",t}({}),te=function(t){return t.Mini="Mini",t.Compact="Compact",t.Simple="Simple",t.BnplOffer="BnplOffer",t.BnplRequired="BnplRequired",t.BnplPreview="BnplPreview",t.Info="Info",t.Ultimate="Ultimate",t}({}),ee=function(t){return t.Default="default",t.None="none",t}({}),ne=function(t){return t.Medium="medium",t.Small="small",t}({}),oe=function(t){return t.Default="default",t.Saturated="saturated",t.Transparent="transparent",t}({}),re=(te.Mini,te.Compact,te.BnplOffer,te.BnplRequired,te.Ultimate,te.BnplPreview,[te.BnplOffer,te.BnplRequired]),ie=function(t){return t.Light="LIGHT",t.Dark="DARK",t}({}),ae=function(t,e,n,o,r){var i=t[e];return n.includes(i)?i:((r||void 0!==i)&&(G('SDK: Invalid "'+String(e)+'" option',{value:i}),console.warn('The "'+String(e)+'" option should be one of — '+n.join(", ")+".")),o)},se=function(t,e){var n=Object.assign({},e,t);return n.type=ae(n,"type",Object.values($t),e.type,!1),n.theme=ae(n,"theme",Object.values(Gt),e.theme,!1),n.width=ae(n,"width",Object.values(Jt),e.width,!1),n},ue=function(t,e){var n=Object.assign({},e,t),o=n.bnplSelected,r=n.borderRadius,i=n.hideWidgetHeader;return n.buttonType=ae(n,"buttonType",Object.values($t),e.buttonType,!1),"boolean"!=typeof o&&void 0!==o&&(n.bnplSelected=e.bnplSelected,G('SDK: Invalid "bnplSelected" option',{bnplSelected:o}),console.warn('The "bnplSelected" option should be boolean.')),n.borderRadius=Number(n.borderRadius),Number.isFinite(n.borderRadius)||(n.borderRadius=e.borderRadius,G('SDK: Invalid "borderRadius" option',{borderRadius:r}),console.warn('The "borderRadius" option should be number (px).')),n.buttonTheme=ae(n,"buttonTheme",Object.values(Gt),e.buttonTheme,!1),n.widgetTheme=ae(n,"widgetTheme",Object.values(ie),e.widgetTheme,!1),n.widgetType=ae(n,"widgetType",Object.values(te),e.widgetType,!1),"boolean"!=typeof i&&void 0!==i&&(n.hideWidgetHeader=e.hideWidgetHeader,G('SDK: Invalid "hideWidgetHeader" option',{hideWidgetHeader:i}),console.warn('The "hideWidgetHeader" option should be boolean.')),"boolean"!=typeof n.isPrepayment&&(n.isPrepayment=!1),n};var ce,de,le,he="https://pay.yandex.ru/web",fe="https://pay.yandex.ru",me=he+"/form",pe=he+"/payment",ye=he+"/checkout",ve=he+"/sdk/v1/init-2",ge=he+"/sdk/v1/payment-method",be=he+"/sdk/v1/widget",we=he+"/f/info-widget",ke=he+"/f/ultimate-widget",Se=he+"/f/simple-widget",Ce=he+"/f/simple-widget-modal",xe=he+"/sdk/v1/info-widget",Pe=[960,705],Me=[510,(ce=820,de=window.screen.height,Math.min(de,ce))],Ee="ya-pay-button",Ie="ya-pay-widget",Be="ya-pay-backdrop",Oe="yandex-pay-badge",Te=he,Re="testing"===(le="production_vr8p6z9pn3".split("_")[0])?le:"production",Ae=function(t){return t.SdkByTokenRequest="sdk--by-token-request",t.SdkByTokenRequestError="sdk--by-token-request.error",t.SdkRemountStickyButton="sdk--remount-sticky-button",t}({}),_e=""+(.001*Date.now()|0)+(1073741824*Math.random()|0),We=""+(1e3*Math.random()|0)+(.001*Date.now()|0),Ue="sdk-"+(1e3*Math.random()|0)+(.001*Date.now()|0),Le=75,De=32,je=function(t){return null!==t&&"object"==typeof t},Fe=function(t){return"function"==typeof t},Ne=function(t){return(je(t)||Fe(t))&&Fe(t.then)},Ke=new function(t){var e=this;for(var n in this.data=void 0,this.reactPairs=new Map,this.setPair=function(t,n){return e.reactPairs.set(t,n)},this.getPair=function(t){return e.reactPairs.get(t)},this.createPairPromise=function(t){var n,o=new Promise((function(t){n=t}));return e.setPair(t,[o,n]),o},this.set=function(t,n){var o;return null!=n&&(e.data[t]=n,null===(o=e.getPair(t))||void 0===o||o[1](n),!0)},this.get=function(t){return e.data[t]},this.getP=function(t){var n=e.getPair(t);return n?n[0]:e.createPairPromise(t)},this.data=t,this.data)this.createPairPromise(n)}({hasNewPRA:!1,disabledPRA:!1}),ze=function(t,e){var n=void 0===e?{}:e,o=n.src,r=n.hideThrowOpacity,i=document.createElement("iframe");return Yt.attrs(i,{name:t,title:t,frameborder:"0",tabindex:"-1","aria-hidden":"true"}),o&&Yt.attrs(i,{src:o}),r?Yt.style(i,{opacity:"0"}):Yt.hide(i),i},Ve=function(t,e,n){var o=document.createElement("iframe"),r="ya-frame-"+C(8);return e&&Yt.style(o,e),Yt.attrs(o,Object.assign({src:t,name:r,title:r,frameborder:"0",tabindex:"-1","aria-hidden":"true"},n?{class:n}:{})),o},qe=n(339),He=n.n(qe),Ye=n(867),Ze=n.n(Ye),$e=n(843),Ge=n.n($e),Je=function(t){return t.Token="Token",t.Payment="Payment",t.Checkout="Checkout",t.CheckoutOld="CheckoutOld",t.Subscription="Subscription",t.ByToken="ByToken",t}({}),Qe=function(t){return t.Production="PRODUCTION",t.Sandbox="SANDBOX",t}({}),Xe=function(t){return t.Ru="RU",t.Us="US",t.By="BY",t}({}),tn=function(t){return t.Rub="RUB",t.Byn="BYN",t.Usd="USD",t.Eur="EUR",t.Kzt="KZT",t.Uah="UAH",t.Amd="AMD",t.Gel="GEL",t.Azn="AZN",t.Kgs="KGS",t.Gbp="GBP",t.Sek="SEK",t.Pln="PLN",t.Inr="INR",t.Czk="CZK",t.Cad="CAD",t.Brl="BRL",t.Aud="AUD",t.Uzs="UZS",t.Chf="CHF",t.Try="TRY",t.Cny="CNY",t.Zar="ZAR",t.Bgn="BGN",t.Ron="RON",t.Hkd="HKD",t.Aed="AED",t}({}),en=function(t){return t.Pickup="PICKUP",t.Shipping="SHIPPING",t.Discount="DISCOUNT",t.Promocode="PROMOCODE",t}({}),nn=function(t){return t.Card="CARD",t.Cash="CASH",t.Split="SPLIT",t}({}),on=function(t){return t.CloudToken="CLOUD_TOKEN",t.PanOnly="PAN_ONLY",t}({}),rn=function(t){return t.AmericanExpress="AMEX",t.Discover="DISCOVER",t.Jcb="JCB",t.Mastercard="MASTERCARD",t.Visa="VISA",t.VisaElectron="VISAELECTRON",t.Maestro="MAESTRO",t.Mir="MIR",t.UnionPay="UNIONPAY",t.Uzcard="UZCARD",t}({}),an=function(t){return t.Recurring="RECURRING",t.Deferred="DEFERRED",t}({}),sn=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((function(t,e){return t+function(t,e){void 0===e&&(e=0);var n=Number(t);return isNaN(n)?e:n}(e)}),0).toFixed(2)};function un(t){return!!t&&(3===parseInt(null==t?void 0:t.version)&&!("merchant"in t))}function cn(t){return!!t&&(2===parseInt(null==t?void 0:t.version)||"merchant"in t)}function dn(t){return 4===(null==t?void 0:t.version)}function ln(t){return B()(["merchant","url"],"",t)}var hn=function(t){return un(t)||dn(t)?B()(["merchantId"],"",t):B()(["merchant","id"],"",t)},fn=function(t){return B()(["version"],void 0,t)},mn=function(t){return un(t)?B()(["orderId"],void 0,t):B()(["order","id"],void 0,t)},pn=function(t){return B()(["total","amount"],"",t)||sn.apply(void 0,B()(["items"],[],t).map((function(t){return t.total})))};var yn=function(t){return dn(t)?B()(["totalAmount"],"0",t):un(t)?function(t){return pn(t.cart)}(t):function(t){return B()(["order","total","amount"],"0",t)}(t)};function vn(t){return B()(["currencyCode"],"",t)}function gn(t){var e=Ge()(["requiredFields","shippingTypes"],t);if(e)return{direct:B()(["direct"],!1,e),pickup:B()(["pickup"],!1,e)}}function bn(t){var e=Ge()(["requiredFields","shippingContact"],t);if(e)return{name:B()(["name"],!0,e),email:B()(["email"],!0,e),phone:B()(["phone"],!1,e)}}function wn(t){return un(t)||dn(t)?B()(["availablePaymentMethods"],[],t):B()(["paymentMethods"],[],t).map((function(t){return t.type}))}function kn(t){return Boolean(bn(t)||gn(t))||t.type&&[Je.Checkout,Je.CheckoutOld].includes(t.type)}function Sn(t){return(un(t)||dn(t))&&t.availablePaymentMethods&&1===Ze()(t.availablePaymentMethods)&&He()(t.availablePaymentMethods)===nn.Split}function Cn(t){return[hn(t),C(8),Date.now()].join(".")}function xn(t){return xn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xn(t)}function Pn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Pn=function(){return!!t})()}function Mn(t){var e="function"==typeof Map?new Map:void 0;return Mn=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(Pn())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,e);var r=new(t.bind.apply(t,o));return n&&F(r,n.prototype),r}(t,arguments,xn(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),F(n,t)},Mn(t)}var En,In=function(t){function e(){return t.apply(this,arguments)||this}return N(e,t),e}(Mn(Error)),Bn=function(t){function e(){return t.apply(this,arguments)||this}return N(e,t),e}(Mn(Error));function On(t,e){if(!t){var n=new In(e);throw J("assert-error",n),n}}function Tn(t){if(un(t)||dn(t))return!1;var e=t.requiredFields;return Boolean(e&&("shippingContact"in e||"shippingTypes"in e))}function Rn(t){un(t)&&function(t,e){return je(e)&&Object.prototype.hasOwnProperty.call(e,t)}("metadata",t)&&(On("string"==typeof t.metadata,"sheet.metadata must be a string"),"string"==typeof t.metadata&&On(encodeURIComponent(t.metadata).length<=512,"sheet.metadata is too long"))}function An(t){var e;if(un(t)||dn(t))return{allowedAuthMethods:[],allowedCardNetworks:[]};var n=null===(e=t.paymentMethods)||void 0===e?void 0:e.find((function(t){return t.type===nn.Card}));if(!n)return{allowedAuthMethods:[],allowedCardNetworks:[]};var o=n.allowedAuthMethods,r=void 0===o?[]:o,i=n.allowedCardNetworks;return{allowedAuthMethods:r,allowedCardNetworks:void 0===i?[]:i}}function _n(t){return cn(t)?t.merchant:{id:t.merchantId,url:"",name:""}}var Wn=function(t){return t.type?t.type:dn(t)?Je.ByToken:un(t)?t.orderId?Je.Payment:Je.Checkout:Tn(t)?Je.CheckoutOld:Je.Token},Un=function(t){return[Je.Payment,Je.Checkout].includes(t)},Ln=function(t,e){return cn(t)&&"order"in e?(t.order=Object.assign({},t.order,e.order),!0):un(t)&&("cart"in e||"metadata"in e)?(t.cart=Object.assign({},t.cart,e.cart),t.metadata=e.metadata||t.metadata,!0):!(!dn(t)||!("totalAmount"in e)&&!("availablePaymentMethods"in e))&&(t.totalAmount=e.totalAmount||t.totalAmount,t.availablePaymentMethods=e.availablePaymentMethods||t.availablePaymentMethods,!0)},Dn=((En={})[Je.Token]="payment",En[Je.Payment]="payment-v3",En[Je.Checkout]="checkout-v3",En[Je.CheckoutOld]="checkout",En[Je.Subscription]="subscription",En[Je.ByToken]="payment-v3",En);function jn(t){return t.replace(/^https:\/\/pay\.yandex\./,"https://sandbox.pay.yandex.")}var Fn=function(t,e){void 0===e&&(e={});var n={};if(n.abuid=We,n.ymuid=_e,e.amAuth&&(n.ama="1"),e.rpcs&&(n.rpcs=e.rpcs),e.sessionType&&(n.pt=Dn[e.sessionType],n.st=e.sessionType),e.duid&&(n.duid=e.duid),e.extra&&(n.extra=JSON.stringify(e.extra)),t){var o=function(t,e){var n=e?"click-"+e:"";return n?[t,n]:[t]}(t,e.checkoutCounter);n.msid=o[0]||"",n.mcid=o[1]||""}return e.sdkInIframe&&(n.sifrm="1"),e.merchantId&&(n.merchantId=e.merchantId),n},Nn=function(t,e,n){void 0===n&&(n={});var o=t,r=Fn(e,n);return n.env===Qe.Sandbox&&(o=jn(t)),it(o,r)};function Kn(t){return et(t)}var zn=function(t,e){var n;return void 0===e&&(e=0),setTimeout(t,null!==(n=e)&&void 0!==n?n:1e3)},Vn=function(t,e,n){var o;void 0===n&&(n=0);var r=function(){if(t())return e();o=zn(r,n)};return r(),function(){o&&clearTimeout(o)}},qn=function(t){return void 0===t&&(t=""),t+"-"+ ++qn.counter};function Hn(t,e){return"string"==typeof t?encodeURIComponent(t):Math.round(1e3*(t-(e||0)))/1e3}qn.counter=0;var Yn={};function Zn(t,e,n){void 0===n&&(n={});var o=v(n),r={1701:t,2877:Hn(e)};Object.entries(o).forEach((function(t){var e=t[0],n=t[1];r[e]=String(n)})),l("690.2096.2877",r,g())}function $n(t){Yn[t]=[Date.now()]}function Gn(t){var e=Yn[t];e&&0!==e.length&&(e.push(Date.now(),v()),function(t){var e,n,o,r=Yn[t],i=void 0;if(r&&(n=r[0],o=r[1],i=r[2]),void 0!==n&&void 0!==o){var a={1701:t,207.2154:Hn(n),207.1428:Hn(o),2877:Hn(o-n)};Object.entries(null!==(e=i)&&void 0!==e?e:{}).forEach((function(t){var e=t[0],n=t[1];a[e]=String(n)})),l("690.2096.2877",a),delete Yn[t]}}(t))}var Jn=function(t){return t[t.InitFrameCreationStarted=0]="InitFrameCreationStarted",t[t.InitFrameCreated=1]="InitFrameCreated",t[t.FirstSessionCreationStarted=2]="FirstSessionCreationStarted",t[t.SessionCreationStarted=3]="SessionCreationStarted",t[t.SessionCreated=4]="SessionCreated",t[t.FirstViewMountingStarted=5]="FirstViewMountingStarted",t[t.WidgetMountingStarted=6]="WidgetMountingStarted",t[t.WidgetMounted=7]="WidgetMounted",t[t.SimpleButtonMountingStarted=8]="SimpleButtonMountingStarted",t[t.SimpleButtonMounted=9]="SimpleButtonMounted",t[t.PersonalButtonMountingStarted=10]="PersonalButtonMountingStarted",t[t.PersonalButtonMounted=11]="PersonalButtonMounted",t[t.SimpleWidget_MountingStarted=12]="SimpleWidget_MountingStarted",t[t.SimpleWidget_Mounted=13]="SimpleWidget_Mounted",t[t.SimpleWidgetModal_MountingStarted=14]="SimpleWidgetModal_MountingStarted",t[t.SimpleWidgetModal_Mounted=15]="SimpleWidgetModal_Mounted",t[t.InfoWidget_MountingStarted=16]="InfoWidget_MountingStarted",t[t.InfoWidget_Mounted=17]="InfoWidget_Mounted",t[t.UltimateWidget_MountingStarted=18]="UltimateWidget_MountingStarted",t[t.UltimateWidget_Mounted=19]="UltimateWidget_Mounted",t}({}),Qn=function(t){return t.CreateInitFrame="sdk--create-init-frame",t.WaitInitFrame="sdk--wait-init-frame",t.WaitCreateSession="sdk--wait-create-session",t.CreateSession="sdk--create-session",t.WaitMount="sdk--wait-mount",t.ShowWidget="sdk--show-widget",t.ShowSimpleButton="sdk--show-simple-button",t.ShowSimpleButtonByWidget="sdk--show-simple-button.by-widget",t.ShowPersonalButton="sdk--show-personal-button",t.ShowPersonalButtonByWidget="sdk--show-personal-button.by-widget",t.ShowSimpleButtonFromCreate="sdk--show-simple-button.from-create",t.ShowSimpleButtonFromCreateByWidget="sdk--show-simple-button.by-widget.from-create",t.ShowPersonalButtonFromCreate="sdk--show-personal-button.from-create",t.ShowPersonalButtonFromCreateByWidget="sdk--show-personal-button.by-widget.from-create",t.ShowSimpleWidget="sdk--show-simple-widget",t.ShowSimpleWidgetFromInit="sdk--show-simple-widget.from-init",t.ShowSimpleWidgetModal="sdk--show-simple-widget-modal",t.ShowUltimateWidget="sdk--show-ultimate-widget",t}(Qn||{}),Xn={deltaName:Qn.CreateInitFrame,from:Jn.InitFrameCreationStarted,to:Jn.InitFrameCreated},to={deltaName:Qn.WaitInitFrame,sendZero:!0,from:Jn.FirstSessionCreationStarted,to:Jn.InitFrameCreated},eo={deltaName:Qn.WaitCreateSession,sendZero:!0,from:Jn.InitFrameCreated,to:Jn.FirstSessionCreationStarted},no={deltaName:Qn.CreateSession,from:Jn.SessionCreationStarted,to:Jn.SessionCreated},oo={deltaName:Qn.WaitMount,from:Jn.SessionCreated,to:Jn.FirstViewMountingStarted},ro={deltaName:Qn.ShowWidget,from:Jn.WidgetMountingStarted,to:Jn.WidgetMounted},io={deltaName:Qn.ShowWidget,from:Jn.UltimateWidget_MountingStarted,to:Jn.UltimateWidget_Mounted},ao={deltaName:Qn.ShowSimpleWidget,from:Jn.SimpleWidget_MountingStarted,to:Jn.SimpleWidget_Mounted},so={deltaName:Qn.ShowSimpleWidgetModal,from:Jn.SimpleWidgetModal_MountingStarted,to:Jn.SimpleWidgetModal_Mounted},uo={deltaName:Qn.ShowSimpleWidgetFromInit,trigger:Jn.SimpleWidget_Mounted,include:[Xn,ao]},co=function(t){var e=t.isInWidget;return{deltaName:Boolean(e)?Qn.ShowSimpleButtonByWidget:Qn.ShowSimpleButton,from:Jn.SimpleButtonMountingStarted,to:Jn.SimpleButtonMounted}},lo=function(t){var e=t.isInWidget;return{deltaName:Boolean(e)?Qn.ShowPersonalButtonByWidget:Qn.ShowPersonalButton,from:Jn.PersonalButtonMountingStarted,to:Jn.PersonalButtonMounted}},ho=function(t){var e=t.isInWidget,n=[no];return n.push(co({isInWidget:e})),{deltaName:Boolean(e)?Qn.ShowSimpleButtonFromCreateByWidget:Qn.ShowSimpleButtonFromCreate,trigger:Jn.SimpleButtonMounted,include:n}};function fo(t){return void 0!==t.trigger}var mo,po=[Xn,to,eo,no,oo,ro,io,ao,so,uo,co,lo,ho,function(t){var e=t.isInWidget,n=ho({isInWidget:e}).include;return n.push(lo({isInWidget:e})),{deltaName:Boolean(e)?Qn.ShowPersonalButtonFromCreateByWidget:Qn.ShowPersonalButtonFromCreate,trigger:Jn.PersonalButtonMounted,include:n}}];function yo(t,e){return e-t}function vo(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return go(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?go(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function go(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var bo=function(){function t(t,e){this.marks=void 0,this.additional=void 0,this.marks=[].concat(t),this.additional=e}t.of=function(t){return this.registry.get(t)||this.primary},t.ofSession=function(t){return this.sessionRegistry.get(t)||this.primary},t.unbindFromSession=function(t){this.sessionRegistry.delete(t)};var e=t.prototype;return e.fork=function(e){return void 0===e&&(e={}),new t(this.marks,Object.assign({},this.additional,e))},e.bind=function(e){t.registry.set(e,this)},e.bindBySession=function(e){t.sessionRegistry.set(e,this)},e.send=function(t,e){Zn(t,e,this.additional)},e.trySendSimple=function(t){var e=t.deltaName,n=t.sendZero,o=t.from,r=t.to;if(this.has(o)&&this.has(r)){var i=yo(this.get(o),this.get(r));this.send(e,i)}else n&&this.has(r)&&this.send(e,0)},e.trySendCompound=function(t){for(var e,n=t.deltaName,o=0,r=vo(t.include);!(e=r()).done;){var i=e.value,a=i.from,s=i.to;if(!this.has(a)||!this.has(s))return;o+=yo(this.get(a),this.get(s))}this.send(n,o)},e.trySend=function(t){if(this.has(t))for(var e,n=vo(po);!(e=n()).done;){var o=e.value;"function"==typeof o&&(o=o(this.additional)),fo(o)?o.trigger===t&&this.trySendCompound(o):o.to===t&&this.trySendSimple(o)}},e.has=function(t){return void 0!==this.marks[t]},e.get=function(t){return this.marks[t]},e.mark=function(t){this.has(t)||(this.marks[t]=window.performance?performance.now():Date.now(),this.trySend(t))},t}();mo=bo,bo.registry=new WeakMap,bo.sessionRegistry=new Map,bo.primary=new mo([],{});var wo=function(t){return t.Ready="ready",t.Abort="abort",t.Error="error",t.Process="process",t.Ping="ping",t.Change="change",t.Reset="reset",t.Setup="setup",t.Success="success",t.NativeInitialize="nativeInitialize",t}({}),ko=function(t){return t.Close="CLOSE",t.Timeout="TIMEOUT",t.ManualClose="MANUAL_CLOSE",t}({}),So=function(t){return t.SdkReady="sdk-ready",t.SdkExp="sdk-exp",t.SdkPing="sdk-ping",t.SdkSplitAvailable="sdk-split-available",t.PaymentUpdate="payment-update",t.PaymentProcess="payment-process",t.PaymentLock="payment-lock",t.PaymentError="payment-error",t.PaymentExtra="payment-extra",t.PaymentUnlock="payment-unlock",t.IsReadyToPay="sdk-is-ready-to-pay",t.CheckPayment="sdk-check-payment",t.SdkCheckPaymentResponse="sdk-check-payment-response",t.SdkBroadcastSendMessage="sdk-broadcast-send-message",t.SdkBroadcastOnMessage="sdk-broadcast-on-message",t.SdkIsSplitAvailable="sdk-is-split-available",t.SdkIsSplitAvailableResponse="sdk-is-split-available-response",t}({}),Co=function(t){return t.Setup="setup",t.Payment="payment",t.Update="update",t.Complete="complete",t.Ping="ping",t.NativeInitialized="nativeInitialized",t.GoBack="goback",t}({}),xo=function(t){return t.Success="success",t.Error="error",t.Close="close",t.AuthRedirect="auth-redirect",t}({}),Po=function(t){function e(){var e;return(e=t.call(this)||this).mounted=!1,e.frame=void 0,e.listener=void 0,e.emitter=void 0,e.paymentReady=new Map,e.paymentStart=new Map,e.sendMessage=function(t){Vn((function(){return e.mounted}),(function(){e.emitter?e.emitter.send(t):Z("SDK: init frame 2 cannot send message because of emitter")}),100)},e.onMessage=function(t){t&&t.type&&(t.type===So.SdkReady&&Ke.set("disabledPRA",t.disabledPRA),t.type!==So.SdkExp&&t.type!==So.SdkReady&&t.type!==So.SdkCheckPaymentResponse&&t.type!==So.SdkBroadcastOnMessage&&t.type!==So.SdkIsSplitAvailableResponse||e.emit(t.type,t))},e.subscribeOnFrame(),e.mountFrame(),e}N(e,t),e.getInstance=function(){return e.instance||(bo.primary.mark(Jn.InitFrameCreationStarted),e.instance=new e),e.instance};var n=e.prototype;return n.subscribeOnFrame=function(){var t=this;this.once(So.SdkExp,(function(e){t.mounted=!0,A.fn(e),bo.primary.mark(Jn.InitFrameCreated)}))},n.mountFrame=function(){var t=this;if(this.frame)Z("SDK: Skip mount init frame 2");else try{var e=Nn(ve,null),n=Kn(e),o=new lt({targetUrl:n}),r="ya-frame-"+C(8);Vn((function(){return Boolean(document.body)}),(function(){var n;t.frame=ze(r,{src:e}),Yt.add(document.body,t.frame),t.emitter=new Ut(o,null!==(n=t.frame.contentWindow)&&void 0!==n?n:void 0)}),10),this.listener=new jt(o),this.listener.on(this.onMessage);var i=setTimeout((function(){G("SDK: Init frame timed out"),t.emit(So.SdkReady,{type:So.SdkReady,readyToPay:!1})}),15e3);this.once(So.SdkExp,(function(){clearTimeout(i)}))}catch(t){$("init speedupFrame",t),this.emit(So.SdkReady,{type:So.SdkReady,readyToPay:!1})}},j(e,[{key:"isReady",get:function(){return this.mounted}}])}(Zt);Po.instance=void 0;var Mo=function(){if(!window)return!1;try{return window.self!==window.top}catch(t){return!0}},Eo=/(.)([A-Z][a-z]+)/g,Io=/([a-z0-9])([A-Z])/g;function Bo(t){for(var e,n={},o=0,r=Object.entries(t);o<r.length;o++){var i=r[o],a=i[0],s=i[1];n[(e=a,e.replace(Eo,"$1_$2").replace(Io,"$1_$2").toLowerCase())]=s}return n}var Oo=["experiments","testIds","boxes"],To="border-radius: 6px; padding: 2px 4px; color: white; font-weight: 300; background-color: #da9827;",Ro={env:"production",project:"pay",page:"",platform:f(),product:"",productVersion:"",merchantId:"",checkoutOrderId:"",sessionId:"",transactionId:"",version:"0.0.0",experiments:"",puid:"",rnd_f:"",rnd_b:"",testIds:"",_debug:!1},Ao=function(t){return"production"===String(t||"").toLowerCase()?"production":"testing"};function _o(e){var n=Ao(e.env||Ro.env),o=e.experiments,i=e.testIds,a=e.boxes,s=t(e,Oo);o&&(s.experiments=h(o)),a?s.testIds=a:i&&i.length&&(s.testIds=i.map(encodeURIComponent).join(";")),Ro=Object.assign(Ro,r(s),{env:n})}function Wo(t,e,n){var o;"object"==typeof e&&(n=e,e=1);var r=function(t,e,n){void 0===n&&(n={});var o=Ro.env;"production"===o&&n.env&&(o=Ao(n.env),delete n.env);var r="number"==typeof e?Number.isInteger(e)?"integer":"float":"string";return{rum_id:"ru."+Ro.project,"-version":Ro.version,"-env":o,"-ua":navigator.userAgent,"-project":Ro.project,"-page":Ro.page,"-ts":Date.now(),"-type":r,"-name":t,"-value":e,"-url":z(),"-referrer":z(),"-additional":JSON.stringify(Bo(Object.assign({merchantId:Ro.merchantId,sessionId:Ro.sessionId,checkoutOrderId:Ro.checkoutOrderId},Ro.transactionId&&{transactionId:Ro.transactionId},{platform:Ro.platform,product:Ro.product,productVersion:Ro.productVersion,puid:Ro.puid,rnd_f:Ro.rnd_f,rnd_b:Ro.rnd_b},n)))}}(t,null!==(o=e)&&void 0!==o?o:1,n),i=[];Ro.experiments&&i.push("experiments="+Ro.experiments),Ro.testIds&&i.push("slots="+Ro.testIds),Ro._debug&&function(t){for(var e=K(t["-additional"],{}),n={},o=0,r=Object.entries(t);o<r.length;o++){var i=r[o],a=i[0],s=i[1];"-additional"!==a&&(n[a.startsWith("-")?a.slice(1):a]=s)}function u(t){for(var e in t){var n=t[e];(n instanceof Array||n instanceof Object)&&(t[e]=JSON.stringify(n))}return t}console.groupCollapsed("%csignal: "+t["-name"],To),console.log("Additionals"),console.table(u(e)),console.log("Signal data"),console.table(u(n)),console.groupEnd()}(r),l("690.32",r,["table=rum_events"].concat(i)),l("690.32",r,["table=trust_front"].concat(i))}var Uo={init:_o,update:_o};function Lo(t,e){Wo(t,e)}var Do={buttonRender:function(t){return Lo("sdk-button-render",t)},buttonClick:function(t){return Lo("sdk-button-click",t)},buttonCheckout:function(t){return Lo("sdk-button-checkout",t)},buttonCheckoutAbort:function(t){return Lo("sdk-button-checkout-abort",t)},buttonCheckoutError:function(t){return Lo("sdk-button-checkout-error",t)},createSession:function(t){return Lo("sdk-create-session",function(t){for(var e={},n=0,o=Object.entries(t||{});n<o.length;n++){var r=o[n],i=r[0],a=r[1];e[i]="boolean"==typeof a?a?"yes":"no":a}return e}(t))}},jo=Object.assign({},Uo,{sdk:Do});function Fo(t){t.env===Qe.Sandbox&&function(t){y({env:t})}("prestable")}function No(t){(un(t)||dn(t))&&(t.availablePaymentMethods?Array.isArray(t.availablePaymentMethods)?0===t.availablePaymentMethods.length?Q("SDK: availablePaymentMethods empty"):Q("SDK: availablePaymentMethods",{value:t.availablePaymentMethods}):Q("SDK: availablePaymentMethods not array",{value:t.availablePaymentMethods}):Q("SDK: availablePaymentMethods undefined"))}var Ko=function(t){return{env:t.env||"",merchantId:hn(t),product:(e=t,Dn[e.type]),productVersion:String(fn(t)),paymentMethods:wn(t)};var e},zo=function(t){function e(e){var n;return(n=t.call(this,e)||this)._bc=void 0,n._bc=_t(n.options.sessionId),n}N(e,t);var n=e.prototype;return n.createMessage=function(t){return new mt(t,this.options.channel,this.options.sourceUrl)},n.send=function(t){var e=this.createMessage(t);this._bc.postMessage(String(e))},n.destroy=function(){},j(e,[{key:"isConnected",get:function(){return!0}}])}(ft),Vo=function(t){function e(e){var n;return(n=t.call(this,e)||this)._bc=void 0,n.onMessage=function(t){try{var e=Rt(t);n.processMessage(e)}catch(t){0}},n._bc=_t(n.options.sessionId),n._bc.addEventListener("message",n.onMessage),n}return N(e,t),e.prototype.destroy=function(){this._bc.removeEventListener("message",this.onMessage)},e}(Dt),qo=function(t){function e(e,n,o){var r,i=(r=t.call(this,e,It())||this).createMessage(n),a=function(t,e){return void 0===e&&(e={}),window.open(t,e.target,e.features)}(Ot(e.targetUrl,String(i)),{target:e.channel,features:o});return r.setTarget(a),r}N(e,t);var n=e.prototype;return n.focus=function(){var t=this;this.isConnected&&ht((function(){var e;null===(e=t.target)||void 0===e||e.focus()}))},n.close=function(){var t=this;this.isConnected&&ht((function(){var e;null===(e=t.target)||void 0===e||e.close()}))},e}(Ut),Ho=function(t){function e(e,n){var o;return(o=t.call(this,e)||this).target=void 0,o.target=n,o}N(e,t);var n=e.prototype;return n.createMessage=function(t){return new mt(t,this.options.channel,this.options.sourceUrl)},n.send=function(t){var e=this,n=this.createMessage(t);ht((function(){e.target.postMessage(String(n))}))},n.destroy=function(){},j(e,[{key:"isConnected",get:function(){return!0}}])}(ft),Yo=function(t){function e(e,n){var o;return(o=t.call(this,e)||this).target=void 0,o.onMessage=function(t){try{var e=o.createMessage(t);o.processMessage(e)}catch(t){0}},o.target=n,o.target&&"function"==typeof o.target.addEventListener&&o.target.addEventListener("message",o.onMessage),o}N(e,t);var n=e.prototype;return n.createMessage=function(t){var e=JSON.parse(t.data),n=e.sourceUrl&&et(e.sourceUrl)===t.origin?e.sourceUrl:t.origin;return new mt(e.payload,e.channel,n)},n.destroy=function(){this.target.removeEventListener("message",this.onMessage)},e}(Dt),Zo=function(t){function e(e){var n;return(n=t.call(this,e)||this).isSent=!1,n}N(e,t);var n=e.prototype;return n.constructUrl=function(t){return t||this.options.targetUrl},n.send=function(t,e){this.isSent||(X(this.constructUrl(e)),this.isSent=!0)},n.destroy=function(){this.isSent=!0},j(e,[{key:"isConnected",get:function(){return!1}}])}(ft),$o=function(t){function e(e,n){var o;return void 0===n&&(n={}),(o=t.call(this,e)||this).params=n,o.isSent=!1,o}N(e,t);var n=e.prototype;return n.createMessage=function(t){var e=this.options.sourceUrl;return this.params.noEmitSourceUrl&&(e=void 0),new mt(t,this.options.channel,e)},n.constructUrl=function(t){var e=this.createMessage(t);return Ot(this.options.targetUrl,String(e),this.params.forceQueryMode)},n.send=function(t){this.isSent||(X(this.constructUrl(t)),this.isSent=!0)},n.destroy=function(){this.isSent=!0},j(e,[{key:"isConnected",get:function(){return!1}}])}(ft),Go=function(t){function e(e,n,o){var r;return void 0===o&&(o=!1),r=t.call(this,e)||this,o?setTimeout((function(){return r.send(n)}),500):r.send(n),r}N(e,t);var n=e.prototype;return n.focus=function(){},n.close=function(){},e}($o),Jo=function(t){function e(e){var n;return(n=t.call(this,e)||this).processTimeout=void 0,n.onProcess=function(){try{var t=n.createMessage();n.processMessage(t)}catch(t){0}},n.processTimeout=setTimeout(n.onProcess,50),n}N(e,t);var n=e.prototype;return n.hasQueryMessage=function(){return t=this.options.sourceUrl,e=rt(t),{hasMessage:Boolean(e[ct]),hasForceMode:Boolean(e[dt])};var t,e},n.createMessage=function(){var t=rt(this.options.sourceUrl)[ct]||"",e=JSON.parse("?"===t.slice(-1)?t.slice(0,-1):t);return new mt(e.payload,e.channel,e.sourceUrl)},n.destroy=function(){clearTimeout(this.processTimeout)},e}(Dt),Qo=function(t){function e(e){var n;return void 0===e&&(e=new lt),(n=t.call(this)||this).options=e,n.queryListener=void 0,n.messageListener=void 0,n.nativeListener=void 0,n.broadcastListener=void 0,n.waitInitializationP=void 0,n.setInitialized=void 0,n.emitter=void 0,n.onMessage=function(t,e){n.emit(t,e)},n.onOptionsMessage=function(t,e){var o,r;n.options.isInitialized?n.clearSource():n.updateOptions(e),null===(o=(r=n).setInitialized)||void 0===o||o.call(r,!0)},n.createQueryListener(),n.createMessageListener(),n.createBroadcastListener(),n.waitInitializationP=new Promise((function(t){n.setInitialized=t,n.options.isInitialized&&t(!0)})),n}N(e,t);var n=e.prototype;return n.createQueryListener=function(){this.queryListener=new Jo(this.options),this.queryListener.on(this.onMessage),this.queryListener.on(this.onOptionsMessage)},n.createMessageListener=function(){this.messageListener=new jt(this.options),this.messageListener.on(this.onMessage)},n.createBroadcastListener=function(){Wt()&&(this.broadcastListener=new Vo(this.options),this.broadcastListener.on(this.onMessage))},n.createNativeListener=function(t){var e;this.nativeListener=new Yo(this.options,t),this.nativeListener.on(this.onMessage),null===(e=this.messageListener)||void 0===e||e.off(this.onMessage),this.broadcastListener&&this.broadcastListener.off(this.onMessage)},n.clearSource=function(){var t;(function(t){history.replaceState(null,document.title,t)})(it(this.options.sourceUrl,((t={})[ct]=void 0,t[dt]=void 0,t)).split("#")[0])},n.updateOptions=function(t){this.options.targetUrl=t.sourceUrl||"/"},n.hasQueryMessage=function(){var t;return null===(t=this.queryListener)||void 0===t?void 0:t.hasQueryMessage()},n.connect=function(t){var e;void 0===t&&(t={});var n=this.connectNative(t);if(n)return n;var o=(null===(e=t.message)||void 0===e?void 0:e.target)||Bt();try{if(t.forceQueryMode||o===window)throw new Error;return this.emitter=new Ut(this.options,o),this.emitter}catch(e){var r;return Wt()&&null!==(r=t.connection)&&void 0!==r&&r.isQueryModeDisabled?(this.emitter=new zo(this.options),this.emitter):(this.emitter=new $o(this.options,Object.assign({forceQueryMode:Boolean(t.forceQueryMode)},t.query)),this.emitter)}},n.connectNative=function(t){if(void 0===t&&(t={}),t.native&&(t.native.listener&&this.createNativeListener(t.native.listener),t.native.target))return this.emitter=new Ho(this.options,t.native.target),this.emitter},n.connectRedirectEmitter=function(){return this.emitter=new Zo(this.options),this.emitter},n.open=function(t,e,n,o,r){try{return o?new Go(this.options,t,null==n?void 0:n()):new qo(this.options,t,e)}catch(e){if(r)throw new Error("QueryMode is disabled");var i=null==n?void 0:n();return new Go(this.options,t,i)}},n.destroy=function(){var t,e;null===(t=this.queryListener)||void 0===t||t.destroy(),null===(e=this.messageListener)||void 0===e||e.destroy(),this.broadcastListener&&this.broadcastListener.destroy()},n.waitInitialization=function(){return this.waitInitializationP},j(e,[{key:"isQueryMode",get:function(){return this.emitter instanceof $o||this.emitter instanceof Zo}},{key:"isBroadcastMode",get:function(){return this.emitter instanceof zo}}])}(Lt);function Xo(t,e){var n,o=null===(n=("; "+document.cookie).split("; "+t+"=").pop())||void 0===n?void 0:n.split(";").shift();return void 0===o?e:o}var tr=n(970),er=n.n(tr),nr=function(t,e){return void 0===e&&(e={}),function(){var n=[],o=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2];Array.isArray(r)&&(i=r,r=void 0),Array.isArray(o)&&(i=o,o=void 0),"object"==typeof o&&(r=o,o=void 0);var a=o?t+"__"+o:t;if(n.push(a),r)for(var s=0,u=Object.entries(r);s<u.length;s++){var c=u[s],d=c[0],l=c[1];"boolean"==typeof l||null==l?l&&n.push(a+"_"+d):n.push(a+"_"+d+"_"+l)}var h=n.join(" ");return e.lowerCase&&(h=h.toLowerCase()),i&&Array.isArray(i)&&(h=[h].concat(i).join(" ")),h}},or=function(t){var e,n,o,r=t.offsetWidth,i=t.offsetHeight;if(r>=75&&i>=32){var a=(n=(e={width:r,height:i}).width,o=e.height,{paddingX:Math.min(36,10+.5*Math.max(0,n-75)),paddingY:Math.min(17,4+.5*Math.max(0,o-32))}),s=a.paddingX,u=a.paddingY;Yt.style(t,{padding:u+"px "+s+"px"})}},rr=function(t){return t.Ready="READY",t.Failure="FAILURE",t}({}),ir=function(t){return t.Update="UPDATE",t.Process="YAPAY_PROCESS",t.Lock="LOCK",t.Unlock="UNLOCK",t.Error="ERROR",t.Extra="EXTRA",t}({}),ar=n(688),sr=n.n(ar);const ur=n.p+"_/yapay-simple-black-red.en.ddba3076.svg",cr=n.p+"_/yapay-simple-black-red.ccc8c125.svg",dr=n.p+"_/yapay-simple-white-red.en.fd449128.svg",lr=n.p+"_/yapay-simple-white-red.40eb6a45.svg";var hr='xmlns="http://www.w3.org/2000/svg" fill="none"',fr=function(t,e,n){var o=n?pr(t,e):mr(t,e);return"data:image/svg+xml;base64,"+btoa(o)},mr=function(t,e){return["<svg "+hr+' width="59" height="22">','<path fill="#FC3F1D" d="M20.2 11A9.8 9.8 0 1 0 .6 11a9.8 9.8 0 0 0 19.6 0Z"/>',"ru"===e?'<path fill="#FFF" d="M11.8 16.9h2V5h-3c-3 0-4.5 1.6-4.5 3.8 0 1.8.8 3 2.4 4L6 17h2.2l3-4.5-1-.7c-1.3-.8-1.9-1.5-1.9-2.9 0-1.2.9-2 2.6-2h.9v10Z"/>':'<path fill="#FFF" d="M10.7 12a6 6 0 0 1 .7 3.2v2h-2v-3.4L5.5 5.5h2.2l3 6.5Zm2.5-6.5L10.7 11h2l2.6-5.6h-2.1Z"/>',"ru"===e?'<path fill="'+t+'" d="M35.1 3.4v14.8h-2.5V5.4H28v12.8h-2.6V3.4h9.7ZM39.4 18.4c-1.1 0-2-.2-2.6-.7v-2a4.1 4.1 0 0 0 2.5.7c.8 0 1.4-.2 1.8-.7.4-.5.6-1.1.7-2h-3.7v-2h3.7c-.2-1.6-1-2.4-2.5-2.4-.4 0-.9 0-1.3.2a5 5 0 0 0-1 .5V7.8c.3-.1.6-.3 1-.3l1.7-.2c.8 0 1.5.1 2 .4A4 4 0 0 1 43.4 9c.4.5.7 1 .9 1.7.2.7.3 1.4.3 2.3 0 1.7-.4 3.1-1.3 4-.8 1-2 1.5-3.8 1.5ZM50.5 6.1c-1 0-1.8-.2-2.3-.7-.5-.6-.8-1.2-.8-2h2.1c0 .4.1.7.3.9l.7.2c.3 0 .5 0 .6-.2.2-.2.3-.5.3-.9h2l-.1 1c-.2.4-.3.7-.6 1-.2.2-.5.4-1 .5l-1.2.2Zm-1.9 1.4v6.6l3.9-6.6h2.2v10.7h-2.4v-6.6l-3.9 6.6h-2.2V7.5h2.4Z"/>':'<path fill="'+t+'" d="M29.3 3.4a6 6 0 0 1 4 1.3c1 .8 1.5 2 1.5 3.4 0 .8-.2 1.5-.4 2.1-.3.6-.7 1.1-1.1 1.5-.5.4-1 .7-1.8 1a8 8 0 0 1-2.2.2H28v5.3h-2.5V3.4h3.8Zm0 7.5a3 3 0 0 0 2-.7c.6-.4.9-1.1.9-2 0-1-.3-1.7-.8-2.1-.4-.5-1.1-.7-2-.7H28V11h1.3ZM41.7 13.3h-.4c-1 0-1.8.1-2.3.4-.5.2-.7.7-.7 1.3 0 .4.1.8.4 1 .2.3.6.5 1.2.5.4 0 .8-.1 1.1-.3.3-.1.5-.3.7-.6v-2.3Zm2.5 2.3.1 2.6H42l-.2-.4v-.5h-.1l-1 .7c-.3.2-.9.3-1.6.3-1 0-1.8-.3-2.4-.9-.6-.5-.9-1.4-.9-2.4 0-1.1.5-2 1.3-2.6 1-.6 2.3-.9 4.3-.9h.4V11c0-.6-.2-1-.4-1.2-.3-.2-.8-.3-1.4-.3h-1a7 7 0 0 0-1.8.6l-.6.4v-2a7 7 0 0 1 3.7-1c1.4 0 2.4.2 3 .7.7.6 1 1.5 1 2.8v4.7ZM47.6 21.5l-.6-.1-.5-.1-.3-.2v-2c.3.2.7.4 1.2.4.3 0 .6-.1.8-.3.2-.1.4-.3.5-.6l-3.6-11h2.6l2.4 8 2.3-8H55l-3.4 10-.6 1.5c-.2.5-.4.9-.7 1.2-.3.4-.7.7-1.1.9-.4.2-1 .3-1.5.3Z"/>',"</svg>"].join("")},pr=function(t,e){return"<svg "+hr+' width="70" height="19"> '+("ru"===e?'<path fill="'+t+'" d="M26.82 16.83a5.06 5.06 0 0 1-4.18-1.91c-1.02-1.3-1.53-3.1-1.53-5.44 0-2.28.5-4.07 1.51-5.39a5.21 5.21 0 0 1 4.39-1.98c.66 0 1.25.1 1.78.3.52.17.95.38 1.28.6v2a8.46 8.46 0 0 0-1.33-.65c-.5-.2-1.04-.31-1.6-.31-1.22 0-2.1.44-2.66 1.34-.55.89-.82 2.25-.82 4.1 0 1.78.27 3.13.82 4.05.56.9 1.4 1.36 2.53 1.36a4.63 4.63 0 0 0 3.06-1.05v2c-.32.21-.75.43-1.28.65a5.2 5.2 0 0 1-1.97.33ZM31.62 6.27h8.11v10.36h-2.46V8.2h-3.19v8.41h-2.46V6.28ZM40.97 14.5l.15.1c.1.06.23.09.41.09.4 0 .66-.2.79-.62.12-.4.2-1.16.25-2.26l.2-5.54h7.05v10.36h-2.46V8.2h-2.5l-.14 3.7a10.04 10.04 0 0 1-.64 3.75c-.38.78-1.09 1.17-2.13 1.17a2 2 0 0 1-.7-.1l-.28-.1V14.5ZM51.9 6.27h2.4v6.4l3.8-6.4h2.13v10.36h-2.4v-6.4l-3.8 6.4H51.9V6.27ZM69.93 8.2h-2.9v8.43h-2.46V8.2h-2.9V6.27h8.26v1.94Z"/>':'<path fill="'+t+'" d="M25.37 16.74a5.93 5.93 0 0 1-3.91-1.28v-2c.34.26.83.55 1.48.87.66.31 1.4.47 2.22.47.77 0 1.39-.18 1.85-.53.47-.37.7-.9.7-1.59 0-.42-.1-.77-.29-1.03-.17-.27-.41-.5-.72-.68a4.57 4.57 0 0 0-1-.45c-.39-.12-.78-.25-1.18-.4a7.33 7.33 0 0 1-1.13-.46c-.37-.2-.7-.44-.99-.72a3.7 3.7 0 0 1-.68-1.12c-.16-.45-.24-1-.24-1.64a3.75 3.75 0 0 1 2.84-3.89 6.51 6.51 0 0 1 1.89-.27 5.41 5.41 0 0 1 3.3.93v2c-.42-.24-.88-.46-1.39-.67a4.66 4.66 0 0 0-1.85-.33c-.82 0-1.43.18-1.8.54-.4.36-.59.85-.59 1.48 0 .76.29 1.28.85 1.57.57.27 1.23.52 1.97.74 1 .28 1.84.74 2.52 1.35.68.6 1.02 1.56 1.02 2.85 0 .82-.14 1.5-.43 2.05-.29.55-.66 1-1.13 1.32-.45.32-.97.54-1.56.68-.58.14-1.16.2-1.75.2ZM34.26 6.18l.12 1.33a3.15 3.15 0 0 1 2.76-1.54c1.15 0 2.1.47 2.82 1.4.73.93 1.1 2.26 1.1 3.97 0 1.73-.38 3.06-1.14 4a3.53 3.53 0 0 1-4.36 1.05c-.44-.25-.81-.6-1.11-1.07v4.2H32V6.17h2.26Zm2.14 8.62c.7 0 1.23-.27 1.59-.82.35-.56.53-1.44.53-2.64 0-1.2-.16-2.06-.5-2.61a1.64 1.64 0 0 0-1.5-.82c-.68 0-1.2.28-1.56.84a5.1 5.1 0 0 0-.51 2.61c0 1.2.16 2.07.49 2.62.33.55.82.82 1.46.82ZM45.14 2.22v14.31h-2.45V2.23h2.45ZM48.4 4.9a1.38 1.38 0 0 1-1.42-1.44c0-.43.14-.77.42-1.03.27-.27.6-.41 1-.41s.74.14 1.02.41c.28.26.43.6.43 1.03A1.41 1.41 0 0 1 48.4 4.9Zm-1.2 1.28h2.44v10.35H47.2V6.18ZM50.87 6.18h1.3V3.9h2.45v2.27h2.57V8.1h-2.57v5.33c0 .39.12.71.37.97s.62.4 1.13.4c.41 0 .73-.06.95-.17l.33-.17v2l-.5.12c-.33.1-.79.15-1.38.15-1.12 0-1.97-.31-2.53-.93a3.5 3.5 0 0 1-.82-2.39v-5.3h-1.3V6.17Z"/>')+' <g clip-path="url(#a)"><path fill="url(#b)" d="m16.37 16.36-.02-.02-.01-.03-.01-.02-.01-.03-.02-.02.01-.02v-.01l-.02-.02-.02-.02-.02-.03.02-.01-.02-.02-.01-.03v-.02s0-.02-.02-.03l.02-.01-.04-.05.01-.01-.02-.03s0-.02-.03-.04l-.02-.04.02-.01-.02-.02-.01-.02.02-.02-.05-.08-.02-.02-.01-.03-.01-.03-.01-.03h.01l-.03-.06-.02-.03h.01l-.03-.07-.02-.02v-.03l-.02-.03-.01-.04-.01-.02-.13-.33c-.58-1.4-3.04-7.26-3.2-7.68l.02-.02c4.63-3.67 4.1-4.2 4.1-4.2a9.62 9.62 0 0 0-14.13.1c-.15.16-.28.32-.4.48l-.35.48A9.58 9.58 0 0 0 2.68 16a9.47 9.47 0 0 0 8.13 2.94 9.56 9.56 0 0 0 5.37-2.37l.06-.05.14-.13-.02-.02v-.01Z" /><path fill="url(#f)" d="m12.48 7.36-.6.48a181.48 181.48 0 0 1-4.71 3.68 21.82 21.82 0 0 0 5.31 4.2c1.7.9 3.03 1.07 3.68.5.65-.58.57-1.9-.18-3.64-.9-1.9-2.08-3.66-3.5-5.22Z" /><path fill="#84EEB1" d="m12.6 7.26-.72.58a19.88 19.88 0 0 1 3.28 4.9c.74 1.71.72 2.57.48 2.79-.23.21-1.27.27-2.92-.6A19.97 19.97 0 0 1 7.82 11l-.82.6.2.2c3.43 3.55 7.15 5.57 8.79 4.84l.14-.08h.02l.18-.13.16-.18c1.07-1.4-.56-5.18-3.79-8.88l-.1-.12Z" /></g><defs><radialGradient id="b" cx="0" cy="0" r="1" gradientTransform="matrix(42.368 0 0 32.2871 12.67 1.39)" gradientUnits="userSpaceOnUse" ><stop stop-color="#48F56D" /><stop offset=".09" stop-color="#43EA68" /><stop offset=".25" stop-color="#37CB5A" /><stop offset=".44" stop-color="#239A44" /><stop offset=".62" stop-color="#085625" /><stop offset=".8" stop-color="#00421C" /></radialGradient><linearGradient id="f" x1="13.25" x2="9.71" y1="22.97" y2="-2.44" gradientUnits="userSpaceOnUse" ><stop offset=".1" stop-color="#FF8475" /><stop offset=".37" stop-color="#E84E43" /><stop offset=".6" stop-color="#D6261F" /><stop offset=".79" stop-color="#CC0E08" /><stop offset=".9" stop-color="#C80500" /></linearGradient><clipPath id="a"><rect width="19.09" height="19" x=".17" fill="'+t+'" rx="9.5" /></clipPath></defs></svg>'},yr=function(t){return t.replace(/[\r\n\t]+/gm,"").replace(/\s{2,}/g," ").replace(/ ?([{:;,!}]) ?/g,"$1").trim()},vr="#FFF",gr="#2E2F33",br={light:"radial-gradient(340px 82px at top, rgba(255, 92, 77, 0.1) 0%, rgba(235, 70, 159, 0.1) 10%, rgba(131, 65, 239, 0.036) 40%, rgba(63, 104, 249, 0) 52%)",dark:"radial-gradient(340px 82px at top, rgba(255, 92, 77, 0.5) 0%, rgba(235, 70, 159, 0.5) 10%, rgba(131, 65, 239, 0.18) 40%, rgba(63, 104, 249, 0) 52%)",bnplLight:"radial-gradient(73.06% 50% at 50% 0%, rgba(71, 241, 108, 0.3) 0%, rgba(59, 211, 94, 0.25) 25%, rgba(45, 179, 79, 0.07) 75%, rgba(32, 147, 65, 0) 100%)",bnplDark:"radial-gradient(73.06% 50% at 50% 0%, rgba(71, 241, 108, 0.50) 0%, rgba(59, 211, 94, 0.50) 25%, rgba(45, 179, 79, 0.18) 75%, rgba(32, 147, 65, 0.00) 100%)"},wr=function(t){t.target instanceof HTMLButtonElement&&function(t){var e=t.offsetWidth,n=t.offsetHeight;if(e>=Le&&n>=De){var o=Math.min(36,10+.5*Math.max(0,e-Le)),r=Math.min(17,4+.5*Math.max(0,n-De));return Yt.style(t,{padding:r+"px "+o+"px"})}Yt.style(t,{padding:"4px 2px"})}(t.target)},kr=function(t,e,n,o){var r=t.theme,i=t.width,a=t.style;return Object.assign({},function(t,e){var n,o,r,i;return{overflow:"hidden",flex:"1 0 auto","box-sizing":"border-box",width:t===Jt.MaxImportant?"100%":"","min-width":t===Jt.MaxImportant?"100%":"","max-width":t===Jt.MaxImportant?"100%":"",height:null!==(n=null==e?void 0:e.height)&&void 0!==n?n:"","min-height":null!==(o=null==e?void 0:e.height)&&void 0!==o?o:"","max-height":null!==(r=null==e?void 0:e.height)&&void 0!==r?r:"",cursor:"pointer","user-select":"none","border-width":"1px","border-style":"solid","border-radius":null!==(i=null==e?void 0:e.borderRadius)&&void 0!==i?i:"","background-position":"center","background-size":"contain, cover","background-repeat":"no-repeat","background-clip":"border-box","background-origin":"content-box, border-box",transition:"opacity 150ms linear,filter 150ms linear,background-color 150ms linear",transform:"translate3d(0,0,0)"}}(i,a),function(t,e,n,o){var r;if(!n)return{};var i=fr(gr,e,o),a=fr(vr,e,o),s=o?"bnplLight":"light",u=o?"bnplDark":"dark";return((r={})[Gt.White]={"background-color":vr,"background-image":"url("+i+"), "+br[s]},r[Gt.WhiteOutlined]={"background-color":vr,"border-color":"#000000","background-image":"url("+i+"), "+br[s]},r[Gt.Black]={"background-color":gr,"background-image":"url("+a+") ,"+br[u]},r)[n]}(0,e,r,o))},Sr=.5;function Cr(t,e){return je(n=t)&&1===n.nodeType?window.IntersectionObserver?function(t,e){var n=new IntersectionObserver((function(o){var r=o[0];r&&r.isIntersecting&&r.intersectionRatio>=Sr&&(e("io"),n.unobserve(t))}),{threshold:[0,.25,.5,.75,1]});return n.observe(t),function(){return n.unobserve(t)}}(t,e):t.getBoundingClientRect?function(t,e){return Vn((function(){var e=t.getBoundingClientRect(),n=e.width,o=e.height,r=window.innerHeight-e.bottom,i=window.innerWidth-e.right;return Math.max(0,o+Math.min(0,e.top,r))/o*(Math.max(0,n+Math.min(0,e.left,i))/n)>=Sr}),(function(){return e("raf")}))}(t,e):function(t,e){var n,o=function(){n=null,document.body&&document.body.contains?document.body===t||document.body.contains(t)?e("mount"):n=zn(o):e("timer")};return n=zn(o,0),function(){n&&clearTimeout(n)}}(t,e):function(){};var n}function xr(t){return"none"!==Yt.getCssProp(t,"pointerEvents")}function Pr(t){var e=t.parentElement;return e?xr(e)?e:Pr(e):null}function Mr(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Er(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Er(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Er(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var Ir=function(t){function e(e){var n;return(n=t.call(this)||this)._watchInterval=void 0,n._registry=void 0,n.watcherId=void 0,n._watchInterval=e,n._registry=new Map,n}N(e,t);var n=e.prototype;return n.register=function(t){this._registry.set(t,!0),this.emit("change",{mounted:[t]}),this.watcher()},n.unregister=function(t){this._registry.delete(t)},n.watcher=function(){var t=this;this._registry.size>0&&!this.watcherId&&(this.watcherId=setInterval((function(){return t.action()}),this._watchInterval))},n.action=function(){for(var t,e=[],n=[],o=Mr(this._registry);!(t=o()).done;){var r=t.value,i=r[0],a=r[1];i.isConnected!==a&&(this._registry.set(i,!a),a?n.push(i):e.push(i))}(e.length||n.length)&&this.emit("change",{mounted:e,unmounted:n})},j(e,[{key:"activeElements",get:function(){return Array.from(this._registry.entries()).filter((function(t){t[0];return t[1]})).map((function(t){var e=t[0];t[1];return e}))}}])}(Zt),Br=new(function(t){function e(){var e;return(e=t.call(this,100)||this)._dataRegistry=void 0,e._dataRegistry=new Map,e}N(e,t);var n=e.prototype;return n.registerButton=function(e,n){t.prototype.register.call(this,e),this._dataRegistry.set(e,n)},n.unregisterButton=function(e){t.prototype.unregister.call(this,e),this._dataRegistry.delete(e)},n.getData=function(t){return this._dataRegistry.get(t)},j(e,[{key:"values",get:function(){return Array.from(this._dataRegistry.values())}}])}(Ir));function Or(t){Yt.show(t,"inline-block")}var Tr=function(){function t(t,e){this.buttonWatcher=void 0,this.mountingLimit=void 0,this.mountedTimes=void 0,this.logSent=void 0,this.mountedButton=void 0,this.mountedButtonHandler=void 0,this.buttonWatcher=t,this.mountingLimit=e,this.mountedTimes=0,this.logSent=!1}var e=t.prototype;return e.start=function(){var t=this;this.buttonWatcher.on("change",(function(){t.action()}))},e.registerWebButton=function(t,e){this.isApiAvailable&&this.buttonWatcher.registerButton(t,e)},e.unregisterWebButton=function(t){this.isApiAvailable&&this.buttonWatcher.unregisterButton(t)},e.dispatchClickEvent=function(){if(this.hasStickyButton&&this.mountedButton){var t,e=new Event("click",{bubbles:!0});if(xr(this.mountedButton))this.mountedButton.dispatchEvent(e);else null===(t=Pr(this.mountedButton))||void 0===t||t.dispatchEvent(e)}},e.removeStickyButton=function(){var t=this;return $n(Ae.SdkRemountStickyButton),this.mountedButtonHandler?this.mountedButtonHandler.unmount().catch((function(t){G("stickyButtonRemoveError",t)})).then((function(){t.mountedButton&&Or(t.mountedButton),t.mountedButtonHandler=void 0,t.mountedButton=void 0})):Promise.resolve()},e.addStickyButton=function(t){var e=this;this.mountedTimes>0&&Gn(Ae.SdkRemountStickyButton);var n=this.buttonWatcher.getData(t);return n?!this.hasStickyButton&&this.canStickyButtonMount&&t.id?this.api?this.api.mount(n,(function(){return e.dispatchClickEvent()})).then((function(n){!function(t){Yt.hide(t,!0)}(t),e.mountedButtonHandler=n,e.mountedButton=t,e.mountedTimes+=1})).catch((function(e){Or(t),G("stickyButtonMountError",e)})):(G("Replace sticky button with button because of nonexisting api"),Or(t),Promise.resolve()):(Or(t),Promise.resolve()):(G("Replace sticky button with button because of nonexisting button data"),Or(t),Promise.resolve())},e.action=function(){var t=this;if(this.isApiAvailable){var e=this.buttonWatcher.activeElements;if(1===e.length){var n=e[0];n!==this.mountedButton&&this.removeStickyButton().then((function(){return t.addStickyButton(n)}))}else this.removeStickyButton().then((function(){t.buttonWatcher.activeElements.forEach(Or)}))}},j(t,[{key:"api",get:function(){var t,e;return null===(t=window.yandex)||void 0===t||null===(e=t.pay)||void 0===e?void 0:e.stickyButton}},{key:"isApiAvailable",get:function(){return Boolean(this.api)}},{key:"hasStickyButton",get:function(){return Boolean(this.mountedButton)&&Boolean(this.mountedButtonHandler)}},{key:"canStickyButtonMount",get:function(){return this.mountedTimes<this.mountingLimit||(this.logSent||(G("Trying to attach sticky button more than "+this.mountingLimit+" times"),this.logSent=!0),!1)}}])}(),Rr=new Tr(Br,2),Ar=n(952),_r=n.n(Ar),Wr=function(t){var e,n=_r()(t);cn(n)&&(n.order.items=null===(e=n.order.items)||void 0===e?void 0:e.map((function(t){return{amount:t.amount}})),delete n.order.total.label);return un(n)&&(n.cart={items:n.cart.items}),n},Ur=function(t){function e(e,n,o){var r;return(r=t.call(this)||this).frame=void 0,r.frameListener=void 0,r.frameEmitter=void 0,r.payment=void 0,r.buttonOptions=void 0,r.buttonStyles=void 0,r.onMessage=function(t){t&&t.type&&r.emit(t.type,t)},r.onPaymentUpdate=function(){r.frameEmitter&&r.frameEmitter.send({type:ir.Update,paymentSheet:r.payment.sheet})},r.onPaymentProcess=function(){r.frameEmitter&&r.frameEmitter.send({type:ir.Process})},r.onPaymentLock=function(){r.emit(So.PaymentLock,null),r.frameEmitter&&r.frameEmitter.send({type:ir.Lock})},r.onPaymentUnlock=function(){r.emit(So.PaymentUnlock,null),r.frameEmitter&&r.frameEmitter.send({type:ir.Unlock})},r.onPaymentError=function(){r.emit(So.PaymentError,null),r.frameEmitter&&r.frameEmitter.send({type:ir.Error})},r.onPaymentExtraChange=function(t){var e=t.innerType,n=t.bnplSelected;r.frameEmitter&&r.frameEmitter.send({type:ir.Extra,innerType:e,bnplSelected:n})},r.payment=e,r.buttonOptions=n,r.buttonStyles=o,r.subscribePayment(),r}N(e,t),e.create=function(t,n,o){return new e(t,n,o)};var n=e.prototype;return n.destroy=function(){t.prototype.destroy.call(this),this.unmount()},n.mount=function(t){try{if(this.frame)return;var e=this.buttonOptions,n=this.buttonStyles,o=this.payment,r=o.sheet,i=o.env,a=Wr(r),s=Nn(ge,this.payment.sessionId,{env:i,extra:{buttonOptions:e,paymentSheet:a,buttonStyles:n},merchantId:hn(r)}),u=Kn(s);this.frame=Ve(s,{opacity:"0"}),Yt.add(t,this.frame),Yt.style(this.frame,{position:"absolute",top:"0",right:"0",bottom:"0",left:"0",border:"0",display:"block",width:"100%",height:"100%","pointer-events":"none","z-index":0}),this.connect(u)}catch(t){$("sdk-payment-method mount",t)}},n.unmount=function(){this.frame&&(Yt.remove(this.frame),this.frame=void 0),this.frameListener&&(this.frameListener.destroy(),this.frameListener=void 0),this.frameEmitter&&(this.frameEmitter.destroy(),this.frameEmitter=void 0),this.unsubscribePayment()},n.show=function(){this.frame&&Yt.animate(this.frame,{property:"opacity",from:"0",to:"1"})},n.connect=function(t){var e,n,o,r=this,i=new lt({targetUrl:t});this.frameListener=new jt(i),this.frameListener.on(this.onMessage);var a=null===(e=this.frame)||void 0===e?void 0:e.contentWindow;this.on(rr.Ready,(function(){var t,e,n;if(a!==(null===(t=r.frame)||void 0===t?void 0:t.contentWindow))if(J("SDK: Button remounted. Need to reconnect",{buttonType:r.buttonOptions.type}),a=null!==(e=null===(n=r.frame)||void 0===n?void 0:n.contentWindow)&&void 0!==e?e:null)try{r.frameEmitter=new Ut(i,a)}catch(t){$("SDK: Button Message Connection Emitter failed on remount",t)}else J("SDK: Button remount. No content window")})),this.frameEmitter=new Ut(i,null!==(n=null===(o=this.frame)||void 0===o?void 0:o.contentWindow)&&void 0!==n?n:void 0)},n.subscribePayment=function(){this.payment.on(So.PaymentUpdate,this.onPaymentUpdate),this.payment.on(So.PaymentProcess,this.onPaymentProcess),this.payment.on(So.PaymentLock,this.onPaymentLock),this.payment.on(So.PaymentUnlock,this.onPaymentUnlock),this.payment.on(So.PaymentError,this.onPaymentError),this.payment.on(So.PaymentExtra,this.onPaymentExtraChange)},n.unsubscribePayment=function(){this.payment.off(So.PaymentUpdate,this.onPaymentUpdate),this.payment.off(So.PaymentProcess,this.onPaymentProcess),this.payment.off(So.PaymentLock,this.onPaymentLock),this.payment.off(So.PaymentUnlock,this.onPaymentUnlock),this.payment.off(So.PaymentError,this.onPaymentError),this.payment.off(So.PaymentExtra,this.onPaymentExtraChange)},e}(Zt),Lr=nr(Ee,{lowerCase:!0}),Dr=nr(Be,{lowerCase:!0}),jr={type:$t.Pay,theme:Gt.Black,width:Jt.Auto},Fr={disableStickyButton:!1,type:"button"},Nr=function(t){function e(e,n,o){var r;void 0===o&&(o={}),(r=t.call(this)||this).hasShadowRoot=!1,r.payment=void 0,r.parent=void 0,r.options=void 0,r.oldStyleElement=void 0,r.styleElement=void 0,r.buttonElement=void 0,r.backdropElement=void 0,r.paymentMethod=void 0,r.renderWatcherUnsubscribe=er(),r.resizeObserverUnsubscribe=er(),r.locked=!1,r.settings=void 0,r.onClick=function(t){r.locked||(jo.sdk.buttonClick(r.payment.signalData),r.emit(Qt.Click,t))},r.onSdkPaymentMethodReady=function(t){Ke.set("hasNewPRA",t.hasNewPRA),r.showPaymentMethod(),bo.of(r).mark(Jn.PersonalButtonMounted)},r.onSdkPaymentMethodFailure=function(){r.unmountPaymentMethod()},r.onPaymentLock=function(){r.locked=!0},r.onPaymentUnlock=function(){r.locked=!1};try{var i=n.sheet;r.payment=n,r.settings=function(t,e){var n=Object.assign({},e,t);return"boolean"!=typeof n.disableStickyButton&&void 0!==n.disableStickyButton&&(n.disableStickyButton=e.disableStickyButton,G('SDK: Invalid "disableStickyButton" option',{disableStickyButton:n.disableStickyButton}),console.warn('The "disableStickyButton" option should be boolean.')),n.type=ae(n,"type",["button","submit","reset"],e.type,!1),n}(o,Fr),r.options=se(e,jr),i&&kn(i)&&(r.settings.disableStickyButton=!0)}catch(t){throw Z("SDK: Error create button",t),t}return r}N(e,t),e.create=function(t,n,o){return new e(t,n,o)};var n=e.prototype;return n.destroy=function(){t.prototype.destroy.call(this),this.unmount()},n.mount=function(t){var e=this;if(t){bo.of(this).mark(Jn.SimpleButtonMountingStarted),bo.ofSession(this.payment.sessionId).mark(Jn.FirstViewMountingStarted),this.parent&&this.unmount();var n=function(n){try{e.parent=t,e.hasShadowRoot=void 0!==window.ShadowRoot&&t instanceof ShadowRoot,e.mountStyles(),e.mountButton(n),bo.of(e).mark(Jn.SimpleButtonMounted),bo.of(e).mark(Jn.PersonalButtonMountingStarted),e.mountPaymentMethod(),e.registerStickyButton(),e.renderWatcherUnsubscribe=Cr(e.buttonElement,(function(){jo.sdk.buttonRender(e.payment.signalData)}))}catch(t){$("SDK: Button mount",t)}};Sn(this.payment.sheet)?n(!0):n()}else G("SDK: Falsy parent on button mount",{fn:"Button.mount",message:"parent: "+t})},n.unmount=function(){this.parent=void 0,this.renderWatcherUnsubscribe(),this.unmountButton(),this.unmountStyles(),this.unmountPaymentMethod(),this.unregisterStickyButton()},n.setBackdrop=function(t){if(this.buttonElement&&this.backdropElement)this.backdropElement.style.height=t;else{var e=document.createElement("div");Yt.style(e,function(t){return{position:"relative",background:"transparent",overflow:"hidden",cursor:"pointer",width:"100%",height:t,flex:"0 0 "+t}}(t),!0),Yt.on(e,"click",this.onClick),e.setAttribute("class",Dr()),this.parent?Yt.add(this.parent,e,this.buttonElement):$("SDK: Backdrop has no parent element"),this.backdropElement=e}},n.registerStickyButton=function(){if(this.buttonElement){var t=this.payment,e=t.env,n=t.sessionId,o=t.sheet,r=this.options,i=r.type,a=r.theme,s=r.width;if(o&&!this.settings.disableStickyButton){var u={env:e,sessionId:n,merchant:_n(o),buttonOptions:{type:i,theme:a,width:s},paymentMethodOptions:An(o),paymentType:o.type,orderTotal:{amount:yn(o),currency:o.currencyCode}};(un(o)||dn(o))&&o.availablePaymentMethods&&(u.availablePaymentMethods=o.availablePaymentMethods),Rr.registerWebButton(this.buttonElement,u)}}else G("SDK: Skip sticky button register")},n.unregisterStickyButton=function(){!this.settings.disableStickyButton&&this.buttonElement&&Rr.unregisterWebButton(this.buttonElement)},n.mountButton=function(t){var e=this.options,n=e.type,o=e.theme,r=e.width,i=o===Gt.Black?"dark":"light",a=Lr({type:n,theme:o,width:r,"theme-type":i}),s=document.createElement("button"),u=void 0!==this.payment.sheet.language?this.payment.sheet.language:"ru";Yt.style(s,kr(this.options,u,0,t),!0),s.setAttribute("id",qn("yandexpay-button")),s.setAttribute("type",this.settings.type),s.setAttribute("aria-label","Yandex Pay"),s.setAttribute("class",a),this.settings.disableStickyButton||!Rr.isApiAvailable||Rr.hasStickyButton||Yt.hide(s,!0),this.parent?Yt.add(this.parent,s):Z("SDK: Cannot mount button: has no parent element"),Yt.on(s,"click",this.onClick),or(s),this.resizeObserverUnsubscribe=function(t){if(window.ResizeObserver){var e=sr()(40,wr),n=new ResizeObserver((function(t){return t.forEach(e)}));return n.observe(t,{box:"border-box"}),function(){return n.disconnect()}}return er()}(s),this.buttonElement=s},n.unmountButton=function(){this.buttonElement&&Yt.off(this.buttonElement,"click",this.onClick),this.backdropElement&&Yt.off(this.backdropElement,"click",this.onClick),this.buttonElement&&Yt.remove(this.buttonElement),this.resizeObserverUnsubscribe()},n.mountStyles=function(){var t,n,o,r,i=document.createElement("style");i.setAttribute("type","text/css"),i.textContent=(t={assetsUrl:fe,baseClass:Ee},n=this.payment.sheet.language,o=t.assetsUrl,r=t.baseClass,void 0===n&&(n="ru"),yr("\n  ."+r+" {\n    position: relative;\n    display: inline-block;\n    box-sizing: border-box;\n    height: 54px;\n    min-width: 282px;\n    min-height: 40px;\n    padding: 14px 36px;\n    overflow: hidden;\n    background-origin: content-box;\n    background-position: center center;\n    background-repeat: no-repeat;\n    background-size: contain;\n    border-width: 1px;\n    border-style: solid;\n    border-color: transparent;\n    border-radius: 8px;\n    user-select: none;\n    cursor: pointer;\n    transition: opacity 150ms linear, filter 150ms linear, background-color 150ms linear;\n\n    transform: translate3d(0, 0, 0);\n  }\n\n  ."+r+":focus {\n    outline: none;\n    border-color: transparent;\n    box-shadow: 0 0 0 3px rgb(255 56 21 / 50%);\n  }\n\n  ."+r+"_theme_white,\n  ."+r+"_theme_white-outlined {\n    background-color: #ffffff;\n  }\n\n  ."+r+"_theme_white-outlined {\n    border-color: #000000;\n  }\n\n  ."+r+"_theme-type_light:hover,\n  ."+r+"_theme-type_light:active {\n    filter: brightness(0.95);\n  }\n\n  ."+r+"_theme_black {\n    background-color: #000000;\n  }\n\n  ."+r+"_theme-type_dark:hover,\n  ."+r+"_theme-type_dark:active {\n    opacity: 0.8;\n  }\n\n  ."+r+"_theme-type_light {\n    background-image: url('"+o+("ru"===n?cr:ur)+"');\n  }\n\n  ."+r+"_theme-type_dark {\n    background-image: url('"+o+("ru"===n?lr:dr)+"');\n  }\n\n  ."+r+" iframe,\n  ."+r+"::before {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    border: 0;\n  }\n\n  ."+r+" iframe {\n    position: 'absolute';\n    top: '0';\n    right: '0';\n    bottom: '0';\n    left: '0';\n    border: '0';\n    display: 'block';\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n    z-index: 0;\n  }\n\n  ."+r+"_width_max {\n    width: 100%;\n    min-width: 100px;\n  }\n\n  ."+r+"::before {\n    content: '';\n    z-index: 1;\n  }\n"));var a=document.createElement("style");a.setAttribute("type","text/css"),a.textContent=function(t){var e=t.baseClass,n=t.backdropClass;return yr("\n  ."+e+" {\n    display: 'inline-block';\n    position: 'relative';\n    height: 54px;\n    min-width: 282px;\n    min-height: 40px;\n    padding: 0;\n    border-radius: 8px;\n  }\n\n  ."+e+":focus {\n    outline: none;\n    border-color: transparent;\n    box-shadow: 0 0 0 3px rgb(255 56 21 / 50%);\n  }\n\n  ."+n+":hover+."+e+"_theme-type_light,\n  ."+e+"_theme-type_light:hover,\n  ."+e+"_theme-type_light:active {\n    filter: brightness(0.95);\n  }\n\n  ."+n+":hover+."+e+"_theme-type_dark,\n  ."+e+"_theme-type_dark:hover,\n  ."+e+"_theme-type_dark:active {\n    filter: brightness(0.8);\n    opacity: 1;\n  }\n\n  ."+e+" iframe,\n  ."+e+"::before {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    border: 0;\n  }\n\n  ."+e+"_width_max {\n    width: 100%;\n    min-width: 100px;\n  }\n\n  ."+e+"::before {\n    content: '';\n    z-index: 1;\n  }\n")}({baseClass:Ee,backdropClass:Be}),this.hasShadowRoot?(this.oldStyleElement=i,this.styleElement=a,this.parent?(Yt.add(this.parent,i),Yt.add(this.parent,a)):G("SDK: Button cannot mount styles: has no parent element")):e.isMainStylesMounted||(document.head.appendChild(i),document.head.appendChild(a),e.isMainStylesMounted=!0)},n.unmountStyles=function(){this.oldStyleElement&&Yt.remove(this.oldStyleElement),this.styleElement&&Yt.remove(this.styleElement)},n.mountPaymentMethod=function(){if(this.buttonElement&&this.buttonElement.isConnected){var t,e,n=(t=this.buttonElement,e=getComputedStyle(t),{border:parseInt(e.borderRadius||e.borderTopRightRadius,10),height:parseInt(e.height,10)});this.paymentMethod=Ur.create(this.payment,this.options,n),this.paymentMethod.mount(this.buttonElement),this.paymentMethod.on(rr.Ready,this.onSdkPaymentMethodReady),this.paymentMethod.on(rr.Failure,this.onSdkPaymentMethodFailure),this.paymentMethod.on(So.PaymentLock,this.onPaymentLock),this.paymentMethod.on(So.PaymentUnlock,this.onPaymentUnlock)}else G("SDK: Skip payment-method mount on unconnected button")},n.unmountPaymentMethod=function(){this.paymentMethod&&this.paymentMethod.destroy()},n.showPaymentMethod=function(){this.paymentMethod&&this.paymentMethod.show()},e}(Zt);function Kr(t){try{if(Pt&&Ct&&!Mo()){var e=(o="qr_redirect",r=[],O(R,o,r)).includes(hn(t)),n=W("qr_am_auth");return{redirect:e,auth:e&&n}}}catch(t){}var o,r;return{redirect:!1,auth:!1}}Nr.isMainStylesMounted=!1;var zr={},Vr=function(t){return zr[t.sessionId]},qr=!1,Hr="__YPMSG__",Yr=3e4,Zr=new Zt;function $r(t){var e="string"==typeof t.data?b(t.data,{}):t.data;if(e&&e.source===Hr)return e}function Gr(t){if(!t||"function"!=typeof t.postMessage)throw new Error("RPC-Bell: Invalid target object")}function Jr(t){qr||(qr=!0,window.addEventListener("message",(function(t){var e=$r(t);e&&Zr.emit(e.route,{message:e,ports:t.ports})})));var e=t.target,n=t.origin,o=void 0===n?"*":n,r=t.scope,i=void 0===r?"*":r,a=t.reqTimeout,s=void 0===a?Yr:a;Gr(e);var u=[],c=function(t,e){return e+":"+t+":"+i},d=function(t){return"res:"+t+":"+i};function l(t,e,n){return{source:Hr,route:t,id:e,payload:n}}function h(t,n){Gr(e),e.postMessage(t,o,n)}function f(t,e,n){var o,r,i=c(t,n?"req":"event"),a=d(t),f=C(8),m=l(i,f,e);if(n){var p=new MessageChannel;r=[p.port2];var y=function(){p.port1.onmessage=null,p.port1.close(),clearTimeout(o),u=u.filter((function(t){return t!==y}))};s>0&&(o=setTimeout((function(){y(),n.error(new Error("PmRequestTimeout"))}),s)),p.port1.onmessage=function(t){var e=$r(t);e&&function(t){var e=t.message;e.route===a&&e.id===f&&(y(),n.success(e.payload))}({message:e})},u.push(y)}h(m,r)}return{emit:function(t,e){f(t,e)},listen:function(t,e){var n=c(t,"event"),o=Zr.on(n,(function(t){var n=t.message;e(n.payload)}));u.push(o)},request:function(t,e){return new Promise((function(n,o){try{f(t,e,{success:n,error:o})}catch(t){o(t)}}))},handle:function(t,e){var n=c(t,"req"),o=d(t),r=Zr.on(n,(function(t){var n=t.message,r=(t.ports||[])[0],i=!1,a=function(t){if(!i){i=!0;var e=l(o,n.id,t);r?(Gr(r),r.postMessage(e)):h(e)}},s=function(){return a()},u=e(n.payload,(function(t){return a(t)}));u&&"function"==typeof u.then?u.then(s,s):s()}));u.push(r)},destroy:function(){u.forEach((function(t){return t()})),u=[]}}}var Qr=function(t,e){return e===ee.None?"0px":Number.isFinite(t)?t+"px":"8px"},Xr=function(t){var e=t.borderRadius,n=t.padding;return{width:"100%",height:"0",position:"relative",display:"inline-block","box-sizing":"border-box",overflow:"hidden","border-radius":Qr(e,n),transform:"translate3d(0, 0, 0)"}},ti=function(t,e,n){var o=t.widgetTheme===ie.Dark?"#ffffff14":"#00000014",r={height:e+"px","min-width":"180px","border-color":"transparent","border-width":"0 1px"};return e>0&&(r.border="1px solid "+o),n&&(r["margin-top"]=n+"px",r["margin-bottom"]=n+"px"),r},ei=function(t,e,n){var o={height:e+"px","min-width":"300px",border:"none"};return n&&(o["margin-top"]=n+"px",o["margin-bottom"]=n+"px"),o},ni=function(t,e,n){var o={height:e+"px","min-width":"311px",border:"none"};return n&&(o["margin-top"]=n+"px",o["margin-bottom"]=n+"px"),o},oi=function(){return{position:"absolute",top:"0",right:"0",bottom:"0",left:"0",border:"0",width:"100%",height:"100%","z-index":"1"}},ri=function(t){return t.Ready="ready",t.Resize="resize",t.Close="close",t.PaymentUpdate="payment-update",t.ReadyToShowInfo="ready-to-show-info",t.MountingStart="mounting-start",t.ShowSplitInfo="show-split-info",t.ShowCashbackInfo="show-cashback-info",t.RenderSplitTooltip="render-split-tooltip",t.RenderCashbackTooltip="render-cashback-tooltip",t.RenderSplitModal="render-split-modal",t.RenderCashbackModal="render-cashback-modal",t.CheckoutButtonClick="checkout-button-click",t}({}),ii=nr(Ie,{lowerCase:!0}),ai={widgetType:te.Info,borderRadius:16,widgetTheme:ie.Light};function si(t,e,n){if(t)return function(t,e,n){var o={},r=C(8),i={sessionId:n.sessionId,merchantId:hn(n.sheet),amount:yn(n.sheet),currencyCode:vn(n.sheet),theme:e.widgetTheme,borderRadius:e.borderRadius,paymentMethods:wn(n.sheet),isPrepayment:e.isPrepayment},a=function(){};try{bo.of(o).mark(Jn.InfoWidget_MountingStarted),bo.ofSession(n.sessionId).mark(Jn.FirstViewMountingStarted);var s=function(){var t=document.createElement("div"),n=Xr(Object.assign({},e));return Yt.attrs(t,{class:ii()}),Yt.style(t,Object.assign({},n,{transition:"height 150ms ease-in-out, margin 150ms ease-in-out"})),t}(),u=function(){var t=n.sessionId,e=n.env,o=document.createElement("iframe"),a="ya-frame-"+C(8);return Yt.style(o,oi()),Yt.attrs(o,{class:ii("frame"),src:Nn(we,t,{env:e,rpcs:r,extra:i,merchantId:hn(n.sheet)}),name:a}),o}();Yt.add(t,s),Yt.add(s,u);var c=function(t,a){if(!a.contentWindow)throw new Error("Unable to get frame.contentWindow");var s=Jr({target:a.contentWindow,scope:r});return s.listen(ri.Ready,(function(){bo.of(o).mark(Jn.InfoWidget_Mounted)})),s.listen(ri.Resize,(function(n){Yt.style(t,ei(e,n.height,n.offsetY))})),n.on(So.PaymentUpdate,(function(){i.amount=yn(n.sheet),i.currencyCode=vn(n.sheet),s.emit(ri.PaymentUpdate,Object.assign({},i))})),function(){return s.destroy()}}(s,u);a=function(){c(),Yt.remove(s)}}catch(t){$("SDK: InfoWidget mount",t)}return{destroy:a}}(t,ue(e,ai),n);G("SDK: Falsy parent on widget-info mount",{fn:"InfoWidget.mount",message:"parent: "+t})}var ui,ci,di,li,hi=(ui=window,void 0===ci&&(ci=5),void 0===di&&(di=250),li=new Promise((function(t){var e=setInterval((function(){try{var n,o,r,i,a,s=(null===(n=ui.Ya)||void 0===n?void 0:n.Metrika)||(null===(o=ui.Ya)||void 0===o?void 0:o.Metrika2),u=null==s||null===(r=s.counters)||void 0===r||null===(i=r.call(s))||void 0===i||null===(a=i[0])||void 0===a?void 0:a.id;if(ci-=1,void 0!==u)return clearInterval(e),t(u);if(ci<=0)return clearInterval(e),t(null)}catch(t){Q("merchantMetrika error",t)}}),di)})),{reachGoal:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];li.then((function(t){var n,o;null!==t&&(null===(n=(o=window).ym)||void 0===n||n.call.apply(n,[o,t,"reachGoal"].concat(e)))}))}}),fi=function(t){return t.Click="click",t}(fi||{}),mi=function(t){function e(){var e;return(e=t.call(this)||this).element=void 0,e.onClick=function(){e.emit(fi.Click,void 0)},e.element=document.createElement("div"),e.mount(),e}N(e,t),e.getInstance=function(){return this.instance?this.instance:new e};var n=e.prototype;return n.mount=function(){Yt.style(this.element,{"z-index":2147483647,display:"none",position:"fixed",top:0,right:0,bottom:0,left:0,"background-color":"rgba(32, 33, 36, .6)"},!0),Yt.add(document.body,this.element),Yt.on(this.element,"click",this.onClick)},n.show=function(){Yt.style(this.element,{display:"block"})},n.hide=function(){Yt.style(this.element,{display:"none"})},n.destroy=function(){t.prototype.destroy.call(this),Yt.off(this.element,"click",this.onClick),Yt.remove(this.element)},e}(Zt);mi.Events=fi,mi.instance=void 0;var pi,yi,vi,gi,bi,wi,ki,Si,Ci,xi,Pi,Mi,Ei,Ii,Bi=function(t){return t[t.hidden=0]="hidden",t[t.tooltip=1]="tooltip",t[t.drawer=2]="drawer",t[t.modal=3]="modal",t}({}),Oi=function(t){return t[t.block=0]="block",t[t.frame=1]="frame",t[t.line=2]="line",t[t.arrow=3]="arrow",t}({}),Ti=function(t){return t[t.light=100]="light",t[t.dark=101]="dark",t}({}),Ri=(pi=null,yi=Bi.hidden,{show:function(t,e){pi=e,yi=t},hide:function(){pi=null,yi=Bi.hidden},get active(){return pi},get mode(){return yi}}),Ai=null,_i=function(){return Ai||(Ai={x:0,y:0,w:window.innerWidth,h:window.innerHeight,sx:window.scrollX,sy:window.scrollY}),Ai},Wi=function(){Ai=null},Ui=function(t){var e,n,o=t.getBoundingClientRect(),r=_i();return{x:o.x+(null!==(e=r.sx)&&void 0!==e?e:0),y:o.y+(null!==(n=r.sy)&&void 0!==n?n:0),w:o.width,h:o.height}},Li=function(t,e){var n=Object.assign({},t);for(var o in e)if(void 0!==n[o])for(var r in n[o]=Object.assign({},n[o]),e[o])n[o][r]=e[o][r];return n},Di=function(t,e){var n,o,r=_i(),i={x:t.x+t.w/2-e.w/2,y:t.y+t.h};return i.r=i.y+e.h>r.h+(null!==(n=r.sy)&&void 0!==n?n:0),i.x=Math.max(i.x,null!==(o=r.sx)&&void 0!==o?o:0),i.sy=i.r?t.h:0,i},ji="2147483647",Fi=((bi={})[Oi.block]={position:"fixed",top:"0px",left:"0px",bottom:"0px","z-index":ji,display:"flex","flex-direction":"column",width:"100%","justify-content":"flex-end",background:"#00000000",cursor:"pointer"},bi[Oi.frame]={"border-radius":"24px 24px 0 0",width:"100%",transform:"translateY(100%)"},bi[Oi.line]={position:"relative","z-index":"1",display:"flex",width:"100%",height:"12px","justify-content":"center","align-items":"center",transform:"translateY(100%)",opacity:"0"},bi[Ti.light]=((vi={})[Oi.frame]={background:"#fff"},vi[Oi.line]={color:"#000"},vi),bi[Ti.dark]=((gi={})[Oi.frame]={background:"#000"},gi[Oi.line]={color:"#fff"},gi),bi),Ni=((wi={})[Oi.block]={background:"#00000080",transition:"background 150ms"},wi[Oi.frame]={transform:"translateY(0%)",transition:"transform 150ms, height 150ms"},wi[Oi.line]={opacity:"1",transition:"opacity 150ms cubic-bezier(0.9, 0.03, 0.7, 0.2)"},wi),Ki=((ki={})[Oi.block]={background:"#00000000",transition:"background 150ms"},ki[Oi.frame]={transform:"translateY(100%)",transition:"transform 150ms"},ki[Oi.line]={opacity:"0",transition:""},ki),zi=(Si=null,Ci=!1,{show:function(t){Wi(),t.clear(),t.setOverflow(),t.draw(Fi),t.nextTick((function(){t.draw(Ni)})),Ci=!0,t.afterAnimation((function(){return Ci=!1}))},hide:function(t,e){t.nextTick((function(){t.draw(Ki),t.afterAnimation((function(){t.resetOverflow(),e()}))}))},enable:function(t,e){var n,o=t.$(Oi.block),r=t.$(Oi.frame);null===(n=Si)||void 0===n||n();var i=function(t){t.preventDefault(),t.stopPropagation()};return Si=function(t){t&&i(t),Ci?Ci=!1:(Yt.off(r,"touchend",i,{capture:!0}),Yt.off(r,"mouseup",i,{capture:!0}),Si&&(Yt.off(o,"touchend",Si),Yt.off(o,"mouseup",Si)),e(),Si=null)},Yt.on(r,"touchend",i,{capture:!0}),Yt.on(o,"touchend",Si),Yt.on(r,"mouseup",i,{capture:!0}),Yt.on(o,"mouseup",Si),Si}}),Vi=((Mi={})[Oi.block]={position:"fixed",top:"0px",left:"0px","z-index":ji,display:"flex","align-items":"center","justify-content":"center",width:"100%",height:"100%",opacity:"0",background:"#00000080"},Mi[Oi.frame]={border:"0px solid transparent","border-radius":"24px",transform:"translateY(-5%)"},Mi[Oi.line]={display:"none"},Mi[Oi.arrow]={display:"none"},Mi[Ti.light]=((xi={})[Oi.frame]={background:"#fff"},xi),Mi[Ti.dark]=((Pi={})[Oi.frame]={background:"#000"},Pi),Mi),qi=((Ei={})[Oi.block]={opacity:"1",transition:"opacity 150ms"},Ei[Oi.frame]={transform:"translateY(0%)",transition:"transform 150ms"},Ei),Hi=((Ii={})[Oi.block]={opacity:"0",transition:"opacity 150ms"},Ii[Oi.frame]={transform:"translateY(-5%)",transition:"transform 150ms"},Ii),Yi=function(){var t=null,e=!1;return{show:function(t){Wi(),t.clear(),t.setOverflow(),t.draw(Vi),t.nextTick((function(){t.draw(qi)})),e=!0,t.afterAnimation((function(){return e=!1}))},hide:function(t,e){t.nextTick((function(){t.draw(Hi),t.afterAnimation((function(){t.resetOverflow(),e()}))}))},enable:function(n,o){var r,i=n.$(Oi.block),a=n.$(Oi.frame);null===(r=t)||void 0===r||r();var s=function(t){t.stopPropagation()};return t=function(){e?e=!1:(Yt.off(a,"touchend",s,{capture:!0}),Yt.off(a,"mouseup",s,{capture:!0}),t&&(Yt.off(i,"touchend",t),Yt.off(i,"mouseup",t)),t=null,o())},Yt.on(a,"touchend",s,{capture:!0}),Yt.on(i,"touchend",t),Yt.on(a,"mouseup",s,{capture:!0}),Yt.on(i,"mouseup",t),t}}}(),Zi=n(477),$i=n.n(Zi);function Gi(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Ji(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ji(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ji(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var Qi,Xi,ta,ea,na,oa=function(){var t,e,n,o,r,i=Ti.light,a={w:0,h:0},s=((t={})[Oi.frame]=c("iframe"),t[Oi.block]=c("div"),t[Oi.line]=c("div",'<svg xmlns="http://www.w3.org/2000/svg" fill="none" width="35" height="4"><rect fill="currentColor" fill-opacity="0.2" width="34" height="4" rx="2" /></svg>'),t[Oi.arrow]=c("div",'<svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="8"><path fill="currentColor" d="m12 0-.4.8-.5 1A12 12 0 0 1 1 8H0h24-1.1A12 12 0 0 1 12.4.8L12 0Z" /></svg>'),t),u=((e={})[Oi.block]={position:"absolute",top:"-9999px",left:"-9999px","-webkit-tap-highlight-color":"transparent"},e[Oi.frame]={border:"none"},e[Oi.arrow]={display:"none"},e[Oi.line]={display:"none"},e);function c(t,e){var n=document.createElement(t);return Yt.attrs(n,{id:"yndx-"+C(5)}),e&&(n.innerHTML=e),n}function d(t){return s[t]}function l(){clearTimeout(o),cancelAnimationFrame(n);for(var t=0,e=Object.entries(s);t<e.length;t++){var r=e[t][1];r.removeAttribute("style"),r.removeAttribute("class")}f(u),h(a),m()}function h(t){a=t,Yt.style(d(Oi.frame),{width:void 0!==t.w?t.w+"px":"auto",height:void 0!==t.h?t.h+"px":"auto"})}function f(t){void 0===t&&(t={});for(var e,n=Gi(Object.values(Oi).filter((function(t){return"number"==typeof t})));!(e=n()).done;){var o=e.value;Yt.style(d(o),Object.assign({},$i()(o,{},t),B()([i,o],{},t)))}}function m(){r&&(Yt.style(document.body,r),r=null)}return{$:d,mount:function(t,e){var n=d(Oi.block),o=d(Oi.frame);return Yt.attrs(o,Object.assign({src:t},e?{name:e}:{})),n.className="",Yt.add(n,d(Oi.arrow)),Yt.add(n,d(Oi.line)),Yt.add(n,o),Yt.add(document.body,n),l(),o},clear:l,theme:function(t){void 0===t&&(t="");var e=t.toLowerCase();"light"===e&&(i=Ti.light),"dark"===e&&(i=Ti.dark)},resize:h,draw:f,hide:function(){var t;f(((t={})[Oi.block]=u[Oi.block],t))},nextTick:function(t){n=requestAnimationFrame(t)},afterAnimation:function(t){o=setTimeout(t,250)},setOverflow:function(){if(!r){var t=function(){var t=getComputedStyle(document.body),e=t.overflow,n=t.paddingRight,o={original:{overflow:"visible"===e?"":e,"padding-right":""},hidden:{overflow:"hidden","padding-right":""}},r=window.innerWidth-document.documentElement.clientWidth;if(r>0){var i=Number(n)||0;o.original["padding-right"]=0===i?"":i+"px",o.hidden["padding-right"]=i+r+"px"}return o}(),e=t.hidden,n=t.original;r=n,Yt.style(document.body,e)}},resetOverflow:m}},ra=((ta={})[Oi.block]={position:"absolute","z-index":ji,display:"flex","flex-direction":"column",opacity:"0",transform:""},ta[Oi.frame]={display:"block","box-sizing":"content-box","border-radius":"24px","box-shadow":"0px 6px 58px 0px rgba(33, 34, 36, 0.17)",overflow:"hidden"},ta[Oi.arrow]={position:"relative","z-index":"1",display:"flex","justify-content":"center","align-items":"center",height:"8px",width:"100%",order:"-1",transform:""},ta[Oi.line]={display:"none"},ta[Ti.light]=((Qi={})[Oi.frame]={background:"#fff"},Qi[Oi.arrow]={color:"#fff"},Qi),ta[Ti.dark]=((Xi={})[Oi.frame]={background:"#000"},Xi[Oi.arrow]={color:"#000"},Xi),ta),ia=((ea={})[Oi.block]={opacity:"1",transition:"opacity 150ms"},ea),aa=((na={})[Oi.block]={opacity:"0",transition:"opacity 150ms"},na);function sa(t){var e,n,o,r;return{position:((e={})[Oi.block]={top:t.y+"px",left:t.x+"px"},e),show:t.r?Li(ra,(o=null!==(n=t.sy)&&void 0!==n?n:0,(r={})[Oi.block]={transform:"translateY(calc(-100% - "+o+"px))"},r[Oi.arrow]={transform:"rotate(180deg)",order:"100"},r)):ra,showAnimation:ia,hideAnimation:aa}}var ua,ca,da,la,ha,fa,ma,pa,ya,va,ga=(ua=null,ca=new WeakMap,da=null,{show:function(t,e){da=t,Wi(),e.clear();var n=e.$(Oi.block),o=sa(Di(Ui(t),Ui(n)));ca.set(t,o.hideAnimation),e.draw(o.show),e.draw(o.position),e.nextTick((function(){e.draw(o.showAnimation)}))},move:function(t,e){if(t===da){Wi();var n=e.$(Oi.block),o=sa(Di(Ui(t),Ui(n)));e.draw(o.position)}},hide:function(t,e,n){t===da&&e.nextTick((function(){e.draw(ca.get(t)||aa),e.afterAnimation((function(){return n()})),ca.delete(t)}))},enable:function(t,e,n){var o,r=e.$(Oi.block);null===(o=ua)||void 0===o||o();var i=t,a=t,s=!1,u=function(t){var e=t.target,n=t.type;a=e,"touchend"===n&&(s=!0)},c=function(t){var e=t.target,n=t.type;setTimeout((function(){var t;("touchend"===n&&!s||"mouseout"===n&&a===e)&&(null===(t=ua)||void 0===t||t())}),50)};return ua=function(){n(),i&&Yt.off(i,"mouseout",c),Yt.off(r,"mouseout",c),Yt.off(r,"mouseover",u),Yt.off(r,"touchend",u),Yt.off(t,"mouseover",u),Yt.off(t,"touchend",u),Yt.off(document.body,"touchend",c),i=null,a=null,ua=null},Yt.on(document.body,"touchend",c),Yt.on(t,"mouseout",c),Yt.on(r,"mouseout",c),Yt.on(r,"mouseover",u),Yt.on(r,"touchend",u),Yt.on(t,"mouseover",u),Yt.on(t,"touchend",u),ua}}),ba=function(){var t=oa(),e=function(){var t=new WeakMap;function e(e){var n=t.get(e);n&&(n(),t.delete(e))}return{connect:function(n,o){e(n);var r=!0,i=function(){r=!0},a=function(){r=!1},s=function(t){t.preventDefault(),Ri.active!==n&&r&&o()};Yt.on(n,"mouseover",s),Yt.on(n,"click",s),Yt.on(n,"touchend",s),Yt.on(n,"touchstart",i),Yt.on(n,"touchmove",a),Yt.on(n,"touchcancel",a),t.set(n,(function(){Yt.off(n,"mouseover",s),Yt.off(n,"click",s),Yt.off(n,"touchend",s),Yt.off(n,"touchstart",i),Yt.off(n,"touchcancel",a),Yt.off(n,"touchmove",a)}))},disconnect:e}}();return{mount:t.mount,theme:t.theme,connect:e.connect,disconnect:e.disconnect,resize:function(e){t.resize(Ri.mode===Bi.drawer?{h:e.h}:e),Ri.mode===Bi.tooltip&&Ri.active&&ga.move(Ri.active,t)},showTooltip:function(e,n){return Ri.show(Bi.tooltip,e),ga.show(e,t),ga.enable(e,t,(function(){Ri.hide(),ga.hide(e,t,t.hide),null==n||n()}))},showDrawer:function(e,n){return Ri.show(Bi.drawer,null),zi.show(t),zi.enable(t,(function(){Ri.hide(),zi.hide(t,t.hide),null==n||n()}))},showModal:function(e){return Ri.show(Bi.modal,null),Yi.show(t),Yi.enable(t,(function(){Ri.hide(),Yi.hide(t,t.hide),null==e||e()}))}}},wa=function(){return pt()&&window.innerWidth<=500},ka=function(t,e){return t?{h:window.innerHeight-50}:{w:Math.min(520,window.innerWidth-50),h:Math.min(730,window.innerHeight-50,(null==e?void 0:e.height)||1/0)}},Sa=(la=ba(),ha=function(t){return t()},fa=!1,ma=null,pa=wa(),ya=function(){},va=function(){var t=function(){return ya=function(){}};pa=wa(),ya=pa?la.showDrawer(document.body,t):la.showModal(t)},{mount:function(t){if(!ma&&!fa){bo.of(Sa).mark(Jn.SimpleWidgetModal_MountingStarted);var e=C(8),n=Nn(Ce,null,{rpcs:e,env:t}),o=la.mount(n,"ya-modal-"+C(8));if(!o.contentWindow)return void(fa=!0);(ma=Jr({target:o.contentWindow,scope:e})).listen(ri.Close,(function(){return ya()})),ma.listen(ri.Resize,(function(t){la.resize(ka(pa,t))})),ma.listen(ri.Ready,(function(){bo.of(Sa).mark(Jn.SimpleWidgetModal_Mounted),la.resize(ka(pa)),Sa.onReady=ha}))}},showCashbackModal:function(t){ma&&(la.theme(t.theme),ma.request(ri.RenderCashbackModal,t).then(va))},showSplitModal:function(t){ma&&(la.theme(t.theme),ma.request(ri.RenderSplitModal,t).then(va))},onReady:function(t){ma&&ma.listen(ri.Ready,(function(){return t()}))},onCheckout:function(t){ma&&ma.listen(ri.CheckoutButtonClick,(function(){return t()}))}}),Ca=nr(Ie,{lowerCase:!0}),xa={widgetType:te.Simple,borderRadius:16,widgetTheme:ie.Light};function Pa(t,e,n,o){var r={},i=C(8),a={sessionId:n.sessionId,merchantId:hn(n.sheet),amount:yn(n.sheet),currencyCode:vn(n.sheet),theme:e.widgetTheme,showCheckout:Boolean(o)};var s=function(){};try{bo.of(r).mark(Jn.SimpleWidget_MountingStarted),bo.ofSession(n.sessionId).mark(Jn.FirstViewMountingStarted);var u=function(){var t=document.createElement("div"),n=Xr(Object.assign({},e,{borderWidth:"1px"}));return Yt.attrs(t,{class:Ca()}),Yt.style(t,Object.assign({},n,{"border-color":"transparent","border-width":"0 1px",transition:"height 150ms ease-in-out, margin 150ms ease-in-out"})),t}(),c=function(){var t=n.sessionId,e=n.env,o=document.createElement("iframe"),r="ya-frame-"+C(8);return Yt.style(o,oi()),Yt.attrs(o,{class:Ca("frame"),src:Nn(Se,t,{env:e,rpcs:i,extra:a,merchantId:hn(n.sheet)}),name:r}),o}();Yt.add(t,u),Yt.add(u,c);var d=function t(s,u){if(!u.contentWindow)throw new Error("Unable to get frame.contentWindow");var c=u.contentWindow,d=Jr({target:u.contentWindow,scope:i});return d.listen(ri.MountingStart,(function(){c!==u.contentWindow&&(J("SDK: Widget remounted. Need to reconnect",{widgetType:e.widgetType,buttonType:e.buttonType}),d.destroy(),t(s,u),c=u.contentWindow)})),o&&Sa.onCheckout(o),d.listen(ri.Ready,(function(){bo.of(r).mark(Jn.SimpleWidget_Mounted),Sa.onReady((function(){return d.emit(ri.ReadyToShowInfo)}))})),d.listen(ri.Resize,(function(t){Yt.style(s,ti(e,t.height,t.offsetY))})),d.listen(ri.ShowSplitInfo,(function(){return Sa.showSplitModal(a)})),d.listen(ri.ShowCashbackInfo,(function(){return Sa.showCashbackModal(a)})),n.on(So.PaymentUpdate,(function(){a.amount=yn(n.sheet),a.currencyCode=vn(n.sheet),d.emit(ri.PaymentUpdate,Object.assign({},a))})),function(){return d.destroy()}}(u,c);s=function(){d(),Yt.remove(u)}}catch(t){$("SDK: SimpleWidget mount",t)}return{destroy:s}}function Ma(t,e,n,o){if(t)return Sa.mount(n.env),Pa(t,ue(e,xa),n,o);G("SDK: Falsy parent on widget-info mount",{fn:"SimpleWidget.mount",message:"parent: "+t})}var Ea=function(){return pt()&&window.innerWidth<=500},Ia=function(t,e){return t?{h:window.innerHeight-50}:{w:Math.min(520,window.innerWidth-50),h:Math.min(730,window.innerHeight-50,(null==e?void 0:e.height)||1/0)}},Ba=function(){var t=ba(),e=function(t){return t()},n=!1,o=null,r=Ea(),i=function(){},a=function(){var e=function(){return i=function(){}};r=Ea(),i=r?t.showDrawer(document.body,e):t.showModal(e)};return{mount:function(a){if(!o&&!n){bo.of(Ba).mark(Jn.UltimateWidget_MountingStarted);var s=C(8),u=Nn(Ce,null,{rpcs:s,env:a}),c=t.mount(u,"ya-modal-"+C(8));if(!c.contentWindow)return void(n=!0);(o=Jr({target:c.contentWindow,scope:s})).listen(ri.Close,(function(){return i()})),o.listen(ri.Resize,(function(e){t.resize(Ia(r,e))})),o.listen(ri.Ready,(function(){bo.of(Ba).mark(Jn.UltimateWidget_MountingStarted),t.resize(Ia(r)),Ba.onReady=e}))}},showCashbackModal:function(e){o&&(t.theme(e.theme),o.request(ri.RenderCashbackModal,e).then(a))},showSplitModal:function(e){o&&(t.theme(e.theme),o.request(ri.RenderSplitModal,e).then(a))},onReady:function(t){o&&o.listen(ri.Ready,(function(){return t()}))}}}();function Oa(t,e,n,o){return void 0===t&&(t=20),void 0===e&&(e=0),void 0===n&&(n=32),"number"!=typeof t?(null==o||o(),20):Math.max(e,Math.min(t,n))}function Ta(t){switch(t){case ee.None:return t;case ee.Default:default:return ee.Default}}var Ra=function(t,e){switch(t){case ne.Small:return t;case ne.Medium:return ne.Medium;default:return null==e||e(),ne.Medium}},Aa=function(t){switch(t){case oe.Saturated:case oe.Transparent:return t;default:return oe.Default}},_a=function(t){switch(t){case ie.Dark:return t;case ie.Light:default:return ie.Light}},Wa=nr(Ie,{lowerCase:!0}),Ua={widgetType:te.Ultimate,borderRadius:16,widgetTheme:ie.Light};function La(t,e,n,o){var r={},i=C(8),a={sessionId:n.sessionId,merchantId:hn(n.sheet),amount:yn(n.sheet),currencyCode:vn(n.sheet),theme:_a(e.widgetTheme),borderRadius:Oa(e.borderRadius),paymentMethods:wn(n.sheet),isPrepayment:Boolean(e.isPrepayment),paymentSheet:n.sheet,padding:Ta(e.padding),showCheckout:Boolean(o),hideWidgetHeader:Boolean(e.hideWidgetHeader),widgetSize:Ra(e.widgetSize),widgetBackground:Aa(e.widgetBackground),withOutline:Boolean(e.withOutline)};var s=function(){};try{bo.of(r).mark(Jn.UltimateWidget_MountingStarted),bo.ofSession(n.sessionId).mark(Jn.FirstViewMountingStarted);var u=function(){var t=document.createElement("div"),n=Xr(Object.assign({},e));return Yt.attrs(t,{class:Wa()}),Yt.style(t,Object.assign({},n,{transition:"height 150ms ease-in-out, margin 150ms ease-in-out"})),t}(),c=function(){var t=n.sessionId,e=n.env,o=document.createElement("iframe"),r="ya-frame-"+C(8);return Yt.style(o,oi()),Yt.attrs(o,{class:Wa("frame"),src:Nn(ke,t,{env:e,rpcs:i,extra:a,merchantId:hn(n.sheet)}),name:r}),o}();Yt.add(t,u),Yt.add(u,c);var d=function t(s,u){if(!u.contentWindow)throw new Error("Unable to get frame.contentWindow");var c=u.contentWindow,d=Jr({target:u.contentWindow,scope:i});return d.listen(ri.MountingStart,(function(){c!==u.contentWindow&&(J("SDK: Widget remounted. Need to reconnect",{widgetType:e.widgetType,buttonType:e.buttonType}),d.destroy(),t(s,u),c=u.contentWindow)})),o&&d.listen(ri.CheckoutButtonClick,(function(){return o()})),d.listen(ri.Ready,(function(){bo.of(r).mark(Jn.UltimateWidget_Mounted),Ba.onReady((function(){return d.emit(ri.ReadyToShowInfo)}))})),d.listen(ri.Resize,(function(t){Yt.style(s,ni(e,t.height,t.offsetY))})),d.listen(ri.ShowSplitInfo,(function(t){return Ba.showSplitModal(Object.assign({},a,{activePlan:t}))})),d.listen(ri.ShowCashbackInfo,(function(){return Ba.showCashbackModal(a)})),n.on(So.PaymentUpdate,(function(){a.amount=yn(n.sheet),a.currencyCode=vn(n.sheet),d.emit(ri.PaymentUpdate,Object.assign({},a))})),function(){return d.destroy()}}(u,c);s=function(){d(),Yt.remove(u)}}catch(t){$("SDK: UltimateWidget mount",t)}return{destroy:s}}function Da(t,e,n,o){if(t){Ba.mount(n.env);var r=ue(e,Ua);return r.borderRadius=Oa(r.borderRadius),La(t,r,n,o)}G("SDK: Falsy parent on widget-info mount",{fn:"UltimateWidget.mount",message:"parent: "+t})}var ja=function(t){return t.Ready="widget-ready",t.Failure="widget-failure",t.WidgetExtrasChange="widget-extras-change",t.WidgetSizeChange="widget-size-change",t}({}),Fa=function(t){return t.Update="update",t.Lock="lock",t.Unlock="unlock",t.Config="config",t}({}),Na=function(t,e){if(void 0===e&&(e=200),t){var n=Yt.on(t,"transitionend",(function(e){t===e.target&&(n(),Yt.style(t,{transition:""}))}));setTimeout((function(){Yt.style(t,{transition:""}),n()}),e)}},Ka=function(t){function e(e,n){var o;return(o=t.call(this)||this).frame=void 0,o.frameListener=void 0,o.frameEmitter=void 0,o.payment=void 0,o.widgetOptions=void 0,o.onMessage=function(t){t&&t.type&&o.emit(t.type,t)},o.onPaymentUpdate=function(){o.frameEmitter&&o.frameEmitter.send({type:Fa.Update,paymentSheet:o.payment.sheet})},o.onPaymentProcess=function(){o.frameEmitter&&o.frameEmitter.send({type:Fa.Lock})},o.onPaymentLock=function(){o.frameEmitter&&o.frameEmitter.send({type:Fa.Lock})},o.onPaymentUnlock=function(){o.frameEmitter&&o.frameEmitter.send({type:Fa.Lock})},o.payment=e,o.widgetOptions=n,o.subscribePayment(),o}N(e,t),e.create=function(t,n){return new e(t,n)};var n=e.prototype;return n.destroy=function(){t.prototype.destroy.call(this),this.unmount()},n.mount=function(t){try{if(this.frame)return;var e=this.widgetOptions,n=this.payment,o=n.sheet,r=n.env,i=Wr(o),a=e.widgetType===te.BnplPreview?xe:be,s=Nn(a,this.payment.sessionId,{env:r,extra:{paymentSheet:i,widgetOptions:e},merchantId:hn(o)}),u=Kn(s);this.frame=Ve(s,Object.assign({},oi(),{opacity:"0"})),Yt.add(t,this.frame),this.connect(u)}catch(t){$("sdk-widget mount",t)}},n.unmount=function(){this.frame&&(Yt.remove(this.frame),this.frame=void 0),this.frameListener&&(this.frameListener.destroy(),this.frameListener=void 0),this.frameEmitter&&(this.frameEmitter.destroy(),this.frameEmitter=void 0),this.unsubscribePayment()},n.show=function(){this.frame&&Yt.animate(this.frame,{property:"opacity",from:"0",to:"1"})},n.connect=function(t){var e,n,o=this,r=new lt({targetUrl:t});this.frameListener=new jt(r),this.frameListener.on(this.onMessage);var i=null===(e=this.frame)||void 0===e?void 0:e.contentWindow;this.on(ja.Ready,(function(){var t,e;if(i!==(null===(t=o.frame)||void 0===t?void 0:t.contentWindow))if(J("SDK: Widget remounted. Need to reconnect",{widgetType:o.widgetOptions.widgetType}),i=null===(e=o.frame)||void 0===e?void 0:e.contentWindow)try{o.frameEmitter=new Ut(r,i)}catch(t){$("SDK: Widget Message Connection Emitter failed on remount",t)}else J("SDK: remount. No content window")})),this.frameEmitter=new Ut(r,null!==(n=i)&&void 0!==n?n:void 0)},n.subscribePayment=function(){this.payment.on(So.PaymentUpdate,this.onPaymentUpdate),this.payment.on(So.PaymentProcess,this.onPaymentProcess),this.payment.on(So.PaymentLock,this.onPaymentLock),this.payment.on(So.PaymentUnlock,this.onPaymentUnlock)},n.unsubscribePayment=function(){this.payment.off(So.PaymentUpdate,this.onPaymentUpdate),this.payment.off(So.PaymentProcess,this.onPaymentProcess),this.payment.off(So.PaymentLock,this.onPaymentLock),this.payment.off(So.PaymentUnlock,this.onPaymentUnlock)},e}(Zt),za=function(t){return t.isPayWithSplit="PWS",t.splitOnly="SO",t.splitActivePlan="SAP",t}({}),Va=nr(Ie,{lowerCase:!0}),qa={widgetType:te.Compact,buttonType:$t.Checkout,bnplSelected:!1,borderRadius:16,buttonTheme:Gt.Black,hideWidgetHeader:!1,padding:ee.Default,widgetSize:ne.Medium,widgetBackground:oe.Default,withOutline:!1},Ha={type:$t.Pay,theme:Gt.Black,width:Jt.MaxImportant,style:{borderRadius:"16px",height:"100%"},innerType:Xt.Widget},Ya=function(t){function e(e,n){var o;(o=t.call(this)||this).hasShadowRoot=!1,o.payment=void 0,o.parent=void 0,o.options=void 0,o.buttonOptions=void 0,o.styleElement=void 0,o.widgetContainerElement=void 0,o.buttonContainer=void 0,o.widget=void 0,o.button=void 0,o.hasButton=void 0,o.renderWatcherUnsubscribe=function(){},o.animateShow=function(){if(o.widgetContainerElement&&!Sn(o.payment.sheet)&&o.options.widgetType!==te.BnplRequired){var t=o.widgetContainerElement.getBoundingClientRect().width<325?"40px":"48px";Yt.style(o.widgetContainerElement,{height:t}),setTimeout((function(){Yt.style(o.widgetContainerElement,{transition:"height 150ms ease-in-out"})}))}},o.onButtonClick=function(t){o.emit(Qt.Click,t)},o.onSdkWidgetReady=function(t){o.buttonOptions&&t.buttonTheme&&(o.buttonOptions.theme=t.buttonTheme),o.showWidget(),o.updateButtonOptionsExtra(t.buttonExtra),Na(o.buttonContainer,200),Na(o.widgetContainerElement,200),bo.of(o).mark(Jn.WidgetMounted)},o.onSdkWidgetExtrasChange=function(t){var e,n,r=(e=t,(n={})[za.isPayWithSplit]=B()(["split","payWithSplit"],void 0,e),n[za.splitOnly]=B()(["split","onlySplit"],void 0,e),n[za.splitActivePlan]=B()(["split","activePlan"],void 0,e),n);o.updateButtonOptionsExtra({bnplSelected:r[za.isPayWithSplit]}),o.payment.emit(So.PaymentExtra,{innerType:o.buttonOptions.innerType,bnplSelected:o.buttonOptions.bnplSelected}),function(t,e){e&&je(e)&&(zr[t.sessionId]=zr[t.sessionId]||{},Object.entries(e).forEach((function(e){var n=e[0],o=e[1];zr[t.sessionId][n]=o})))}(o.payment,r)},o.onSdkWidgetSizeChange=function(t){var e=t.widgetSize,n=t.buttonPosition,r=t.badgesHeight,i=n||{},a=i.top,s=i.left,u=i.width,c=i.height;e.height&&o.widgetContainerElement&&(o.widgetContainerElement.style.height=e.height,"0"===e.height?Yt.hide(o.widgetContainerElement,!0):Yt.show(o.widgetContainerElement)),o.buttonContainer&&(a&&Yt.style(o.buttonContainer,{top:a}),s&&Yt.style(o.buttonContainer,{left:s}),u&&Yt.style(o.buttonContainer,{width:u}),c&&Yt.style(o.buttonContainer,{height:c})),r&&o.button&&o.button.setBackdrop(r),c&&o.options.borderRadius&&o.options.borderRadius>=parseFloat(c)/2&&(o.options.borderRadius=parseFloat(c)/2,o.widgetContainerElement&&(o.widgetContainerElement.style.borderRadius=o.options.borderRadius+"px")),o.hasButton&&!o.button&&o.mountButton()},o.onSdkWidgetFailure=function(){o.unmountWidget(),o.unmountButton()};try{o.payment=n,o.options=ue(e,qa),o.hasButton=o.options.widgetType!==te.BnplPreview;var r=o.isWidgetTypeWithSplitSelect()?o.isBnplSelected():void 0;o.buttonOptions=se({style:{borderRadius:o.options.borderRadius+"px",height:"100%"},theme:o.options.buttonTheme,innerType:Xt.Widget,bnplSelected:r},Ha)}catch(t){throw $("button create",t),t}return o}N(e,t),e.create=function(t,n){return new e(t,n)};var n=e.prototype;return n.destroy=function(){t.prototype.destroy.call(this),this.unmount()},n.mount=function(t){if(t){bo.of(this).mark(Jn.WidgetMountingStarted),bo.ofSession(this.payment.sessionId).mark(Jn.FirstViewMountingStarted),this.parent&&this.unmount();try{this.parent=t,this.hasShadowRoot=void 0!==window.ShadowRoot&&t instanceof ShadowRoot,this.mountStyles(),this.mountWidgetContainer(),this.hasButton&&(this.mountButtonContainer(),Sn(this.payment.sheet)||this.options.widgetType===te.BnplRequired?(Yt.style(this.widgetContainerElement,{transition:""}),Yt.style(this.buttonContainer,{transition:""})):this.mountButton()),this.isOnlyButton()||this.mountWidget()}catch(t){$("button mount",t)}}else G("SDK: Falsy parent on widget mount",{fn:"Widget.mount",message:"parent: "+t})},n.unmount=function(){this.parent=void 0,this.renderWatcherUnsubscribe(),this.unmountButton(),this.unmountButtonContainer(),this.unmountWidget(),this.unmountWidgetContainer(),this.unmountStyles()},n.mountWidgetContainer=function(){var t=Va(),e=document.createElement("div");e.setAttribute("class",t),Yt.style(e,Xr({borderRadius:this.options.borderRadius})),this.parent?Yt.add(this.parent,e):Z("SDK: Cannot mount widget container: has no parent element"),this.widgetContainerElement=e},n.mountButtonContainer=function(){if(this.widgetContainerElement){var t=Va("container",{}),e=document.createElement("div");e.setAttribute("class",t),Yt.style(e,{position:"absolute",top:"0",right:"0",bottom:"0",left:"0",border:"0",width:"100%",height:"100%","z-index":"2",display:"flex","flex-direction":"column-reverse","justify-content":"flex-end",transition:"top 150ms ease-in-out, left 150ms ease-in-out, width 150ms ease-in-out"}),Yt.add(this.widgetContainerElement,e),this.animateShow(),this.buttonContainer=e}else Z("SDK: Skip widget button mount on nonexisting parent")},n.unmountWidgetContainer=function(){this.widgetContainerElement&&Yt.remove(this.widgetContainerElement)},n.unmountButtonContainer=function(){this.buttonContainer&&Yt.remove(this.buttonContainer)},n.mountStyles=function(){var t=document.createElement("style");t.setAttribute("type","text/css"),this.hasShadowRoot?(this.styleElement=t,this.parent?Yt.add(this.parent,t):G("SDK: Widget cannot mount styles: has no parent element")):e.isMainStylesMounted||(document.head.appendChild(t),e.isMainStylesMounted=!0)},n.unmountStyles=function(){this.styleElement&&Yt.remove(this.styleElement)},n.mountWidget=function(){this.widgetContainerElement&&this.widgetContainerElement.isConnected?(this.widget=Ka.create(this.payment,this.options),this.widget.mount(this.widgetContainerElement),this.widget.on(ja.Ready,this.onSdkWidgetReady),this.widget.on(ja.Failure,this.onSdkWidgetFailure),this.widget.on(ja.WidgetSizeChange,this.onSdkWidgetSizeChange),this.widget.on(ja.WidgetExtrasChange,this.onSdkWidgetExtrasChange)):G("Skip payment-method mount on unconnected button")},n.unmountWidget=function(){this.widget&&this.widget.destroy()},n.showWidget=function(){this.widget&&this.widget.show()},n.mountButton=function(){if(this.button&&this.unmountButton(),this.buttonOptions&&this.buttonContainer){var t=Nr.create(this.buttonOptions,this.payment,{disableStickyButton:!0});bo.of(this).fork({isInWidget:!0}).bind(t),this.button=t,this.button.mount(this.buttonContainer),this.button.on(Qt.Click,this.onButtonClick)}else G("Skip private button mount on nonexisting parent")},n.isOnlyButton=function(){return!Sn(this.payment.sheet)&&this.options.widgetType===te.Mini},n.unmountButton=function(){this.button&&this.button.destroy()},n.updateButtonOptionsExtra=function(t){t&&(this.buttonOptions=Object.assign({},this.buttonOptions,t))},n.isWidgetTypeWithSplitSelect=function(){return!!this.options.widgetType&&re.includes(this.options.widgetType)},n.isBnplSelected=function(){return this.options.bnplSelected||this.options.widgetType===te.BnplRequired},e}(Zt);Ya.isMainStylesMounted=!1;var Za=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).resolvers={},e.hasListener=function(t){return e.listeners[t]&&e.listeners[t].length>0},e}N(e,t);var n=e.prototype;return n.resolve=function(t,e){var n=this.resolvers[t];n&&Ne(e)&&e.then(n)},n.on=function(e,n){return t.prototype.on.call(this,e,n)},n.emit=function(t,e){var n=this;(this.listeners[t]||[]).forEach((function(o){var r=o.call(n,e);n.resolve(t,r)}))},e}(Zt),$a=function(t){function e(e){var n;return(n=t.call(this)||this).payment=void 0,n.payment=e,n}return N(e,t),e.prototype.setPayment=function(t){this.payment=t},j(e,[{key:"env",get:function(){return this.payment.env}},{key:"sheet",get:function(){return this.payment.sheet}},{key:"sessionId",get:function(){return this.payment.sessionId}},{key:"signalData",get:function(){return Object.assign({},Ko(Object.assign({env:this.payment.env},this.payment.sheet)),{sessionId:this.sessionId})}}])}(Zt),Ga=["env"],Ja=function(e){function n(n,o){var r,i;if((r=e.call(this)||this).offFrameBroadcastListener=void 0,r.checkoutCounter=0,r.overlay=void 0,r.connectionOptions=void 0,r.connectionManager=void 0,r.connectionAgent=void 0,r.checkTargetOpeningTimer=void 0,r.abortChecksAttempts=0,r.checkoutSessionCompleted=void 0,r.paymentProcessing=!1,r.formLoading=!1,r.formBaseUrl=void 0,r.formWindowFeatures=void 0,r.proxy=void 0,r.buttons=[],r.widgets=[],r.env=void 0,r.sheet=void 0,r.sessionType=void 0,r.sessionId=void 0,r.onMessage=function(t){var e;if(t&&t.type)switch(t.type){case wo.Ready:Q("SDK: Form message event",{sdkInFrame:Mo(),eventType:t.type}),r.formLoading=!1,r.emit(t.type,t);break;case wo.Change:case wo.Reset:case wo.Setup:r.emit(t.type,t);break;case wo.Success:case wo.Process:Q("SDK: Form message event",{sdkInFrame:Mo(),eventType:t.type,sessionType:r.sessionType});var n=t.type===wo.Success||t.type===wo.Process&&t.paymentMethodInfo.type===nn.Split;r.completeCheckoutSession(),t.type===wo.Process&&r.processCheckout(),n||r.closeCheckoutWindow("process"),function(t,e){void 0===e&&(e=0);var n=Date.now();if(!document.visibilityState)return t("undefined");var o=function(){var r=document.visibilityState;"visible"===r?t():e>0&&Date.now()-n>e?t("timer",r):zn(o,Math.min(e,500))};zn(o,0)}((function(e,n){e&&G("SDK: Unexpected page focus",{trigger:e,state:n}),r.emit(t.type,t)}),5e3);break;case wo.Abort:Q("SDK: Form message event",{sdkInFrame:Mo(),eventType:t.type,sessionType:r.sessionType}),r.startCheckingTargetOpening(t);break;case wo.Error:Q("SDK: Form message event",{sdkInFrame:Mo(),eventType:t.type,reason:t.reason,sessionType:r.sessionType}),r.completeCheckoutSession(),r.closeCheckoutWindow("error"),r.emit(t.type,t);break;case wo.Ping:var o={type:Co.Ping};null!==(e=r.connectionAgent)&&void 0!==e&&e.isConnected?r.connectionAgent.send(o):r.sendFrameBroadcastMessage(o)}},r.onOverlayClick=function(){r.connectionAgent&&r.connectionAgent.focus()},r.onBeforeUnload=function(){r.destroyChannel()},r.onTargetOpeningCheck=function(t){!(r.connectionAgent&&r.connectionAgent.isConnected)&&(r.abortChecksAttempts+=1),r.abortChecksAttempts>=2&&(r.destroyChannel(),r.checkoutSessionCompleted||(r.completeCheckoutSession(),Q("SDK: Not connected",{sdkInFrame:Mo(),eventType:t.type,sessionType:r.sessionType}),r.emit(t.type,t)))},null===n)throw Z("SDK: Payment create error: payment data is null"),new Error("Payment data is null");try{var a=n.env,s=void 0===a?Qe.Production:a,u=t(n,Ga);r.env=s,r.sheet=u,r.sessionType=u.type,r.sessionId=o,r.proxy=new $a(r),r.overlay=mi.getInstance(),r.overlay.on(mi.Events.Click,r.onOverlayClick),r.formBaseUrl=(i=r.sessionType)===Je.Payment?pe:[Je.Checkout,Je.CheckoutOld].includes(i)?ye:me,r.formWindowFeatures=function(t){var e=window.screen,n=t[0],o=t[1];if(!(e.width<n||e.height<o))return["scrollbars=yes","resizable=yes","status=no","location=no","toolbar=no","menubar=no","width="+n,"height="+o,"left="+(e.width-n>>1),"top="+(e.height-o>>1)].join(",")}(r.sessionType===Je.Payment?Me:Pe);var c=Nn(r.formBaseUrl,r.sessionId,{env:s,extra:Vr(r.__proxy()),sessionType:r.sessionType,merchantId:hn(r.sheet)}),d=function(t){return t+"-"+Date.now()}("YandexPay");r.connectionOptions=new lt({targetUrl:c,channel:d,sessionId:r.sessionId}),r.connectionManager=new Qo(r.connectionOptions),r.connectionManager.on(r.onMessage),Yt.on(window,"beforeunload",r.onBeforeUnload),Yt.on(window,"unload",r.onBeforeUnload),r.logIfMissedImportantSubscribers(),r.logMissedQueryTokenHandler()}catch(t){throw $("SDK: Payment create error",t),t}return r}N(n,e);var o=n.prototype;return o.__proxy=function(){return this.proxy},o.mountButton=function(t,e){var n=this,o=new Nr(e,this.proxy);bo.ofSession(this.sessionId).fork().bind(o);var r=o.on(Qt.Click,(function(){return n.checkout()}));o.mount(t),this.buttons.push({parent:t,button:o,offCheckout:r})},o.mountSubmitButton=function(t,e){var n=new Nr(e,this.proxy,{type:"submit"});bo.ofSession(this.sessionId).fork().bind(n),n.mount(t),this.buttons.push({parent:t,button:n,offCheckout:function(){}})},o.unmountButton=function(t){this.buttons=this.buttons.filter((function(e){var n=e.parent,o=e.button;return t===n&&o.destroy(),t!==n}))},o.mountWidget=function(t,e){var n=this;if(e.widgetType!==te.Simple){var o;if(e.widgetType===te.Info)return function(){var o=si(t,e,n.proxy);o&&n.widgets.push({parent:t,widget:o,offCheckout:function(){}})}();return e.widgetType===te.Ultimate?function(){if(n.sheet.type!==Je.Payment&&n.sheet.type!==Je.ByToken)return $("UltimateWidget works only in Payment"),void console.error("YandexPay: UltimateWidget works only in Payment");if(cn(n.proxy.sheet))throw new Error("Ultimate widget does not support payment sheet v2");var o=Da(t,e,n.proxy);o&&n.widgets.push({parent:t,widget:o,offCheckout:function(){}})}():function(){var o=new Ya(e,n.proxy);bo.ofSession(n.sessionId).fork().bind(o);var r=o.on(Qt.Click,(function(){return n.checkout()}));o.mount(t),n.widgets.push({parent:t,widget:o,offCheckout:r})}()}(o=Ma(t,e,n.proxy))&&n.widgets.push({parent:t,widget:o,offCheckout:function(){}})},o.unmountWidget=function(t){this.widgets=this.widgets.filter((function(e){var n=e.parent,o=e.widget;return t===n&&o.destroy(),t!==n}))},o.update=function(t){try{J("SDK: Update paymentSheet started"),Ln(this.sheet,t)&&this.proxy.emit(So.PaymentUpdate,null);var e={type:Co.Update,updateData:t};this.connectionAgent&&this.connectionAgent.isConnected?(this.connectionAgent.send(e),this.formLoading&&$("SDK: Update sheet on form loading, type: "+this.sessionType)):this.sendFrameBroadcastMessage(e)}catch(t){$("SDK: Update paymentSheet failed",t)}},o.complete=function(t,e){var n={type:Co.Complete,reason:t,errors:JSON.stringify(e)};this.connectionAgent&&this.connectionAgent.isConnected?this.connectionAgent.send(n):(this.sendFrameBroadcastMessage(n),this.destroyChannel())},o.checkout=function(){try{var t=Po.getInstance();if(this.paymentProcessing)return;if(this.connectionAgent)return void this.connectionAgent.focus();var e=t.paymentReady.get(this.sessionId);if(!1===e)return this.proxy.emit(So.PaymentError,null),void G("SDK: Payment is forbidden by payment ready check");null==e&&G("SDK: Check payment ready result is missing"),t.paymentStart.set(this.sessionId,!0),this.checkoutCounter+=1,this.checkoutSessionCompleted=!1,this.formLoading=!0,hi.reachGoal(Sn(this.sheet)?"ym-begin-yasplit":"ym-begin-yapay");var n=Kr(this.sheet),o=St?void 0:this.formWindowFeatures,r=Nn(this.formBaseUrl,this.sessionId,{checkoutCounter:this.checkoutCounter,env:this.env,sessionType:this.sessionType,extra:Vr(this.__proxy()),amAuth:n.auth,duid:Xo("_ym_uid",void 0),sdkInIframe:Mo(),merchantId:hn(this.sheet)});this.connectionManager.options.targetUrl=r;try{this.connectionAgent=this.connectionManager.open({type:Co.Payment,sheet:this.sheet},o,this.logQueryModeInIFrame,n.redirect,Mo()),this.startCheckingTargetOpening({type:wo.Abort,reason:ko.Close}),St||this.overlay.show(),jo.sdk.buttonCheckout(this.proxy.signalData)}catch(t){var i;Q("SDK: Start listen broadcast",{sdkInFrame:Mo(),sessionType:this.sessionType}),jo.sdk.buttonCheckoutError(this.proxy.signalData),null===(i=this.overlay)||void 0===i||i.hide(),this.proxy.emit(So.PaymentError,null),this.startBroadcastMode()}}catch(t){jo.sdk.buttonCheckoutError(this.proxy.signalData),$("SDK: Payment checkout error",t)}},o.sendFrameBroadcastMessage=function(t){var e=String(new mt(t,this.connectionOptions.channel,this.connectionOptions.sourceUrl));Po.getInstance().sendMessage({type:So.SdkBroadcastSendMessage,message:e,channel:this.sessionId})},o.onFrameBroadcastMessage=function(t){var e=new MessageEvent("message",{data:t.message});try{var n=function(t,e){var n=Rt(t);return Tt(n,e)}(e,this.connectionOptions),o=n.payload;this.onMessage(o)}catch(t){G("SDK: Can't parse broadcast frame message")}},o.startBroadcastMode=function(){var t=this;this.offFrameBroadcastListener=Po.getInstance().on(So.SdkBroadcastOnMessage,(function(e){return t.onFrameBroadcastMessage(e)})),this.sendFrameBroadcastMessage({type:Co.Ping})},o.completeCheckoutSession=function(){var t;this.checkoutSessionCompleted=!0,this.formLoading=!1,null===(t=this.overlay)||void 0===t||t.hide(),Po.getInstance().paymentStart.delete(this.sessionId)},o.processCheckout=function(){this.paymentProcessing=!0,this.buttons.forEach((function(t){return(0,t.offCheckout)()})),this.proxy.emit(So.PaymentProcess,null)},o.closeCheckoutWindow=function(t){var e=this;this.connectionAgent&&this.connectionAgent.isConnected?(this.connectionAgent.close(),this.stopCheckingTargetOpening(),setTimeout((function(){e.connectionAgent&&e.connectionAgent.isConnected&&G("SDK: Pay form not closed",{source:"sdk",from:t})}),3e3)):this.sendFrameBroadcastMessage({type:Co.Complete,reason:xo.Close})},o.destroy=function(){e.prototype.destroy.call(this),this.complete(xo.Close),this.destroyChannel(),bo.unbindFromSession(this.sessionId),this.sheet=void 0,this.connectionManager.destroy(),this.connectionManager=null,this.overlay.destroy(),this.overlay=null,this.buttons.forEach((function(t){return t.button.destroy()})),this.buttons=[],this.widgets.forEach((function(t){return t.widget.destroy()})),this.widgets=[],this.offFrameBroadcastListener&&this.offFrameBroadcastListener()},o.destroyChannel=function(){this.stopCheckingTargetOpening(),this.connectionAgent&&(this.connectionAgent.destroy(),this.connectionAgent=null),this.overlay&&this.overlay.hide()},o.startCheckingTargetOpening=function(t){this.stopCheckingTargetOpening(),this.checkTargetOpeningTimer=setInterval(this.onTargetOpeningCheck,250,t)},o.stopCheckingTargetOpening=function(){this.checkTargetOpeningTimer&&(clearInterval(this.checkTargetOpeningTimer),this.checkTargetOpeningTimer=void 0,this.abortChecksAttempts=0)},o.logQueryModeInIFrame=function(){var t=Mo();return t?G("SDK: Query mode in iframe"):J("SDK: Query mode in top window"),t},o.logIfMissedImportantSubscribers=function(){var t=this;setTimeout((function(){if(t.sheet){var e=un(t.sheet)?wo.Success:wo.Process;t.hasListener(e)||(console.warn("Yandex.Pay: Payment object requires subscriptions on %c"+e+" event","font-weight: bold;"),J("SDK: Missed subscription: "+e))}}),10)},o.logMissedQueryTokenHandler=function(){var t,e=this,n=null!==(t=this.connectionManager.hasQueryMessage())&&void 0!==t?t:{},o=n.hasMessage,r=n.hasForceMode;o&&this.once(wo.Process,(function(){var t={forceMode:String(r)};e.hasListener(wo.Process)?J("SDK: Query token successfully handled",t):J("SDK: Query token not handled by merchant",t)}))},n}(Za),Qa=function(t){function e(e,n){return t.call(this,e,n)||this}return N(e,t),e.prototype.update=function(e){t.prototype.update.call(this,e)},e}(Ja),Xa=function(t){return t.toString()},ts=function(t){return"{"+t+"}"};function es(t,e){var n;return null!==(n=t.errors)&&void 0!==n&&n.length?ns(t.errors,e):[{path:e,error:{expected:t.expected,got:t.got}}]}function ns(t,e){void 0===e&&(e="");for(var n=[],o=0;o<t.length;o++){var r=e?e+"."+t[o].path.toString():t[o].path,i=es(t[o].error,r.toString());n.push.apply(n,i)}return n}var os=function(t){function e(n,o,r){var i,a,s,u=Xa(n),c="function"==typeof o?String(o):JSON.stringify(o);return(s=t.call(this,"Invalid type! Expected "+u+" but got "+c+"!")||this).details=void 0,s.description=void 0,s.details=r.value,s.description=function(t){try{if(!t)return{};var e=ns(t),n={};return e.forEach((function(t){n[t.path.toString()]=t.error})),n}catch(t){return{error:t}}}(null===(i=s.details)||void 0===i?void 0:i.errors),s.name="ValidationError",null===(a=Error.captureStackTrace)||void 0===a||a.call(Error,s),Object.setPrototypeOf(s,e.prototype),s}return N(e,t),e}(Mn(Error)),rs=function(t){return function(e){var n=t.__validate(e);if("right"===n._t||"nextValid"===n._t)return n.value;throw new os(t,e,n)}},is={right:function(t){return{_t:"right",value:t}},left:function(t){return{_t:"left",value:t}},nextValid:function(t){return{_t:"nextValid",value:t}},nextNotValid:function(t){return{_t:"nextNotValid",value:t}}},as=function(t,e){return function(n){return Object.assign({},n,{toString:function(){return t=[null==n?void 0:n.toString(),null==e?void 0:e()].filter((function(t){return"string"==typeof t&&""!==t})),o=t.join(" | "),t.length>1?"("+o+")":o;var t,o},__validate:function(e){var o=t.call(this,e,is);return"left"===o._t||"right"===o._t?o:n?"nextNotValid"===o._t?n.__validate(o.value.got):n.__validate(o.value):o}})}},ss=as((function(t,e){return"string"!=typeof t?e.left({expected:"string",got:t}):e.nextValid(t)}),(function(){return"string"}));function us(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return n.reduce((function(t,e){return e(t)}),"function"==typeof t?t():t)}var cs=function(t){return"object"==typeof t&&null!==t&&"__validate"in t&&"toString"in t},ds=function(t,e,n){void 0===e&&(e=function(t){return t});var o=function(){return t.map((function(t){return cs(t)?Xa(t):JSON.stringify(t)})).join(" | ")};return as((function(r,i){for(var a=0;a<t.length;++a){var s=t[a];if(cs(s)){var u=s.__validate(r);if("right"===u._t)return i.right(u.value);if("nextValid"===u._t)return i.nextValid(u.value)}var c=e(s);if(e(r)===c)return i.right(c)}return void 0!==n?i.right(n):i.left({expected:o(),got:r})}),(function(){var e=o();return t.length>1?"("+e+")":e}))},ls=as((function(t,e){return"boolean"!=typeof t?e.left({expected:"boolean",got:t}):e.nextValid(t)}),(function(){return"boolean"})),hs=as((function(t,e){return void 0===t?e.right(void 0):e.nextNotValid({expected:"optional",got:t})}),(function(){return"undefined"})),fs=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return as((function(t,n){if(!Array.isArray(t))return n.left({expected:"array",got:t});var o=!1,r=new Array(t.length),i=[];t:for(var a=0;a<t.length;++a){for(var s=t[a],u=void 0,c=void 0,d=0;d<e.length;++d)if("right"===(u=(c=e[d]).__validate(s))._t||"nextValid"===u._t){r[a]=u.value;continue t}u&&c&&("nextNotValid"===u._t||"left"===u._t)&&(i.push({path:a,error:u.value}),o=!0)}return o?n.left({expected:"array",got:t,errors:i}):n.nextValid(r)}),(function(){var t=e.map((function(t){return Xa(t)})).join(" | ");return e.length>1?"("+t+")[]":t+"[]"}))},ms=n(267),ps=n.n(ms),ys=n(15),vs=n.n(ys),gs=function(t){return"string"==typeof t?vs()(t):t},bs=function(t){return"string"==typeof t?ps()(t):t},ws={allowUnknownKeys:!0},ks=function(t,e){return function(t,e,n){return as((function(o,r){if("object"!=typeof o||null===o)return r.left({expected:"object",got:o});var i=Object.assign({},o);if(n)for(var a in n)!i[a]&&n[a]&&(i[a]=n[a]);var s=t,u=!(null==e||!e.allowUnknownKeys),c=[],d=!1,l={};for(var h in i)if(Object.prototype.hasOwnProperty.call(i,h)){var f=i[h],m=s[h];if(m){var p=m.__validate(f);l[h]=p.value,"left"===p._t&&(c.push({path:h,error:p.value}),d=!0)}else u?l[h]=f:(d=!0,c.push({path:h,error:{expected:"unknownKey",got:f}}))}for(var y in s)if(Object.prototype.hasOwnProperty.call(s,y)&&!(y in l)){var v=s[y],g=i[y],b=v.__validate(g);"left"===b._t&&(c.push({path:y,error:b.value}),d=!0)}return d?r.left({expected:"object",got:o,errors:c}):r.nextValid(l)}),(function(){var e=Object.entries(t).map((function(t){var e=t[0],n=t[1];return[e,Xa(n)]}));return 0===e.length?ts(""):ts(" "+e.map((function(t){var e,n=t[0],o=t[1];return(/\s/.test(e=n)?'"'+e+'"':e)+": "+o})).join(", ")+" ")}))}(t,ws,e)},Ss=as((function(t,e){var n="string"==typeof t?t.replace(",","."):t;return isFinite(n)?e.nextValid(Number(n).toFixed(2)):e.left({expected:"Price",got:t})}),(function(){return"Price"})),Cs=as((function(t,e){return isFinite(t)?e.nextValid(Math.floor("number"==typeof t?t:Number(t))):e.left({expected:"finite integer",got:t})}),(function(){return"finite integer"})),xs=function(t){return isFinite(t)?Number(t):t},Ps=ks({count:Cs()}),Ms=ks({value:ss()}),Es=ks({email:us(ds([ls()],Boolean),hs),name:us(ds([ls()],Boolean),hs)}),Is=ks({billingContact:us(Es,hs)}),Bs=ks({amount:Ss(),type:hs(ds(Object.values(en),gs)()),label:hs(ss()),quantity:hs(ks({count:Cs(),label:hs(ss())})())}),Os=ks({version:ds([2],xs)(),merchant:ks({id:ss(),name:ss(),url:us(ss,hs)})(),order:ks({id:ss(),items:us(fs(Bs()),hs),total:ks({amount:Ss(),label:us(ss,hs)})(),cartExternalId:us(ss,hs)})(),currencyCode:ds(Object.values(tn),gs)(),recurringOptions:hs(ds([ks({type:ds([an.Recurring],gs)(),optional:hs(ls())})(),ks({type:ds([an.Deferred],gs)()})()])()),language:us(ds(["ru","en"],bs),hs),requiredFields:us(Is,hs),env:us(ds(Object.values(Qe),gs,Qe.Production),hs),type:ds(Object.values(Je))(),countryCode:ds(Object.values(Xe),gs)()},{order:{id:"0",total:{amount:"0.00"}}})(),Ts=ks({version:ds([3],xs)(),merchantId:ss(),currencyCode:ds(Object.values(tn),gs)(),cart:ks({items:fs(ks({productId:ss(),total:Ss(),quantity:us(Ps,hs)})())(),coupons:us(fs(Ms()),hs),externalId:us(ss,hs)})(),orderId:us(ss,hs),language:us(ds(["ru","en"],bs),hs),metadata:us(ss,hs),availablePaymentMethods:us(fs(ds(Object.values(nn),gs)()),hs),type:ds(Object.values(Je))(),env:us(ds(Object.values(Qe),gs,Qe.Production))})(),Rs=rs(ks({version:ds([4],xs)(),merchantId:ss(),currencyCode:ds(Object.values(tn),gs)(),totalAmount:Ss(),availablePaymentMethods:us(fs(ds(Object.values(nn),gs)()),hs),language:us(ds(["ru","en"],bs),hs),type:ds(Object.values(Je))(),env:us(ds(Object.values(Qe),gs,Qe.Production),hs)})()),As=rs(Ts),_s=rs(Os),Ws=function(t,e){try{var n=e(t);return Q("Validation V2/V3 OK"),n}catch(e){var o=e.message||e;if("description"in e&&e.description?(Q("SDK: Payment validation failed with errors",{merchantId:hn(t),sheetVersion:t.version,errors:e.description}),o="Payment validation failed with errors: "+JSON.stringify(e.description),console.warn(o)):Q("SDK: Payment validation failed",e),dn(t))throw new Error(o);return t}};function Us(t){var e,n=(e=t,Object.assign({},e,{type:Wn(e)}));return dn(n)?Ws(n,Rs):un(n)?Ws(n,As):Ws(n,_s)}var Ls={__proxy:function(){return new $a(this)},env:Qe.Production,sessionId:"deprecatedButtonFallbackPayment",sheet:{type:Je.Payment,version:3,merchantId:"deprecatedButtonFallbackMerchantId",cart:{items:[]},currencyCode:tn.Rub}},Ds=function(t){function e(n){var o;J("SDK: Usage of DeprecatedButton");var r=e.lastPayment,i=r?r.__proxy():new $a(Ls);return o=t.call(this,n,i)||this,r||(e.waitProxies.push(i),G("Create button without payment")),o}return N(e,t),e.create=function(t){return new e(t)},e.setPayment=function(t){e.lastPayment=t,e.waitProxies.forEach((function(e){e.setPayment(t)})),e.waitProxies=[]},e}(Nr);Ds.lastPayment=void 0,Ds.waitProxies=[];var js=function(t){function e(e,n){var o;return(o=t.call(this,e,n)||this).resolvers[wo.Change]=function(t){t&&o.update(t)},o.resolvers[wo.Reset]=function(t){t&&o.update(t)},o.resolvers[wo.Setup]=function(t){t&&o.setup(t)},o}N(e,t);var n=e.prototype;return n.createButton=function(t){var e=new Nr(t,this.proxy);return bo.ofSession(this.sessionId).fork().bind(e),e},n.setup=function(t){this.connectionAgent&&this.connectionAgent.isConnected&&this.connectionAgent.send({type:Co.Setup,setupData:t})},n.checkout=function(){return t.prototype.checkout.call(this)},e}(Ja),Fs=function(t){return t};function Ns(t,e){return new Promise((function(n,o){var r,i,a=[{supportedMethods:"yandexpay",data:{uid:"",paymentSheet:t,sessionId:e}}],s={id:i=mn(r=t),total:{label:cn(r)&&void 0!==r.order.total.label?r.order.total.label:Fs("Заказ")+" "+i,amount:{value:yn(r),currency:r.currencyCode}}};try{var u=new PaymentRequest(a,s),c=setTimeout((function(){o(new Error("PaymentRequest timeout"))}),5e3);u.canMakePayment().then((function(t){t?u.show(Promise.resolve(s)).then((function(t){clearTimeout(c),n(t)}),o):o(new Error("Can't make payment"))}),o)}catch(t){o(t)}}))}function Ks(t){return t.paymentMethodType===nn.Card?{type:nn.Card,cardLast4:t.cardLast4,cardNetwork:t.cardNetwork}:{type:nn.Cash}}var zs=function(t){function e(e,n){var o;return(o=t.call(this,e,n)||this).praStatus=void 0,o.praStatus="init",o}N(e,t);var n=e.prototype;return n.createButton=function(t){var e=new Nr(t,this.proxy);return bo.ofSession(this.sessionId).fork().bind(e),e},n.checkoutByPaymentRequestApi=function(){var t=this;return new Promise((function(e,n){Ns(Object.assign({},t.sheet,{env:t.env}),t.sessionId).then((function(n){var o=n.details,r=o.paymentResult,i=o.details;if(J('PaymentRequestApiResponse in PP. Result="'+r+'"'),r===wo.Process){var a={paymentMethodInfo:Ks(i),type:wo.Process,token:i.paymentToken,orderAmount:yn(t.sheet)};i.email&&(a.billingContact={email:i.email}),t.emit(wo.Process,a)}else r===wo.Abort?(n.complete("unknown"),t.emit(wo.Abort,{type:wo.Abort})):(n.complete("fail"),t.emit(wo.Error,{type:wo.Error,reason:i.error}));e()})).catch((function(t){G("PaymentRequestApiError in PP",{message:t.name+": "+t.message}),n(t)}))}))},n.checkout=function(){var e=this;if("failed"===this.praStatus||!Mt||Mo()||Ke.get("disabledPRA")||!(Pt||xt&&Ke.get("hasNewPRA")))return t.prototype.checkout.call(this);"pending"!==this.praStatus&&(this.praStatus="pending",this.checkoutByPaymentRequestApi().then((function(){e.praStatus="init"}),(function(){e.praStatus="failed",t.prototype.checkout.call(e)})))},n.update=function(e){t.prototype.update.call(this,e)},e}(Ja);var Vs=["env"],qs=function(){function e(e,n,o){this.checkoutCounter=0,this.formLoading=!1,this.onFormOpenError=void 0,this.onPayButtonClick=void 0,this.onWidgetCheckoutClick=void 0,this.source=void 0,this.proxy=void 0,this.buttons=[],this.widgets=[],this.env=void 0,this.sheet=void 0,this.sessionId=void 0;var r=o.onFormOpenError,i=o.onPayButtonClick,a=o.onWidgetCheckoutClick,s=o.source;try{if(null===e)throw new Error("Payment data is null");if(!i||!Fe(i))throw new Error("onPayButtonClick must be a function");a&&!Fe(a)&&console.warn("Yandex.Pay: onWidgetCheckoutClick must be a function","font-weight: bold;");var u=e.env,c=void 0===u?Qe.Production:u,d=t(e,Vs);this.onPayButtonClick=i,this.onFormOpenError=r,Fe(a)&&(this.onWidgetCheckoutClick=a),this.env=c,this.sheet=d,this.sessionId=n,this.proxy=new $a(this),this.source=s}catch(t){throw $("SDK: PaymentV4 create error",{error:t,source:s}),t}}var n=e.prototype;return n.__proxy=function(){return this.proxy},n.mountButton=function(t,e){var n=this,o=new Nr(e,this.proxy);bo.ofSession(this.sessionId).fork().bind(o);var r=o.on(Qt.Click,(function(){n.checkout()}));o.mount(t),this.buttons.push({parent:t,button:o,offCheckout:r})},n.mountSubmitButton=function(t,e){var n=new Nr(e,this.proxy,{type:"submit"});bo.ofSession(this.sessionId).fork().bind(n),n.mount(t),this.buttons.push({parent:t,button:n,offCheckout:function(){}})},n.unmountButton=function(t){this.buttons=this.buttons.filter((function(e){var n=e.parent,o=e.button;return t===n&&o.destroy(),t!==n}))},n.mountWidget=function(t,e){var n=this;if(e.widgetType!==te.Simple){var o;if(e.widgetType===te.Info)return function(){var o=si(t,e,n.proxy);o&&n.widgets.push({parent:t,widget:o,offCheckout:function(){}})}();return e.widgetType===te.Ultimate?function(){if(n.sheet.type!==Je.Payment&&n.sheet.type!==Je.ByToken)return $("UltimateWidget works only in Payment",{source:n.source}),void console.error("YandexPay: UltimateWidget works only in Payment");var o=Da(t,e,n.proxy,n.onWidgetCheckoutClick);o&&n.widgets.push({parent:t,widget:o,offCheckout:function(){}})}():function(){var o=new Ya(e,n.proxy);bo.ofSession(n.sessionId).fork().bind(o);var r=o.on(Qt.Click,(function(){return n.checkout()}));o.mount(t),n.widgets.push({parent:t,widget:o,offCheckout:r})}()}(o=Ma(t,e,n.proxy,n.onWidgetCheckoutClick))&&n.widgets.push({parent:t,widget:o,offCheckout:function(){}})},n.unmountWidget=function(t){this.widgets=this.widgets.filter((function(e){var n=e.parent,o=e.widget;return t===n&&o.destroy(),t!==n}))},n.update=function(t){Ln(this.sheet,t)&&this.proxy.emit(So.PaymentUpdate,null),this.formLoading&&$("SDK: Update sheet on form loading, type: Redirect",{source:this.source})},n.onClick=function(){var t=this;return $n(Ae.SdkByTokenRequest),$n(Ae.SdkByTokenRequestError),new Promise((function(e,n){var o=function(){$("SDK: Go to unknown url after buttonClick",{source:t.source})};window.addEventListener("beforeunload",o);var r=t.onPayButtonClick();Ne(r)||(r=Promise.resolve(r));var i=setTimeout((function(){G("SDK: onClick is awaiting for 10000ms",{source:t.source})}),1e4);setTimeout((function(){window.removeEventListener("beforeunload",o),n(new Error("Yandex.Pay: onPayButtonClick canceled by timeout"))}),3e4),r.catch((function(){Gn(Ae.SdkByTokenRequest),window.removeEventListener("beforeunload",o),n(new Bn("Yandex.Pay: onPayButtonClick Promise was rejected"))})).then((function(t){if(!t||"string"!=typeof t)throw new Error("Yandex.Pay: onPayButtonClick must return a Payment URL as a string");Gn(Ae.SdkByTokenRequest),window.removeEventListener("beforeunload",o),e(t)})).catch((function(t){Gn(Ae.SdkByTokenRequestError),window.removeEventListener("beforeunload",o),n(t)})).finally((function(){clearTimeout(i)}))}))},n.checkout=function(){var t=this;this.checkoutCounter+=1,this.formLoading=!0;var e=Kr(this.sheet);this.proxy.emit(So.PaymentLock,null),this.onClick().then((function(n){var o=Po.getInstance();o.once(So.SdkCheckPaymentResponse,(function(n){var r=n.fullPaymentUrl;if(!r)return jo.sdk.buttonCheckoutError(t.proxy.signalData),$("SDK CheckPayment: Incorrect payment params",{source:t.source}),t.emitError(new Error("Yandex.Pay: Incorrect payment params")),void t.onCheckoutError();var i=o.paymentReady.get(t.sessionId);if(!1===i)return jo.sdk.buttonCheckoutError(t.proxy.signalData),t.proxy.emit(So.PaymentError,null),void G("SDK: Payment is forbidden by payment ready check",{source:t.source});null==i&&G("SDK: Check payment ready result is missing");var a=function(t,e,n){void 0===n&&(n={});var o=t,r=Fn(e,n),i=et(t),a=et(ye);return n.env!==Qe.Sandbox&&(o=t.replace(i,a)),it(o,r)}(r,t.sessionId,{checkoutCounter:t.checkoutCounter,env:t.env,extra:Vr(t.proxy),amAuth:e.auth,duid:Xo("_ym_uid",void 0),merchantId:hn(t.sheet)});hi.reachGoal(Sn(t.sheet)?"ym-begin-yasplit":"ym-begin-yapay"),jo.sdk.buttonCheckout(t.proxy.signalData),setTimeout((function(){var t;t=a,window.top&&(window.top.location.href=t)}),500)})),o.sendMessage({type:So.CheckPayment,env:t.env,paymentUrl:n,merchantId:hn(t.sheet)})})).catch((function(e){e instanceof Bn?(jo.sdk.buttonCheckoutAbort(t.proxy.signalData),G("SDK: Merchant error",e)):(jo.sdk.buttonCheckoutError(t.proxy.signalData),$("SDK: PaymentV4 checkout error",{error:e,source:t.source}),t.emitError(e)),t.onCheckoutError()}))},n.destroy=function(){this.sheet=void 0,this.buttons.forEach((function(t){return t.button.destroy()})),this.buttons=[],this.widgets.forEach((function(t){return t.widget.destroy()})),this.widgets=[]},n.emitError=function(t){console.error(t.message),this.onFormOpenError&&this.onFormOpenError(t.message)},n.onCheckoutError=function(){var t=this;this.proxy.emit(So.PaymentError,null),setTimeout((function(){t.proxy.emit(So.PaymentUnlock,null)}),3e3),this.formLoading=!1},e}();var Hs,Ys,Zs=function(){function t(t,e,n){this.paymentData=t,this.options=e,this.payment=void 0;var o=e.onAbort,r=e.onError,i=e.onProcess,a=e.onSuccess,s=e.onPayButtonClick,u=e.onWidgetCheckoutClick,c=e.onFormOpenError,d=e.source;this.payment=function(t,e,n){var o=Wn(t);return o===Je.ByToken?new qs(t,e,n):[Je.Payment,Je.Checkout].includes(o)?new Qa(t,e):new zs(t,e)}(t,n,{onPayButtonClick:s,onWidgetCheckoutClick:u,onFormOpenError:c,source:d}),this.payment instanceof qs||(o&&this.payment.on(wo.Abort,(function(t){o(t)})),r&&this.payment.on(wo.Error,(function(t){r(t)})),i&&this.payment.on(wo.Process,(function(t){i(t)})),a&&this.payment.on(wo.Success,(function(t){a(t)})))}var e=t.prototype;return e.mountButton=function(t,e){return this.payment.mountButton(t,e)},e.mountSubmitButton=function(t,e){return this.payment.mountSubmitButton(t,e)},e.unmountButton=function(t){return this.payment.unmountButton(t)},e.mountWidget=function(t,e){return this.payment.mountWidget(t,Object.assign({},e,{buttonType:(n=this.paymentData,[Je.Payment,Je.Token].includes(n.type)?$t.Pay:[Je.Checkout,Je.CheckoutOld].includes(n.type)?$t.Checkout:$t.Simple)}));var n},e.unmountWidget=function(t){return this.payment.unmountWidget(t)},e.update=function(t){var e=this;if(Fe(t)){var n=t();Ne(n)?(this.payment.__proxy().emit(So.PaymentLock,null),n.then((function(t){return e.payment.update(t)})).finally((function(){return e.payment.__proxy().emit(So.PaymentUnlock,null)}))):this.payment.update(n)}else console.warn("Yandex Pay SDK: paymentSession.update requires a function as an argument.")},e.destroy=function(){return bo.unbindFromSession(this.payment.sessionId),this.payment.destroy()},t}(),$s=[],Gs=window.requestAnimationFrame||setTimeout,Js=function(){for(Hs=!0,Ys=!1;$s.length;){var t=$s.shift();null==t||t()}Hs=!1},Qs=function(t){return as((function(e,n){return e.length>=t?n.nextValid(e):n.left({expected:"minStringLength",got:e,args:[t]})}))},Xs=as((function(t,e){return null===t?e.right(null):e.nextNotValid({expected:"nullable",got:t})}),(function(){return"null"})),tu=["s","m","l"],eu=["dark","light"],nu=ks({type:ds(["bnpl","cashback","ultimate"])(),amount:Ss(),align:us(ds(["left","center","right"],bs,"left"),hs),"merchant-id":us(ss,Qs(1)),source:us(ss,hs,Xs)})(),ou=ks({type:ds(["bnpl"])(),amount:Ss(),"merchant-id":us(ss,Qs(1)),size:us(ds(tu,bs,"l"),hs),theme:us(ds(eu,bs,"light"),hs),currency:us(ds(["RUB"],gs,"RUB"),hs),color:us(ds(["primary","green","grey","transparent"],bs,"primary"),hs),variant:us(ds(["simple","detailed"],bs,"detailed"),hs)})(),ru=ks({type:ds(["cashback"])(),amount:Ss(),"merchant-id":us(ss,Qs(1)),size:us(ds(tu,bs,"l"),hs),theme:us(ds(eu,bs,"light"),hs),currency:us(ds(["RUB"],gs,"RUB"),hs),color:us(ds(["primary","grey","transparent"],bs,"primary"),hs),variant:us(ds(["default","compact"],bs,"default"),hs)})(),iu=ks({type:ds(["ultimate"])(),amount:Ss(),"merchant-id":us(ss,Qs(1)),size:us(ds(tu,bs,"l"),hs),theme:us(ds(eu,bs,"light"),hs),currency:us(ds(["RUB"],gs,"RUB"),hs),variant:us(ds(["default","compact"],bs,"default"),hs)})(),au=rs(nu),su=rs(ou),uu=rs(ru),cu=rs(iu),du=function(t,e){try{return e(t)}catch(t){var n=t.message||t;throw"description"in t&&t.description&&(n="Badge validation failed with errors: "+JSON.stringify(t.description)),new Error(n)}};function lu(t){return du(t,au),"bnpl"===t.type?du(t,su):"ultimate"===t.type?du(t,cu):du(t,uu)}var hu={l:24,m:18,s:14},fu=hu.l=24,mu="image",pu="variables",yu=["type","amount","merchant-id","size","currency","color","variant","theme","align","source"],vu=["size"],gu=["type","size","variant"],bu="split006",wu=function(t){var e="https://pay.yandex.ru/api/v1/badge",n={};return n.type=t.type,n.amount=t.amount,n.currency=t.currency,n.merchant_id=t["merchant-id"],t.source&&(n.source=t.source),"ultimate"===t.type?n.render_data=JSON.stringify({variant:t.variant,theme:t.theme,align:t.align}):n.render_data=JSON.stringify({color:t.color,variant:t.variant,theme:t.theme,align:t.align}),window.__YAPAY_BADGE_SANDBOX&&(e=jn(e)),it(e,n)},ku=function(){var t=new WeakMap,e=function(t){return e=t,tu.includes(e)?t:"l";var e},n=new window.IntersectionObserver(sr()(125,(function(t){t.forEach((function(t){var e,n=t.isIntersecting,o=t.target;n&&("badgeInternalId"in(e=o)&&"render"in e)&&o.render()}))})),{rootMargin:"250px 100px"});return function(o){function r(){for(var n,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=o.call.apply(o,[this].concat(i))||this).badgeInternalId=qn("badge"),n.badgeId="no-bid",n.lastOptions=void 0,n.throwJs=!1,n.naturalWidth=void 0,n.getBadgeOptions=function(){var t=lu({type:n.getAttribute("type"),amount:n.getAttribute("amount"),"merchant-id":n.getAttribute("merchant-id"),size:n.getAttribute("size"),currency:n.getAttribute("currency"),color:n.getAttribute("color"),variant:n.getAttribute("variant"),theme:n.getAttribute("theme"),align:n.getAttribute("align"),source:n.getAttribute("source")});return n.lastOptions=t,t},n.updateSize=function(){var o=t.get(n),r=Yt.findNode("."+pu,o);if(r)try{var i=n.getBadgeOptions(),a=e(i.size),s=hu[a],u="s"===a&&n.naturalWidth&&n.naturalWidth>=252?bu:void 0,c="variant"in i?i.variant:void 0,d=function(t,e,n){return"cashback"===t||"ultimate"===t?"compact"===e?100/fu:245/fu:n===bu?"detailed"===e?310/fu:252/fu:"detailed"===e?310/fu:195/fu}(i.type,c,u);r.textContent="\n                        :host {\n                            height: "+s+"px;\n                            width: "+d*Number(s)+"px;\n                        }\n                    "}catch(t){G("SDK: Badge update size failed",t),console.error(t)}},n}N(r,o);var i=r.prototype;return i.connectedCallback=function(){var e,o=this;try{var r=this.getBadgeOptions();this.badgeId=function(t){return["b",t["merchant-id"],C(6),Date.now()].join(".")}(r)}catch(t){}try{if(!t.has(this)){var i=this.attachShadow({mode:"closed"}),a=document.createElement("style"),s=document.createElement("style");s.textContent="\n    :host {\n        display: inline-block;\n        overflow: hidden;\n        vertical-align: middle;\n        -webkit-tap-highlight-color: transparent;\n        line-height: 0;\n    }\n\n    .image {\n        height: 100%;\n        width: auto;\n        max-width: 100%;\n        object-fit: contain;\n    }",a.className=pu,t.set(this,i),e=function(){i.appendChild(a),i.appendChild(s),o.updateSize()},Hs?e():($s.push(e),Ys||(Ys=!0,Gs(Js)))}n.observe(this)}catch(t){$("Sdk: badge ShadowRoot already exists")}},i.disconnectedCallback=function(){},i.attributeChangedCallback=function(e){var n=t.get(this);n&&(gu.includes(e)&&this.updateSize(),!vu.includes(e)&&Yt.findNode("."+mu,n)&&this.render())},i.render=function(){var e=this,o=t.get(this);if(o)try{var r=this.getBadgeOptions(),i=Yt.findNode("."+mu,o);i||(i=document.createElement("img"),Yt.addClass(i,mu),i.height=fu,i.width=1,Yt.on(i,"error",(function(){Yt.style(i,{display:"none"}),G("SDK: Badge image error",e.lastOptions)})),Yt.on(i,"load",(function(){i&&(e.naturalWidth=i.naturalWidth,e.updateSize()),Yt.style(i,{display:""})}))),Yt.style(i,{cursor:"default"}),Yt.attrs(i,{src:wu(r)}),Yt.add(o,i),n.unobserve(this)}catch(t){G("SDK: Badge render failed",t),console.error(t)}},j(r,null,[{key:"observedAttributes",get:function(){return yu}}])}(Mn(HTMLElement))},Su=function(){try{return"undefined"!=typeof window}catch(t){return!1}}(),Cu=n(296),xu=n.n(Cu);var Pu={getTabIcon:function(){return Promise.resolve("")}},Mu=function(t){return!!t&&null!==t.match(/pay\.yandex\.ru\/sdk\/v1\/pay\.js:2:\d{1,20}([\\n]|.)?$/)};function Eu(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Iu(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Iu(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Iu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var Bu=function(){function t(t,e){this.buttonWatcher=void 0,this.criticalPoints=void 0,this.active=void 0,this.timings=void 0,this.buttonWatcher=t,this.criticalPoints=Array.from(e).sort(),this.active=new Map,this.timings=[]}var e=t.prototype;return e.start=function(){var t=this;this.buttonWatcher.on("change",(function(e){var n=e.mounted,o=e.unmounted;if(n&&n.length)for(var r,i=Eu(n);!(r=i()).done;){var a=r.value;t.active.get(a)?G("Trying to log already mounted button"):t.active.set(a,performance.now())}if(o&&o.length)for(var s,u=Eu(o);!(s=u()).done;){var c=s.value,d=t.active.get(c);d?(t.timings.push(performance.now()-d),t.active.delete(c)):G("Trying to log unmount on not mounted button")}}));var e=function(){t.send()};Yt.on(document,"beforeunload",e),Yt.on(document,"unload",e)},e.median=function(t){var e=t.length/2;return t.length%2==0?(t[e]+t[e-1])/2:t[Math.floor(e)]},e.calculate=function(){var t=Array.from(this.timings).sort(),e=t[0],n=t[t.length-1],o=t.reduce((function(t,e){return t+e}),0);return{timings:t,min:e,max:n,average:o/t.length,median:this.median(t)}},e.send=function(){for(var t,e,n=this.calculate(),o=this.buttonWatcher.values.map((function(t){return t.merchant.id})),r=Object.assign({},n,{merchants:(t=o,Array.from(new Set(t)))}),i=Eu(this.criticalPoints);!(e=i()).done;){var a=e.value;if(r.min<a){J("Merchant placed button for less than "+a+"ms",r);break}}},t}(),Ou=new Bu(Br,[500,1e3,2e3]),Tu=["merchantId"];var Ru,Au,_u,Wu={},Uu={},Lu=function(t){var e=ot(t.name);if(et(t.name)===_u){var n=nt(t.name);Wu[n]&&Ru(Wu[n],t,t.name)}Uu[e]&&Ru(Uu[e],t,t.name)};var Du={connectEnd:2116,connectStart:2114,decodedBodySize:2886,domComplete:2124,domContentLoadedEventEnd:2131,domContentLoadedEventStart:2123,domInteractive:2770,domLoading:2769,domainLookupEnd:2113,domainLookupStart:2112,duration:2136,encodedBodySize:2887,entryType:2888,fetchStart:2111,initiatorType:2889,loadEventEnd:2126,loadEventStart:2125,nextHopProtocol:2890,redirectCount:1385,redirectEnd:2110,redirectStart:2109,requestStart:2117,responseEnd:2120,responseStart:2119,secureConnectionStart:2115,startTime:2322,transferSize:2323,type:76,unloadEventEnd:2128,unloadEventStart:2127,workerStart:2137};function ju(t,e){l("690.2096.2044",Object.assign({1701:t},v(),function(t){var e={};return Object.entries(Du).forEach((function(n){var o=n[0],r=n[1];if(o in t){var i=t[o];"string"!=typeof i&&"number"!=typeof i||!i&&0!==i||(e[r]=Hn(i))}})),e}(e)),g())}var Fu=new URL(me).origin,Nu=[{rumId:"script--sdk",payPath:"/sdk/v1/pay.js"},{rumId:"frame--init",payPath:nt(ve)},{rumId:"assets--button-ru-white",payPath:String(lr)},{rumId:"assets--button-en-white",payPath:String(dr)},{rumId:"assets--button-ru-black",payPath:String(cr)},{rumId:"assets--button-en-black",payPath:String(ur)}];var Ku,zu,Vu,qu,Hu,Yu=function(t){return t.Coupon="COUPON",t}({});Ku={reqid:Ue,url:Te,env:Re,page:"sdk",version:"112"},y(Object.assign({},r(Ku),{initTimestamp:Date.now()})),E.hit(),window.addEventListener("error",(function(t){var e,n;Mu(null===(e=t.error)||void 0===e?void 0:e.stack)&&$("SDK: unhandled error",{error:t.error,message:t.message,stack:null===(n=t.error)||void 0===n?void 0:n.stack})})),window.addEventListener("unhandledrejection",(function(t){var e,n;Mu(null===(e=t.reason)||void 0===e?void 0:e.stack)&&$("SDK: unhandledrejection error",{reason:t.reason,stack:null===(n=t.reason)||void 0===n?void 0:n.stack})})),window.YaPay||(Vu=(zu={baseOrigin:Fu,filter:Nu,sendTimingInstance:ju}).baseOrigin,qu=zu.filter,Hu=zu.sendTimingInstance,qu.forEach((function(t){var e=t.rumId,n=t.payPath,o=t.url;n&&(Wu[n]=e);var r=ot(null!=o?o:"");r&&(Wu[r]=e)})),Au||(Au=new PerformanceObserver((function(t){t.getEntries().forEach(Lu)})),setTimeout((function(){Au.observe({type:"resource",buffered:!0}),Au.observe({type:"navigation",buffered:!0})}),0)),Ru||(Ru=Hu),_u||(_u=Vu),jo.init({env:Re,version:"112"}),_.then((function(t){var e=t.flags,n=t.testIds,o=t.boxes;jo.update({experiments:e,testIds:n,boxes:o}),y({experiments:e,testIds:n,boxes:o})})),function(){if(Su){var t="IntersectionObserver"in window,e="attachShadow"in document.createElement("div"),n="customElements"in window,o="URLSearchParams"in window;t&&e&&n&&o?window.customElements.get(Oe)||window.customElements.define(Oe,ku()):J("SDK: Browser does not support required features for badges",{hasIntersectionObserver:t,hasShadowRoot:e,hasCustomElements:n,hasURLSearchParams:o})}else J("SDK: Badges can be inited in browser only")}(),l("690.1033",v(),g()),Po.getInstance(),J("SDK: Loaded",{sdkInFrame:Mo()}),window.crossOriginIsolated&&J("[COOP]: Cross origin isolated"),Rr.start(),Ou.start(),window.YaPay={createPayment:function(t){var e=bo.primary.fork();e.mark(Jn.SessionCreationStarted),bo.primary.mark(Jn.FirstSessionCreationStarted);var n=Us(t);Fo(n),Rn(n);var o=Cn(n);e.bindBySession(o),y({sessionId:o,sheetEnv:n.env}),No(n);var r=!1;try{r=Po.getInstance().isReady}catch(t){G("SDK: Init frame readiness error",t)}return jo.sdk.createSession(Object.assign({isFrameReady:r},Ko(n),{sdkVariant:"createPayment",sessionId:o})),new Promise((function(t,r){try{var i=Po.getInstance(),a=function(t,e){if(un(t))return new Qa(t,e);if(Tn(t))return new js(t,e);if(dn(t))throw new Error("createPayment does not support version 4");return new zs(t,e)}(n,o);t(a),i.sendMessage({type:So.IsReadyToPay,env:n.env,merchantId:hn(n),merchantUrl:ln(n),isCheckoutV2:Tn(n),paymentV3:Un(n.type)}),i.once(So.SdkReady,(function(t){var e=t.isWebview&&Mo();i.paymentStart.get(o)&&G("SDK: Payment started before init-frame was ready"),e&&t.readyToPay&&J("SDK: Webview in iframe",{fn:"createPayment"}),i.paymentReady.set(o,t.readyToPay&&!e)})),Ds.setPayment(a),e.mark(Jn.SessionCreated)}catch(t){$("SDK: createPayment error",t),r(t)}}))},createCheckout:function(t){var e=bo.primary.fork();e.mark(Jn.SessionCreationStarted),bo.primary.mark(Jn.FirstSessionCreationStarted);var n=Us(t);Fo(n),Rn(n);var o=Cn(n);e.bindBySession(o),y({sessionId:o,sheetEnv:n.env}),No(n);var r=!1;try{r=Po.getInstance().isReady}catch(t){G("SDK: Init frame readiness error",t)}return jo.sdk.createSession(Object.assign({isFrameReady:r},Ko(n),{sdkVariant:"createCheckout",sessionId:o})),new Promise((function(t,r){try{var i=Po.getInstance();t(new Qa(n,o)),i.sendMessage({type:So.IsReadyToPay,env:n.env,merchantId:n.merchantId,merchantUrl:ln(n),isCheckoutV2:!1,paymentV3:Un(n.type)}),i.once(So.SdkReady,(function(t){var e,n,r=t.isWebview&&Mo();(null===(e=i.paymentStart)||void 0===e?void 0:e.get(o))&&G("SDK: Payment started before init-frame was ready"),r&&t.readyToPay&&J("SDK: Webview in iframe",{fn:"createCheckout"}),null===(n=i.paymentReady)||void 0===n||n.set(o,t.readyToPay&&!r)})),e.mark(Jn.SessionCreated)}catch(t){$("SDK: createCheckout error",t),r(t)}}))},createSession:function(t,e){void 0===e&&(e={});var n=bo.primary.fork();n.mark(Jn.SessionCreationStarted),bo.primary.mark(Jn.FirstSessionCreationStarted);var o=Us(t);Fo(o),Rn(o);var r=Cn(o);n.bindBySession(r),y({sessionId:r,sheetEnv:o.env}),No(o);var i=!1;try{i=Po.getInstance().isReady}catch(t){G("SDK: Init frame readiness error",t)}return jo.sdk.createSession(Object.assign({isFrameReady:i},Ko(o),{sdkVariant:"createSession",sessionId:r})),new Promise((function(t,i){try{var a=Po.getInstance();t(new Zs(o,e,r)),a.sendMessage({type:So.IsReadyToPay,env:o.env,merchantId:hn(o),merchantUrl:ln(o),isCheckoutV2:!1,paymentV3:Un(o.type)||(s=o.type,[Je.ByToken].includes(s))}),a.once(So.SdkReady,(function(t){var e=t.isWebview&&Mo();a.paymentStart.get(r)&&G("SDK: Payment started before init-frame was ready"),e&&t.readyToPay&&J("SDK: Webview in iframe",{fn:"createSession"}),a.paymentReady.set(r,t.readyToPay&&!e)})),n.mark(Jn.SessionCreated)}catch(t){$("SDK: createSession error",t),i(t)}var s}))},readyToPayCheck:function(){return Promise.resolve(!0)},splitAvailableCheck:function(){return J("SDK: Deprecated split available check"),Promise.resolve(!0)},checkSplitAvailable:function(t){return new Promise((function(e){Po.getInstance().sendMessage(Object.assign({type:So.SdkIsSplitAvailable},t)),Po.getInstance().on(So.SdkIsSplitAvailableResponse,(function(t){var n=t.splitAvailable;e(n)}))}))},mountBadge:function(e,n){try{if(!(e instanceof HTMLElement))throw new Error("The first argument should be an HTMLElement");var o=lu(function(e){var n=e.merchantId,o=t(e,Tu);return Object.assign({},o,{"merchant-id":n})}(n)),r=document.createElement(Oe);r.throwJs=!0,Object.entries(o).forEach((function(t){var e=t[0],n=t[1];r.setAttribute(e,n)})),e.appendChild(r)}catch(t){G("SDK: mountBadge error",t),console.error(t)}},Button:Ds,Robokassa:Pu,Env:Qe,PaymentEnv:Qe,CountryCode:Xe,CurrencyCode:tn,PaymentMethodType:nn,OrderItemType:en,AllowedAuthMethod:on,AllowedCardNetwork:rn,CheckoutEventType:wo,PaymentEventType:wo,AbortEventReason:ko,ErrorEventReason:function(){var t={};try{return new Proxy(t,{get:function(t,e){var n=String(e);return J("Usage of YaPay.ErrorEventReason."+n),console.warn("Yandex Pay SDK: YaPay.ErrorEventReason is deprecated."),xu()(n).toUpperCase()}})}catch(e){return J("YaPay.ErrorEventReason fallback returned",e),t}}(),UpdateErrorCode:Yu,MessageType:Co,CompleteReason:xo,ButtonType:$t,ButtonTheme:Gt,ButtonWidth:Jt,ButtonEventType:Qt,WidgetType:te,WidgetTheme:ie,WidgetPaddingType:ee,RecurringType:an,WidgetBackgroundType:oe,WidgetSize:ne})})()})();