$.fn.setCursorPosition = function(pos) {
    if ($(this).get(0).setSelectionRange) {
        $(this).get(0).setSelectionRange(pos, pos);
    } else if ($(this).get(0).createTextRange) {
        var range = $(this).get(0).createTextRange();
        range.collapse(true);
        range.moveEnd('character', pos);
        range.moveStart('character', pos);
        range.select();
    }
};

jQuery(document).ready(function($) {

    $("input[name='birthdate']").mask("99/99/9999",{autoclear: false});

   /* $("input[name='phone']:not(.newpone)").click(function(){
        tmp_pos = $(this).val().replaceAll('_','').length;
        if(tmp_pos != 12) {
            $(this).setCursorPosition(tmp_pos);
        }
    }).mask("+79999999999",{autoclear: false});*/
    
    function isInViewport(element) {
        var elementTop = $(element).offset().top;
        var elementBottom = elementTop + $(element).outerHeight();

        var viewportTop = $(window).scrollTop();
        var viewportBottom = viewportTop + $(window).height();

        return elementBottom > viewportTop && elementTop < viewportBottom;
    }

    function animateCounter($element) {
        var target = parseInt($element.data('counter'), 10);
        var duration = 2000; // Продолжительность анимации в миллисекундах

        $({ countNum: $element.text() }).animate({ countNum: target }, {
            duration: duration,
            easing: 'swing',
            step: function() {
                $element.text(Math.floor(this.countNum));
            },
            complete: function() {
                $element.text(this.countNum);
            }
        });
    }

    function checkCounters() {
        $('[data-counter]').each(function() {
            var $this = $(this);

            if (!$this.hasClass('animated') && isInViewport($this)) {
                animateCounter($this);
                $this.addClass('animated'); // Добавляем класс, чтобы анимация запускалась только один раз
            }
        });
    }

    // Проверяем видимость счетчиков при загрузке страницы и при скролле
    $(window).on('scroll resize', function() {
        checkCounters();
    });

    // Запускаем проверку сразу при загрузке страницы
    checkCounters();


// Что то новенькое )
    $(document).on('keydown keyup', '[name="email"]', function() {
        var email = $(this);

        if(email.val().indexOf(' ') !== -1) {
            var new_val = email.val().replace(/\s/g, '');
            email.val(new_val);
        }
    });
// anketa
    $(document).on('click', '.anketa [data-count] .a_min', function() {
        var anketa = $(this).closest('.anketa'),
            input = anketa.find('[name="total"]'),
            val = parseInt(input.val())

        if(val > 0) {
            val--
            input.val(val)

            if(val === 0) $('#anket .input-age').removeClass('active')
            anketa.find('.input-element').hide()
            anketa.find('.input-element input, .input-element select').attr('disabled', 'disabled')

            var idx = 1
            while(idx <= val) {
                anketa.find('.input-element').eq(idx).find('input,select').attr('disabled', false)
                anketa.find('.input-element').eq(idx).show()
                idx++
            }

            //val = parseInt(anketa.find('.input-children [name="count"]').val())
            //
            anketa.find('[name="count"]').val(val)

            // var total = 0
            // anketa.find('.input-element:visible').each(function() {
            //     total += parseInt($(this).find('input').val())
            // })
            // anketa.find('[name="count"]').val(total)
        }
    });
    $(document).on('click', '.anketa [data-count] .a_plus', function() {
        var anketa = $(this).closest('.anketa'),
            input = anketa.find('[name="total"]'),
            val = parseInt(input.val())

        val++
        if(val <= 4) {
            input.val(val)
            anketa.find('.input-age').addClass('active')

            anketa.find('.input-element').hide()
            anketa.find('.input-element input, .input-element select').attr('disabled', 'disabled')

            var idx = 1
            while(idx <= val) {
                anketa.find('.input-element').eq(idx).find('input,select').attr('disabled', false)
                anketa.find('.input-element').eq(idx).show()
                idx++
            }

            anketa.find('[name="count"]').val(val)
            //val = parseInt(anketa.find('.input-children [name="count"]').val())
            //anketa.find('[name="count"]').val(val)
        }
    });
    $(document).on('click', '.anketa .input-element .a_min', function() {
        var anketa = $(this).closest('.anketa'),
            p = $(this).parent(),
            input = p.find('input'),
            val = parseInt(input.val())

        if(val > 1) {
            val--
            input.val(val)

            var total = 0
            anketa.find('.input-element:visible').each(function() {
                total += parseInt($(this).find('input').val())
            })
            // anketa.find('[name="count"]').val(total)
        }
    });
    $(document).on('click', '.anketa .input-element .a_plus', function() {
        var anketa = $(this).closest('.anketa'),
            p = $(this).parent(),
            input = p.find('input'),
            val = parseInt(input.val())

        val++
        input.val(val)

        var total = 0
        anketa.find('.input-element:visible').each(function() {
            total += parseInt($(this).find('input').val())
        })
        //anketa.find('[name="count"]').val(total)
    });
// END anketa

// различное по сайту.
    const videoObserver = new IntersectionObserver(
        ([entry]) => {
            const video = entry.target || {};

            if (!entry.isIntersecting || entry.intersectionRatio <= 0.3) {
                video.pause();
            } else {
                video.play();
            }
        },
        {
            threshold: [0.2, 0.8]
        }
    );

    document
        .querySelectorAll(".video-player")
        .forEach((video) => videoObserver.observe(video));

    $(".go_to").on('click', function () {
        let top = $($(this).attr('href')).offset().top - 50;
        $('html, body').animate( { scrollTop: top }, 800 );
        return false;
    });

    $(window).scroll(function() {
        if ($(this).scrollTop() > 800) {
            $('.btn_top').fadeIn();
        } else {
            $('.btn_top').fadeOut();
        }
    });

    $(".btn_top").on('click', function() {
        $("html, body").animate({scrollTop: 0}, 500);
        return false;
    });

    AOS.init({
        useClassNames: true,
        initClassName: false,
    });
// end различное по сайту.

    //корзина
    /*    let copyBasket;
        copyBasket = setInterval(function () {
            $('.mob_sum_basket').html($('.basket .ms2_total_count').html());
        }, 500);

        $(window).scroll(function() {
            $('.add_basket_form').toggleClass('fix', $(this).scrollTop() > 200);
        });*/

    //мобильное меню header
    $('.open_nav').on('click', function() {
        if ($(this).hasClass('active')) {
            $(this).removeClass('active');
            $('.header_mob_menu').removeClass('active');
        } else {
            $(this).addClass('active');
            $('.header_mob_menu').addClass('active');
        }
        return false;
    });
    //фиксируем шапку в верху
    $(function() {
        if ($(document).scrollTop() > 30) $("header").addClass('fix');
        $(window).scroll(function() {
            let top = $(document).scrollTop();
            if (top < 30) $("header").removeClass('fix');
            else $("header").addClass('fix');
        });
    });
    //меню подушки (клик в меню)
    $('.add_submenu>a').on('click', function() {

        if ($(this).parent().hasClass('active')) {
            $(this).parent().removeClass('active');
        } else {
            $('.add_submenu').removeClass('active');
            $(this).parent().addClass('active');
        }
        return false;
    });
    //боковое меню
    if($(document).width() > 480 ? true : false) {

    } else {
        $('.menu_min .block').on('click', function() {
            $(this).closest('ul').addClass('show');
            $(this).remove();
        });
    }

    //faq
    $('.faq_link').on('click', function() {
        if ($(this).hasClass('active')) {
            $(this).removeClass('active');
        } else {
            $(this).addClass('active');
        }
        return false;
    });
    //мобильное меню footer
    $('.mob_footer_title').on('click', function() {
        if ($(this).hasClass('active')) {
            $(this).removeClass('active');
        } else {
            $(this).addClass('active');
        }
        return false;
    });
    //мобильное меню sub
    $('.header_mob_menu .submenu>a').on('click', function() {
        if ($(this).hasClass('active')) {
            $(this).removeClass('active');
        } else {
            $(this).addClass('active');
        }
        return false;
    });

// new add
    //плюс минус
    $('.fx-min').on('click', function(){
        var tcounter = $(this).parent().find('.fx-prod-count'); // .prod-number-count
        var thisval = parseInt(tcounter.val());
        if (tcounter.data('minval')){
            var minval = parseInt(tcounter.data('minval'));
        } else {
            var minval = 0;
        }
        if (thisval > minval) {
            $(this).removeClass('disabled');
            tcounter.val(thisval-1);
            tcounter.trigger('change');
        } else {
            $(this).addClass('disabled');
        }
    });

    $('.fx-max').on('click', function(){
        var tcounter = $(this).parent().find('.fx-prod-count');
        var maxval = parseInt(tcounter.data('maxval'));
        var thisval = parseInt(tcounter.val());
        //console.log('PLUS',maxval,thisval);
        if (thisval < maxval) {
            tcounter.val(thisval+1);
            tcounter.trigger('change');
            $(this).removeClass('disabled');
            $(this).parent().find('.fx-min').removeClass('disabled');
        } else {
            $(this).addClass('disabled');
        }
    });

    // комплекты
    $('.fx-box-showhide').hide();
    $(document).on('click', '.fx-complect-add', function() {
        // console.log('Add all tovars');
        $.fancybox.close();
        var mytovars = {};
        var isadd = 0;
        var wrapper = '';

        if($(this).closest('#choice_main').length) wrapper = '#coice_main .product-complect-list .fx-ajax-complect';
        else wrapper = '.product-complect-list .fx-ajax-complect';

        $(wrapper).each(function (a,b) {

            let allprod = $(b).serializeArray().map(function(v) {return [v.name, v.value] } );
            var formObj = {};

            $.each(allprod, function (i, input) {
                formObj[input[0]] =  input[1];
                //console.log('cooo',input[0],input[1]);
                if(input[0] == 'count' && input[1] != '0'){
                    //console.log('n_w',allprod);
                    isadd = isadd+1;
                }
            });
            mytovars[a] = formObj;
        });
        //console.log('Opa',isadd);
        if (isadd == 0){
            $.fancybox.open('<h3>Вы не выбрали подушки</h3> <h4>Укажите количество и нажмите в Корзину.</h4>');
            return false;
        }

        //console.log('FINISH 2',mytovars);
        // finishing
        var formik = {};
        var outi = '';
        formik['ms2_action'] = 'cart/items/add';
        formik['ctx'] = 'web';
        formik['tovars'] = JSON.stringify(mytovars);

        $.ajax({
            type: "POST",
            url: 'assets/custom/api.php',
            data: formik,
            dataType: "json",
            success:  function(data) {
                if (data.error == 0){
                    console.log('[ADD Products]',data.msg);
                    //$('[data-target="#basket"]').trigger('click');
                    //$('.mod-cart').trigger('click');
                    miniShop2.Cart.status(data);
                    $('.mod-cart').trigger('click');

                } else {
                    alert(data.msg);
                }
            }
        });
        return false;
    });
    // на странице товара
    $(document).on('click', '.fx-complect-open', function() {
        console.log('Open complect');
        if (!$('.fx-box-showhide').hasClass('open')){

            $('.add_basket_form').hide(200);

            $('.fx-box-showhide').show(200).addClass('open');

            setTimeout(function () {
                $('.fx-kompl-slides').slick({
                    arrows: true,
                    dots: false,
                    infinite: false,
                    autoplay: false,
                    speed: 500,
                    //slidesToShow: 3,
                    /*slidesToScroll: 1,*/
                    variableWidth : true,
                    focusOnSelect: false,
                    responsive: [
                        {
                            breakpoint: 992,
                            settings: {
                                //slidesToShow: 2,
                            }
                        },
                        {
                            breakpoint: 767,
                            settings: {
                                //slidesToShow: 1
                                arrows: false
                            }
                        }
                    ]
                });

                $('.product-complect-list .fx-proc-images').slick({
                    arrows: false,
                    dots: true,
                    infinite: true,
                    autoplay: false,
                    speed: 500,
                    autoplaySpeed: 3000,
                    slidesToShow: 1,
                    slidesToScroll: 1,
                    focusOnSelect: false,
                });
            },220)




        }
        let top = $('.fx-box-showhide').offset().top - 50;
        $('html, body').animate( { scrollTop: top }, 800 );

        return false;
    });

    // Наведение на js. Универсальное. для ПК и моб.
    if (window.innerWidth > 575) {
        $(document).on('mouseenter', '.fx-modal-text',function(){
            elm = $(this).data('show');
            $(elm).addClass('open');
        }).on('mouseleave', '.fx-modal-text',function(){
            elm = $(this).data('show');
            $(elm).removeClass('open');
        });
        $(document).on('mouseenter', '[id^="text-box-information"]',function(){
            elm = this;
            $(elm).addClass('open');
        }).on('mouseleave', '[id^="text-box-information"]',function(){
            elm = this;
            $(elm).removeClass('open');
        });
    } else {
        $(document).on('click', '.fx-modal-text',function(){
            elm = $(this).data('show');
            if ($(elm).hasClass("open-ck")) {
                $(elm).parent().removeClass('open-all');
                $(elm).removeClass('open-ck');
                $(this).parents('#msCart').find('.modal-footer').css('position','absolute');
            } else {
                $(elm).parent().addClass('open-all');
                $(this).parents('#msCart').find('.modal-footer').css('position','relative');
                $(elm).addClass('open-ck');
            }
        });
    }
// end New add


    $(document).ready(function() {

        //dragToClose : false,
        //defaultDisplay : 'block',
        //mainClass : 'new-modal-hak',

// href="#cart-minimal" class="mod-cart"

        $('.fx-opencart-trigger').on('click',function () {
            $('.mod-cart').trigger('click');
        });

        // Новое. Открывание модальной корзины
        $('.mod-cart').fancybox({
            baseClass : 'new-modal-hak',
            hideScrollbar : true,

            preventCaptionOverlap : true,
            loop : false,
            //keyboard: false,
            arrows: false,
            touch : false,
            infobar: false,
            protect: false,
            wheel: false,
            modal: false,
            autoFocus: false,
            backFocus : false,
            'helpers': {
                overlay: {
                    locked: true
                }
            },
            beforeLoad: function(instance, item ) {
                //alert('opa');
                console.log('002');
            },
            afterLoad: function(){

            },
            afterClose: function(){

            }

        });
        $('.fx-mod-cart-open').on('click', function () {
            $('.mod-cart').trigger('click');
            return false;
        });

// плюс-минус в корзине.
        $(document).on('click', '.cons_basket .minus', function() {
            console.log('[msCart] minus 1 count');
            if($(this).closest('.basket_modal').length || $(this).closest('.fx-cart-prod-list').length) {
                var form = $(this).closest('.fx-cart-prod-item'),
                    product = getValues(form)
                removeFromCart(product, 1)
            }

            let $input = $(this).parent().find('input');
            let count = parseInt($input.val()) - 1;
            count = count < 1 ? 1 : count;
            $input.val(count);
            $input.change();
            //$(this).closest('.row').find('input[name="count"]').val(count);
            $(this).parents('.fx-cart-prod-item').find('input[name="count"]').val(count);
            return false;
        });
        $(document).on('click', '.cons_basket .plus', function() {
            console.log('[msCart] plus 1 count');
            if($(this).closest('.basket_modal').length || $(this).closest('.fx-cart-prod-list').length) {
                var form = $(this).closest('.fx-cart-prod-item'),
                    product = getValues(form)
                addProductToCart(product, 1)
            }

            let $input = $(this).parent().find('input');
            let count = parseInt($input.val()) + 1;
            //console.log('a',count);
            $input.val(count);
            $input.change();
            $(this).parents('.fx-cart-prod-item').find('input[name="count"]').val(count);
            return false;
        });

    });

    /* window.open_basket = false
     $(document).on('click', '[data-target="#basket"]', function(e) {

         console.log('DOC click 555',window.open_basket);
         e.preventDefault();
             if(window.open_basket === false) {
                 window.open_basket = true;
                 load_cart(true);
             }
         console.log('DOC click 555-2',window.open_basket);

     });*/
    /* $(document).on('click', '#basket, #basket [data-dismiss="modal"]', function(e) {

         if ($(e.target).closest(".modal-dialog").length) {
             console.log('DOC KVA',window.open_basket);
         }
         else if ($(e.target).closest(".close").length) {
             console.log('DOC KVA CLOSE',window.open_basket);
         } else {
             console.log('DOC CLOSE 111',window.open_basket);
             window.open_basket = false;
         };
     });*/
    $(document).ready(function() {
        if (typeof(miniShop2) != 'undefined') {
            miniShop2.Callbacks.Cart.add.response.success = function(response) {

                if (response.success) {
                    console.log('Basket click 888');
                    //console.log('Basket click 888',window.open_basket);
                    // Проверять открыта ли форма. и обновлять корзину тут.


                    /*  if(window.open_basket === true) {
                          console.log('C OPEN');
                        //  load_cart(true);
                      } else {
                          console.log('C NOT OPE');
                          //$('a[data-target="#basket"]').eq(0).trigger('click');
                         // $('a[data-target="#basket"]').eq(0).trigger('click');
                      }*/


                }
            }

            miniShop2.Callbacks.add('Cart.remove.response.success', 'castom_modal_cart_reload', function(response) {
                //load_cart(true);
            });
        }

        $('#city').on('change', function () {
            load_delivery();
        })
        $('#city').on('blur', function () {
            load_delivery();
        })
    });
    $('.slider_full').slick({
        arrows: true,
        dots: true,
        infinite: true,
        autoplay: true,
        speed: 500,
        autoplaySpeed: 3000,
        slidesToShow: 1,
        slidesToScroll: 1,
        focusOnSelect: false,
    });
    $('.slider_col_3').slick({
        arrows: false,
        dots: false,
        infinite: true,
        autoplay: false,
        speed: 500,
        autoplaySpeed: 3000,
        slidesToShow: 3,
        slidesToScroll: 1,
        focusOnSelect: false,
        responsive: [{
            breakpoint: 878,
            settings: {
                slidesToShow: 1,
                centerMode: true,
                infinite: false,
            }
        }]
    });
    $('[data-fancybox]').fancybox();
    let $grid = $('.item').imagesLoaded(function() {
        $('.box_photo_mosaik').masonry({
            itemSelector: '.item',
            horizontalOrder: true,
            percentPosition: true,
        });
    });

    $(document).on('click','.fx-open-complects-btn', function () {
        $(".fx-complect-modal").eq(0).trigger('click');
        $(this).parents('.modal-body').find('.close').trigger('click');
        return false;
    });

    $(".fx-complect-modal").fancybox({
        preventCaptionOverlap : true,
        padding: 0,
        margin: [20, 40, 20,40],
        'autoDimensions'    : 'true',
        'autoScale'         : 'true',
        touch : false,
        //touch: {
        //vertical: false, // Разрешить перетаскивание содержимого по вертикали
        //momentum: false // Продолжать движение после отпускания мыши или касания при панорамировании
        //},
        beforeClose : function( instance, current ) {
            urlka = window.location.href.split('#')[0];
            urlka = urlka.split('?')[0];
            history.replaceState(null, null, urlka);
        },
        beforeLoad: function(instance, item ) {
            console.log('opa');

        },
        afterLoad: function(){
            $('.product-complect-list .fx-proc-images').slick({
                arrows: false,
                dots: true,
                infinite: true,
                autoplay: false,
                speed: 500,
                autoplaySpeed: 3000,
                //slidesToShow: 1,
                slidesToScroll: 1,
                focusOnSelect: false,
            });
            //
            $('.fx-slider-popup-complects').slick({
                arrows: true,
                prevArrow: '<button type="button" class="defalult-slider-controls-arr-prev index-slide-m-prev" style="">prev</button>',
                nextArrow: '<button type="button" class="defalult-slider-controls-arr-next index-slide-m-next" style="">next</button>',
                dots: false,
                centerPadding: '0',
               // slidesToShow: 3,
                variableWidth : true,
                adaptiveHeight: true,
                infinite: false,
                responsive: [
                    {
                        breakpoint: 768,
                        settings: {
                            centerPadding: '40px',
                           // slidesToShow: 2
                        }
                    },
                    {
                        breakpoint: 840,
                        settings: {
                            centerPadding: '40px',
                           // slidesToShow: 2,
                           // initialSlide: 2
                        }
                    },
                    {
                        breakpoint: 480,
                        settings: {
                            arrows: false,
                            centerPadding: '40px',
                            //slidesToShow: 1,
                           // initialSlide: 1,
                        }
                    }
                ]
            });

        },
        afterClose: function(){
            $('.product-complect-list .fx-proc-images').slick('unslick');
        }

    });
// возможно не нужно.
    if(window.location.hash){
        var hashcode = window.location.href.split('#')[1];
        //console.log(hashcode);
        $('[href="#'+hashcode+'"]').eq(0).trigger('click');
        /* $(window).on('load',function(){
             // $('#promo-'+hashcode).modal('show');

         });*/

    }




    $(document).mouseup( function(e) {
        var div = $(".add_submenu .d-block");
        if (!div.is(e.target) && div.has(e.target).length === 0) {
            div.closest('li').removeClass('active');
        }
    });


    // Сплит и долями
    if ($(".fx-tov-page-price").length > 0) {
        //console.log('fx-tov');
        //$(".fx-tov-page-price").bind("DOMSubtreeModified", function() {});
        price = Number($(".fx-tov-page-price").data('price'));
        price4 = Math.round(price / 4).toLocaleString();
        price6 = Math.round(price / 6).toLocaleString();
        $(".fx-chasti-minimum").text(price6);
        $(".price4").text(price4);
        $(".price6").text(price6);
    }


    if ($(".fx-chasti-event-click").length > 0) {
        $(".fx-chasti-event-click").each(function (w,e) {
            console.log('zzz',w,e);
            pr = $(e).data('chasti-price')+'';
            price = Number(pr.replaceAll(' ', ''));
            price6 = Math.round(price / 6).toLocaleString();
            $(e).find(".fx-chasti-minimum").text(price6);
        });

        $(".fx-chasti-event-click").on('click', function () {
           itmprice = $(this).data('chasti-price')+'';
           console.log('itm',itmprice);

            price = Number(itmprice.replaceAll(' ', ''));
            price4 = Math.round(price / 4).toLocaleString();
            price6 = Math.round(price / 6).toLocaleString();
            //$(".fx-chasti-minimum").text(price6);
            $(".price4").text(price4);
            $(".price6").text(price6);

        });
    }
    if ($(".fx-page-cart .ms2_total_cost").length > 0) {
        $(".fx-page-cart .ms2_total_cost").bind("DOMSubtreeModified", function() {
            //console.log('fx-doom');
            price = Number($(".fx-page-cart .ms2_total_cost").text().replaceAll(' ', ''));
            price4 = Math.round(price / 4).toLocaleString();
            price6 = Math.round(price / 6).toLocaleString();
            $(".fx-chasti-minimum").text(price6);
            $(".price4").text(price4);
            $(".price6").text(price6);
        });
        $(".fx-page-cart .ms2_total_cost").attr('data-x',1);
    }



});
/*function load_cart(open_cart = false) {
    return;
}*//*
function alex_load_cart(open_cart = false) {
    console.log('[LOAD CART]',open_cart);
    $.ajax({
        type: "POST",
        url: 'cart/korzina-header/',
        data: {},
        success:  function(data) {
            if (data){
               // console.log('[LOAD CART DATA]',data);
                $('#minimsCart').html(data);

                /!*
                if(open_cart) {
                    var items = []
                    $('#minimsCart .product_item').each(function(i,p) {
                        var product = getValues($(this))
                        var count = parseInt($(this).find('[name="count"]').val())
                        product.quantity = count
                        items.push(product)
                    })
                    viewCart(items)
                }
                *!/

            } else {
                miniShop2.Message.error('Что-то пошло не так, попробуйте позже!');
            }
        }
    });
}*/

function load_delivery() {
    $.ajax({
        type: "POST",
        url: [
            location.protocol,
            '//',
            location.host,
            location.pathname
        ].join(''),
        data: {
            s_action: 'delivery_info',
            city: $('#city').val()
        },
        success: function(response) {
            if (response) {
                $('.delivery_description').html(response);
            } else {
                console.log('Что-то пошло не так, попробуйте позже!');
            }
        }
    });
}

/*

function minus_cart(obj) {
    let $input = $(obj).parent().find('input');
    let count = parseInt($input.val()) - 1;
    count = count < 1 ? 1 : count;
    $input.val(count);
    $input.change();
    $(obj).parent().find('button[name="ms2_action"]').trigger('click');
    setTimeout(function() {
        //load_cart()
    }, 300)
    return false;
};

function plus_cart(obj) {
    let $input = $(obj).parent().find('input');
    $input.val(parseInt($input.val()) + 1);
    $input.change();
    $(obj).parent().find('button[name="ms2_action"]').trigger('click');
    setTimeout(function() {
        //load_cart()
    }, 300)
    return false;
};

function reloadCart() {
	$(".basket_modal .modal-dialog").hide()
    setTimeout(function() {
        location.reload()
    }, 300)
}
*/


function validateEmail(email) {
    var re = /^(([^<>()[]\.,;:\s@“]+(.[^<>()[]\.,;:\s@”]+)*)|(“.+”))@(([[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}])|(([a-zA-Z-0-9]+.)+[a-zA-Z]{2,}))$/;
    return re.test(email);
}