/*! For license information please see pay.js.LICENSE.txt */
(()=>{var t={339:t=>{"use strict";t.exports=function(t){return t&&t[0]}},867:t=>{"use strict";t.exports=function(t){return t&&t.length}},907:(t,e,n)=>{"use strict";var o=n(476);t.exports=o(2,(function(t,e){void 0===e&&(e=[]);for(var n=e.length,o=new Array(n),r=0;r<n;r++)o[r]=t(e[r],r,e);return o}))},952:(t,e,n)=>{"use strict";var o=n(579),r=n(673),i=n(907),a=n(96),s=n(292);t.exports=function t(e){switch(o(e)){case"Object":if(s(e)||a(e))break;return r(t,e);case"Array":return i(t,e);case"Date":return new Date(e.valueOf());case"RegExp":return n=e,new RegExp(n.source,(n.global?"g":"")+(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.sticky?"y":"")+(n.unicode?"u":""))}var n;return e}},476:t=>{"use strict";t.exports=function(t,e){return function n(){for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return r.length>=t?e.apply(this,r):function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return n.apply(this,r.concat(e))}}}},970:t=>{"use strict";t.exports=function(){}},688:(t,e,n)=>{"use strict";var o=n(476);t.exports=o(2,(function(t,e){var n,o;return function(){for(var r=this,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];var u=Date.now(),c=n+t-u;n&&c>0?(clearTimeout(o),o=setTimeout((function(){n=u,e.apply(r,a)}),c)):(n=u,e.apply(this,a))}}))},292:(t,e,n)=>{"use strict";var o,r=n(235);try{o=n(986).isValidElementType}catch(t){}o||(o=function(t){return"string"==typeof t||"function"==typeof t||!!t&&r("$$typeof",t)}),t.exports=o},96:(t,e,n)=>{"use strict";var o,r=n(235);try{o=n(986).isElement}catch(t){}o||(o=function(t){return!!t&&r("$$typeof",t)}),t.exports=o},337:t=>{"use strict";t.exports=function(t){return"string"==typeof t||t instanceof String}},235:(t,e,n)=>{"use strict";var o=n(476);t.exports=o(2,(function(t,e){return null!=e&&Object.prototype.hasOwnProperty.call(e,t)}))},673:(t,e,n)=>{"use strict";var o=n(476);t.exports=o(2,(function(t,e){void 0===e&&(e={});var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=t(e[o],o,e));return n}))},843:(t,e,n)=>{"use strict";var o=n(476);t.exports=o(2,(function(t,e){void 0===t&&(t=[]),void 0===e&&(e={});for(var n=e,o=0;o<t.length;o++){if(null==n)return;n=n[t[o]]}return n}))},974:(t,e,n)=>{"use strict";var o=n(476),r=n(843);t.exports=o(3,(function(t,e,n){void 0===t&&(t=[]),void 0===n&&(n={});var o=r(t,n);return null!=o?o:e}))},401:(t,e,n)=>{"use strict";var o=n(476);t.exports=o(2,(function(t,e){return null!=e?e[t]:void 0}))},477:(t,e,n)=>{"use strict";var o=n(476),r=n(401);t.exports=o(3,(function(t,e,n){var o=r(t,n);return null!=o?o:e}))},296:(t,e,n)=>{"use strict";var o=n(782);t.exports=function(t){return o(t).join("_").toLowerCase()}},267:t=>{"use strict";t.exports=function(t){return void 0===t&&(t=""),t.toLowerCase()}},15:t=>{"use strict";t.exports=function(t){return void 0===t&&(t=""),t.toUpperCase()}},782:t=>{"use strict";var e=/([a-z])([A-Z])/g,n=/[^a-zA-Z]+/g;t.exports=function(t){return t.replace(e,(function(t,e,n){return e+" "+n})).split(n)}},579:t=>{"use strict";t.exports=function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}},979:(t,e)=>{"use strict";var n,o=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen");function v(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case o:switch(t=t.type){case i:case s:case a:case h:case f:return t;default:switch(t=t&&t.$$typeof){case d:case c:case l:case m:case p:case u:return t;default:return e}}case r:return e}}}n=Symbol.for("react.module.reference"),e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===o},e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===i||t===s||t===a||t===h||t===f||t===y||"object"==typeof t&&null!==t&&(t.$$typeof===m||t.$$typeof===p||t.$$typeof===u||t.$$typeof===c||t.$$typeof===l||t.$$typeof===n||void 0!==t.getModuleId)}},986:(t,e,n)=>{"use strict";t.exports=n(979)},157:(t,e,n)=>{var o=n(54).default;function r(){"use strict";t.exports=r=function(){return n},t.exports.__esModule=!0,t.exports.default=t.exports;var e,n={},i=Object.prototype,a=i.hasOwnProperty,s=Object.defineProperty||function(t,e,n){t[e]=n.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",d=u.asyncIterator||"@@asyncIterator",l=u.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(e){h=function(t,e,n){return t[e]=n}}function f(t,e,n,o){var r=e&&e.prototype instanceof w?e:w,i=Object.create(r.prototype),a=new W(o||[]);return s(i,"_invoke",{value:B(t,n,a)}),i}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}n.wrap=f;var m="suspendedStart",y="suspendedYield",v="executing",g="completed",b={};function w(){}function k(){}function S(){}var C={};h(C,c,(function(){return this}));var P=Object.getPrototypeOf,x=P&&P(P(A([])));x&&x!==i&&a.call(x,c)&&(C=x);var E=S.prototype=w.prototype=Object.create(C);function M(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(r,i,s,u){var c=p(t[r],t,i);if("throw"!==c.type){var d=c.arg,l=d.value;return l&&"object"==o(l)&&a.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,s,u)}),(function(t){n("throw",t,s,u)})):e.resolve(l).then((function(t){d.value=t,s(d)}),(function(t){return n("throw",t,s,u)}))}u(c.arg)}var r;s(this,"_invoke",{value:function(t,o){function i(){return new e((function(e,r){n(t,o,e,r)}))}return r=r?r.then(i,i):i()}})}function B(t,n,o){var r=m;return function(i,a){if(r===v)throw Error("Generator is already running");if(r===g){if("throw"===i)throw a;return{value:e,done:!0}}for(o.method=i,o.arg=a;;){var s=o.delegate;if(s){var u=O(s,o);if(u){if(u===b)continue;return u}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(r===m)throw r=g,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);r=v;var c=p(t,n,o);if("normal"===c.type){if(r=o.done?g:y,c.arg===b)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(r=g,o.method="throw",o.arg=c.arg)}}}function O(t,n){var o=n.method,r=t.iterator[o];if(r===e)return n.delegate=null,"throw"===o&&t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),b;var i=p(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function W(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(a.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(o(t)+" is not iterable")}return k.prototype=S,s(E,"constructor",{value:S,configurable:!0}),s(S,"constructor",{value:k,configurable:!0}),k.displayName=h(S,l,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,h(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},n.awrap=function(t){return{__await:t}},M(I.prototype),h(I.prototype,d,(function(){return this})),n.AsyncIterator=I,n.async=function(t,e,o,r,i){void 0===i&&(i=Promise);var a=new I(f(t,e,o,r),i);return n.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},M(E),h(E,l,"Generator"),h(E,c,(function(){return this})),h(E,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),n=[];for(var o in e)n.push(o);return n.reverse(),function t(){for(;n.length;){var o=n.pop();if(o in e)return t.value=o,t.done=!1,t}return t.done=!0,t}},n.values=A,W.prototype={constructor:W,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(o,r){return s.type="throw",s.arg=t,n.next=o,r&&(n.method="next",n.arg=e),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=a.call(i,"catchLoc"),c=a.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&a.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var i=r?r.completion:{};return i.type=t,i.arg=e,r?(this.method="next",this.next=r.finallyLoc,b):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),R(n),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var r=o.arg;R(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:A(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),b}},n}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},54:t=>{function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},998:(t,e,n)=>{var o=n(157)();t.exports=o;try{regeneratorRuntime=o}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.p="/web/sdk/v1/",(()=>{"use strict";function t(t,e){if(null==t)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(e.includes(o))continue;n[o]=t[o]}return n}var e=["url","reqid"],o={url:"https://pay.yandex.ru",reqid:""};function r(n){void 0===n&&(n={});var r=n,i=r.url,a=void 0===i?o.url:i,s=r.reqid,u=void 0===s?o.reqid:s,c=t(r,e);return o=Object.assign(o,{url:a,reqid:u}),c}var i,a=5,s=500,u=[];function c(){if(o.url&&0!==u.length){var t=u.join("\r\n");u=[],i=null;var e=o.url+"/cl/click";if(!(Boolean(navigator.sendBeacon)&&navigator.sendBeacon(e,t))){var n=new XMLHttpRequest;n.open("POST",e),n.send(t)}}}function d(){i&&clearTimeout(i),c()}function l(t,e,n){i&&clearTimeout(i);var r,d=function(t,e,n,o){return[t?"/reqid="+t:"",o&&o.length?"/"+o.join("/"):"",e?"/path="+e:"",n?"/vars="+n:"","/cts="+Date.now(),"/*"].join("")}(o.reqid,t,(r=e,Object.entries(r).reduce((function(t,e){var n=e[0],o=e[1];return!o&&0!==o||"string"!=typeof o&&"number"!=typeof o&&"boolean"!=typeof o||t.push(n+"="+encodeURIComponent(o).replace(/\*/g,"%2A")),t}),new Array).join(",")),n);u.push(d),u.length<a?i=setTimeout(c,s):c()}window.addEventListener("beforeunload",d),window.addEventListener("unload",d),window.addEventListener("blur",d);var h=function(t){return Object.keys(t).map((function(e){return encodeURIComponent(e+"="+t[e])})).join(";")};function f(){try{return document.createEvent("TouchEvent"),"touch"}catch(t){return"desktop"}}var p=["experiments","testIds","boxes"],m={env:"production",initTimestamp:0,page:"",project:"pay",platform:f(),version:"0.0.0",sessionId:"",merchantId:"",experiments:"",sheetEnv:"",testIds:""};function y(e){var n=e.experiments,o=e.testIds,i=e.boxes,a=t(e,p);n&&(a.experiments=h(n)),i?a.testIds=i:o&&o.length&&(a.testIds=o.map(encodeURIComponent).join(";")),m=Object.assign({},m,r(a))}function v(t){return void 0===t&&(t={}),{rum_id:"ru."+m.project+"."+m.platform,"-version":m.version,"-env":m.env,"-project":m.project,"-page":m.page,"-platform":m.platform,"-additional":JSON.stringify(Object.assign({sessionId:m.sessionId,merchantId:m.merchantId||m.sessionId.split(".")[0],env:m.sheetEnv},t))}}function g(){var t=[];return m.experiments&&t.push("experiments="+m.experiments),m.testIds&&t.push("slots="+m.testIds),t}function b(t,e){try{return JSON.parse(t)}catch(t){return e}}var w,k=function(){function t(t){this.adapter=t,this.enabled=void 0;var e=String(Date.now());this.setItem(e,e);var n=this.getItem(e);this.removeItem(e),this.enabled=e===n}var e=t.prototype;return e.setObj=function(t,e){return this.setItem(t,JSON.stringify(e))},e.getObj=function(t,e){void 0===e&&(e=null);var n=this.getItem(t);return n?b(n,e):e},e.setItem=function(t,e){try{this.adapter.setItem(t,e)}catch(t){}},e.getItem=function(t){try{return this.adapter.getItem(t)}catch(t){return null}},e.removeItem=function(t){try{return this.adapter.removeItem(t)}catch(t){return}},t}();new k(window.sessionStorage);try{w=new k(window.localStorage)}catch(t){w=new k(window.sessionStorage)}var S=w,C=function(t){return void 0===t&&(t=5),Math.random().toString(16).slice(2,2+t)},P="_yp_vid",x="_yp_vlh",E=18e5;var M=function(){var t=S.getItem(P),e=S.getItem(x);function n(){S.enabled?(t=[btoa(location.host).substring(0,12),C(8),Date.now()].join("."),S.setItem(P,t)):t="no-vid"}function o(){t&&!function(t){var e=Number(new Date(t));if(!t||Number.isNaN(e))return!0;var n=Date.now();return n-e>E||e-n>E}(Number(e))||n(),e=String(Date.now()),S.setItem(x,e)}return{getVisitId:function(){var e;return o(),null!==(e=t)&&void 0!==e?e:""},hit:o}}(),I=n(974),B=n.n(I),O=function(t,e,n){return void 0===n&&(n=void 0),B()(["flags",e],n,t)},T=function(t,e,n){var o=O(t,e);return void 0!==o&&(void 0===n||o===n)},R=function(t){},W={flags:{}},A={fn:R},_=new Promise((function(t){A.fn=function(e){var n=e.flags,o=e.experiments,r=e.testIds,i=e.boxes;A.fn=R,t(W={flags:n,experiments:o,testIds:r,boxes:i})}})),U=function(t,e){return new Promise((function(n){_.then((function(o){return n(T(o,t,e))}))}))};function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function D(t){var e=function(t,e){if("object"!=L(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=L(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==L(e)?e:e+""}function j(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,D(o.key),o)}}function F(t,e,n){return e&&j(t.prototype,e),n&&j(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function N(t,e){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},N(t,e)}function K(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,N(t,e)}function z(t,e){try{return JSON.parse(t)}catch(t){return e}}function V(t){var e=t.message,n=t.level,o=void 0===n?"error":n,r=t.additional,i=m,a=v();return Object.assign({},a,{"-msg":e,"-level":o,"-additional":JSON.stringify(Object.assign({},z(a["-additional"],{}),r)),"-ua":navigator.userAgent,"-ts":Date.now(),"-init-ts":i.initTimestamp})}function q(t){return function(e,n){var o=n instanceof Error?{error:n.message}:n;l("690.2354",V({level:t,message:e,additional:o}),g())}}var H=q("fatal"),Y=q("error"),Z=q("warn"),$=q("info"),G=q("debug");function J(t){window.location.assign(t)}function Q(){return window.location.toString()}function X(t,e){void 0===e&&(e="");try{return new URL(t).origin}catch(t){return e}}function tt(t,e){void 0===e&&(e="");try{return new URL(t).pathname}catch(t){return e}}function et(t,e){void 0===e&&(e="");try{var n=new URL(t);return[n.origin,n.pathname].join("")}catch(t){return e}}function nt(t){var e=function(t,e){void 0===e&&(e="");try{return new URL(t).search.slice(1)}catch(t){return e}}(t),n=new URLSearchParams(e),o={};return n.forEach((function(t,e){o[e]=t})),o}function ot(t,e,n){void 0===n&&(n="");try{var o=new URL(t),r=function(t){var e=Object.entries(t).filter((function(t){return void 0!==t[1]}));return new URLSearchParams(e).toString()}(Object.assign({},nt(t),e));return o.search=r,o.toString()}catch(t){return n}}var rt,it="*",at="*",st="__YP__",ut="__FQM__",ct=function(){return F((function(t){var e,n,o,r;void 0===t&&(t={}),this.targetUrl=void 0,this.channel=void 0,this.sessionId=void 0,this._sourceSearch=void 0,this.targetUrl=null!==(e=t.targetUrl)&&void 0!==e?e:"/",this.channel=null!==(n=t.channel)&&void 0!==n?n:at,this.sessionId=null!==(o=t.sessionId)&&void 0!==o?o:"",this._sourceSearch=null!==(r=t.sourceSearch)&&void 0!==r?r:""}),[{key:"targetOrigin",get:function(){return X(this.targetUrl)||it}},{key:"sourceUrl",get:function(){var t=Q();return window.location.search?t:t+"?"+this._sourceSearch}},{key:"sourceOrigin",get:function(){return X(this.sourceUrl)||it}},{key:"isInitialized",get:function(){return"/"!==this.targetUrl}}])}(),dt=function(t){try{return t()}catch(t){return}},lt=function(t){this.options=t},ht=function(){function t(t,e,n){void 0===e&&(e=at),this.payload=t,this.channel=e,this.sourceUrl=n}var e=t.prototype;return e.toJSON=function(){return this.sourceUrl?{payload:this.payload,channel:this.channel,sourceUrl:this.sourceUrl}:{payload:this.payload,channel:this.channel}},e.toString=function(){return JSON.stringify(this)},F(t,[{key:"origin",get:function(){return this.sourceUrl&&X(this.sourceUrl)||it}}])}(),ft=(n(998),function(){try{document.createEvent("TouchEvent");var t="ontouchstart"in window||navigator.maxTouchPoints;return Boolean(t)}catch(t){return!1}}),pt=function(t){return/Android/i.test(t)},mt=function(t){return pt(t)&&(/wv|WebView/i.test(t)||/Version\/\d+.*\/\d+.0.0.0 Mobile/i.test(t))},yt=function(t){return/iphone|ipod|ipad/i.test(t)},vt=function(t){return/safari/i.test(t)},gt=function(t){return yt(t)&&!vt(t)},bt=navigator.userAgent,wt=/Firefox/i.test(bt),kt=function(t){return/safari/i.test(t)&&!/crios|fxios|chrome|EdgiOS|YaBrowser/i.test(t)}(bt),St=(vt(bt),pt(bt)),Ct=(mt(bt),yt(bt)),Pt=(gt(bt),function(t){return/YaBrowser|BroPP/i.test(t)}(bt)),xt=(function(t){var e=/bank-sdk\/(\d+\.\d+\.\d+)\b.*\((ios|android)\)/i.exec(t);Boolean(e)}(bt),function(t){gt(t)||mt(t)}(bt),function(t){var e=/PassportSDK\/(\d+\.\d+\.\d+)/i.exec(t);if(Boolean(e))return!0;var n=/YandexPaySDK\/(\d+\.\d+\.\d+)/i.exec(t);return!!Boolean(n)}(bt)),Et=(xt&&function(t){var e=t.split(" ");e[e.length-1]}(bt),function(t,e){var n;yt(t)&&Boolean(null===(n=e.webkit)||void 0===n?void 0:n.messageHandlers)}(bt,window),function(t,e){yt(t)&&e.indexedDB}(bt,window),function(t){var e,n=/WebView/i.test(t.userAgent),o=Boolean(null===(e=t.userAgentData)||void 0===e?void 0:e.brands.some((function(t){return/WebView/i.test(t.brand)})))}(navigator),rt=window,Boolean(rt.ReactNativeWebView),function(t){Boolean(t.flutter_inappwebview)}(window),function(){return window.top}),Mt=function(){var t;return mt(navigator.userAgent)?null:null===(t=Et())||void 0===t?void 0:t.opener},It=function(t,e,n){var o;return void 0===n&&(n=!1),ot(t,((o={})[st]=e,o[ut]=n?"1":void 0,o))},Bt=function(t,e){if(t.origin!==e.targetOrigin&&t.origin!==it&&e.targetOrigin!==it&&t.origin!==location.origin)throw new Error("Failed to process a message with a different origin\n message origin — "+t.origin+"\n target origin — "+e.targetOrigin);if(t.channel!==e.channel&&t.channel!==at&&e.channel!==at)throw new Error("Failed to process a message with a different channel\n message channel — "+t.channel+"\n current channel — "+e.targetOrigin);return t},Ot=function(t){var e=JSON.parse(t.data),n=e.sourceUrl&&X(e.sourceUrl)===t.origin?e.sourceUrl:t.origin;return new ht(e.payload,e.channel,n)},Tt={},Rt=function(t){if(!Tt[t])try{Tt[t]=new BroadcastChannel(t)}catch(e){Tt[t]={onmessage:function(){},addEventListener:function(){},removeEventListener:function(){},postMessage:function(){},close:function(){}}}return Tt[t]},Wt=function(){return Boolean(window.BroadcastChannel)},At=function(t){function e(e,n){var o;return void 0===n&&(n=Mt()),(o=t.call(this,e)||this)._target=null,o.setTarget(n),o}K(e,t);var n=e.prototype;return n.setTarget=function(t){if(this._target=t,!this.isConnected)throw new TypeError("Target is not set or closed.")},n.createMessage=function(t){return new ht(t,this.options.channel,this.options.sourceUrl)},n.send=function(t){var e=this;if(this.isConnected){var n=this.createMessage(t);dt((function(){var t;null===(t=e.target)||void 0===t||t.postMessage(String(n),e.options.targetOrigin)}))}},n.destroy=function(){this._target=null},F(e,[{key:"target",get:function(){return this._target}},{key:"isConnected",get:function(){return Boolean(this.target&&!this.target.closed)}}])}(lt),_t=function(){function t(){this.listeners=[]}var e=t.prototype;return e.emit=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.listeners.forEach((function(t){t.apply(void 0,e)}))},e.on=function(t){var e=this;return this.listeners.push(t),function(){e.off(t)}},e.off=function(t){this.listeners=this.listeners.filter((function(e){return e!==t}))},e.destroy=function(){this.listeners=[]},t}(),Ut=function(t){function e(e){var n;return(n=t.call(this)||this).options=e,n}return K(e,t),e.prototype.processMessage=function(t){var e=Bt(t,this.options);this.emit(e.payload,e)},e}(_t),Lt=function(t){function e(e){var n;return(n=t.call(this,e)||this).onMessage=function(t){try{var e=Ot(t);n.processMessage(e)}catch(t){0}},window.addEventListener("message",n.onMessage),n}return K(e,t),e.prototype.destroy=function(){window.removeEventListener("message",this.onMessage)},e}(Ut),Dt=n(337),jt=n.n(Dt),Ft=function(t,e){return void 0===e&&(e=document),e?jt()(t)?e.querySelector(t):t:null};function Nt(t,e){var n=Ft(t);n&&n.classList.remove(e)}function Kt(t,e){var n=Ft(t);n&&n.classList.add(e)}function zt(t,e,n,o){if(t){var r=Ft(t);r&&r.removeEventListener(e,n,o)}}function Vt(t,e,n){if(void 0===n&&(n=!1),t){var o=Ft(t);o&&Object.keys(e).forEach((function(t){o.style.setProperty(t,String(e[t]),n?"important":void 0)}))}}var qt={remove:function(t){var e=Ft(t);e&&e.parentElement&&e.parentElement.removeChild(e)},add:function(t,e,n){var o=Ft(t);o&&n?o.insertBefore(e,n):o&&o.appendChild(e)},removeClass:Nt,addClass:Kt,toggleClass:function(t,e,n){n?Kt(t,e):Nt(t,e)},findNode:Ft,off:zt,on:function(t,e,n,o){if(!t)return function(){};var r=Ft(t);return r?(r.addEventListener(e,n,o),function(){return zt(r,e,n,o)}):function(){}},attrs:function(t,e){var n=Ft(t);n&&Object.keys(e).forEach((function(t){n.setAttribute(t,String(e[t]))}))},style:Vt,hide:function(t,e){void 0===e&&(e=!1),Vt(t,{display:"none"},e)},show:function(t,e,n){void 0===e&&(e="block"),void 0===n&&(n=!1),Vt(t,{display:e},n)},getCssProp:function(t,e){var n=Ft(t);return n?getComputedStyle(n)[e]:null},animate:function(t,e){var n,o=e.timingFunction,r=void 0===o?"ease-in-out":o,i=e.duration,a=void 0===i?"200ms":i,s=e.delay,u=void 0===s?"0":s,c=e.property,d=e.from,l=e.to;Ft(t)&&(Vt(t,((n={"transition-timing-function":r,"transition-duration":a,"transition-delay":u,"transition-property":c})[c]=d,n)),setTimeout((function(){var e;Vt(t,((e={})[c]=l,e))}),0))}},Ht=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(t,e){var n=this;return this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(e),function(){return n.off(t,e)}},e.once=function(t,e){var n=this,o=function(r){n.off(t,o),e.call(n,r)};return this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(o),function(){return n.off(t,o)}},e.off=function(t,e){e?this.listeners[t]=(this.listeners[t]||[]).filter((function(t){return e!==t})):delete this.listeners[t]},e.emit=function(t,e){var n=this;(this.listeners[t]||[]).forEach((function(t){t.call(n,e)}))},e.clear=function(){this.listeners={}},e.destroy=function(){this.clear()},t}(),Yt=function(t){return t.Simple="SIMPLE",t.Pay="PAY",t.Checkout="CHECKOUT",t}({}),Zt=function(t){return t.White="WHITE",t.WhiteOutlined="WHITE-OUTLINED",t.Black="BLACK",t}({}),$t=function(t){return t.Auto="AUTO",t.Max="MAX",t.MaxImportant="MAX_IMPORTANT",t}({}),Gt=function(t){return t.Click="CLICK",t}({}),Jt=function(t){return t.Widget="WIDGET",t.WidgetUser="WIDGET_USER",t}({}),Qt=function(t){return t.Mini="Mini",t.Compact="Compact",t.Simple="Simple",t.BnplOffer="BnplOffer",t.BnplRequired="BnplRequired",t.BnplPreview="BnplPreview",t.Info="Info",t.Ultimate="Ultimate",t}({}),Xt=function(t){return t.Default="default",t.None="none",t}({}),te=function(t){return t.Medium="medium",t.Small="small",t}({}),ee=function(t){return t.Default="default",t.White="white",t.Transparent="transparent",t}({}),ne=(Qt.Mini,Qt.Compact,Qt.BnplOffer,Qt.BnplRequired,Qt.Ultimate,Qt.BnplPreview,[Qt.BnplOffer,Qt.BnplRequired]),oe=function(t){return t.Light="LIGHT",t.Dark="DARK",t}({}),re=function(t,e,n,o,r){var i=t[e];return n.includes(i)?i:((r||void 0!==i)&&(Z('SDK: Invalid "'+String(e)+'" option',{value:i}),console.warn('The "'+String(e)+'" option should be one of — '+n.join(", ")+".")),o)},ie=function(t,e){var n=Object.assign({},e,t);return n.type=re(n,"type",Object.values(Yt),e.type,!1),n.theme=re(n,"theme",Object.values(Zt),e.theme,!1),n.width=re(n,"width",Object.values($t),e.width,!1),n},ae=function(t,e){var n=Object.assign({},e,t),o=n.bnplSelected,r=n.borderRadius,i=n.hideWidgetHeader;return n.buttonType=re(n,"buttonType",Object.values(Yt),e.buttonType,!1),"boolean"!=typeof o&&void 0!==o&&(n.bnplSelected=e.bnplSelected,Z('SDK: Invalid "bnplSelected" option',{bnplSelected:o}),console.warn('The "bnplSelected" option should be boolean.')),n.borderRadius=Number(n.borderRadius),Number.isFinite(n.borderRadius)||(n.borderRadius=e.borderRadius,Z('SDK: Invalid "borderRadius" option',{borderRadius:r}),console.warn('The "borderRadius" option should be number (px).')),n.buttonTheme=re(n,"buttonTheme",Object.values(Zt),e.buttonTheme,!1),n.widgetTheme=re(n,"widgetTheme",Object.values(oe),e.widgetTheme,!1),n.widgetType=re(n,"widgetType",Object.values(Qt),e.widgetType,!1),"boolean"!=typeof i&&void 0!==i&&(n.hideWidgetHeader=e.hideWidgetHeader,Z('SDK: Invalid "hideWidgetHeader" option',{hideWidgetHeader:i}),console.warn('The "hideWidgetHeader" option should be boolean.')),"boolean"!=typeof n.isPrepayment&&(n.isPrepayment=!1),n};var se,ue,ce,de="https://pay.yandex.ru/web",le="https://pay.yandex.ru",he=de+"/form",fe=de+"/payment",pe=de+"/checkout",me=de+"/sdk/v1/init-2",ye=de+"/sdk/v1/payment-method",ve=de+"/sdk/v1/widget",ge=de+"/f/info-widget",be=de+"/f/ultimate-widget",we=de+"/f/simple-widget",ke=de+"/f/simple-widget-modal",Se=de+"/sdk/v1/info-widget",Ce=[960,705],Pe=[510,(se=820,ue=window.screen.height,Math.min(ue,se))],xe="ya-pay-button",Ee="ya-pay-widget",Me="ya-pay-backdrop",Ie="yandex-pay-badge",Be=de,Oe="testing"===(ce="production_vr8p6z9pn3".split("_")[0])?ce:"production",Te=function(t){return t.SdkByTokenRequest="sdk--by-token-request",t.SdkByTokenRequestError="sdk--by-token-request.error",t.SdkRemountStickyButton="sdk--remount-sticky-button",t}({}),Re=""+(.001*Date.now()|0)+(1073741824*Math.random()|0),We=""+(1e3*Math.random()|0)+(.001*Date.now()|0),Ae="sdk-"+(1e3*Math.random()|0)+(.001*Date.now()|0),_e=75,Ue=32,Le=function(t){return null!==t&&"object"==typeof t},De=function(t){return"function"==typeof t},je=function(t){return(Le(t)||De(t))&&De(t.then)},Fe=new function(t){var e=this;for(var n in this.data=void 0,this.reactPairs=new Map,this.setPair=function(t,n){return e.reactPairs.set(t,n)},this.getPair=function(t){return e.reactPairs.get(t)},this.createPairPromise=function(t){var n,o=new Promise((function(t){n=t}));return e.setPair(t,[o,n]),o},this.set=function(t,n){var o;return null!=n&&(e.data[t]=n,null===(o=e.getPair(t))||void 0===o||o[1](n),!0)},this.get=function(t){return e.data[t]},this.getP=function(t){var n=e.getPair(t);return n?n[0]:e.createPairPromise(t)},this.data=t,this.data)this.createPairPromise(n)}({hasNewPRA:!1,disabledPRA:!1,blacklistSW:new Set,enabledSW:!1,blacklistBT:new Set,enabledBT:!1,split006En:!1,split006BL:new Set,split006WL:new Set}),Ne=function(t,e){var n=void 0===e?{}:e,o=n.src,r=n.hideThrowOpacity,i=document.createElement("iframe");return qt.attrs(i,{name:t,title:t,frameborder:"0",tabindex:"-1","aria-hidden":"true"}),o&&qt.attrs(i,{src:o}),r?qt.style(i,{opacity:"0"}):qt.hide(i),i},Ke=function(t,e,n){var o=document.createElement("iframe"),r="ya-frame-"+C(8);return e&&qt.style(o,e),qt.attrs(o,Object.assign({src:t,name:r,title:r,frameborder:"0",tabindex:"-1","aria-hidden":"true"},n?{class:n}:{})),o},ze=n(339),Ve=n.n(ze),qe=n(867),He=n.n(qe),Ye=n(843),Ze=n.n(Ye),$e=function(t){return t.Token="Token",t.Payment="Payment",t.Checkout="Checkout",t.CheckoutOld="CheckoutOld",t.Subscription="Subscription",t.ByToken="ByToken",t}({}),Ge=function(t){return t.Production="PRODUCTION",t.Sandbox="SANDBOX",t}({}),Je=function(t){return t.Ru="RU",t.Us="US",t.By="BY",t}({}),Qe=function(t){return t.Rub="RUB",t.Byn="BYN",t.Usd="USD",t.Eur="EUR",t.Kzt="KZT",t.Uah="UAH",t.Amd="AMD",t.Gel="GEL",t.Azn="AZN",t.Kgs="KGS",t.Gbp="GBP",t.Sek="SEK",t.Pln="PLN",t.Inr="INR",t.Czk="CZK",t.Cad="CAD",t.Brl="BRL",t.Aud="AUD",t.Uzs="UZS",t.Chf="CHF",t.Try="TRY",t.Cny="CNY",t.Zar="ZAR",t.Bgn="BGN",t.Ron="RON",t.Hkd="HKD",t.Aed="AED",t}({}),Xe=function(t){return t.Pickup="PICKUP",t.Shipping="SHIPPING",t.Discount="DISCOUNT",t.Promocode="PROMOCODE",t}({}),tn=function(t){return t.Card="CARD",t.Cash="CASH",t.Split="SPLIT",t}({}),en=function(t){return t.CloudToken="CLOUD_TOKEN",t.PanOnly="PAN_ONLY",t}({}),nn=function(t){return t.AmericanExpress="AMEX",t.Discover="DISCOVER",t.Jcb="JCB",t.Mastercard="MASTERCARD",t.Visa="VISA",t.VisaElectron="VISAELECTRON",t.Maestro="MAESTRO",t.Mir="MIR",t.UnionPay="UNIONPAY",t.Uzcard="UZCARD",t}({}),on=function(t){return t.Recurring="RECURRING",t.Deferred="DEFERRED",t}({}),rn=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((function(t,e){return t+function(t,e){void 0===e&&(e=0);var n=Number(t);return isNaN(n)?e:n}(e)}),0).toFixed(2)};function an(t){return!!t&&(3===parseInt(null==t?void 0:t.version)&&!("merchant"in t))}function sn(t){return!!t&&(2===parseInt(null==t?void 0:t.version)||"merchant"in t)}function un(t){return 4===(null==t?void 0:t.version)}function cn(t){return B()(["merchant","url"],"",t)}var dn=function(t){return an(t)||un(t)?B()(["merchantId"],"",t):B()(["merchant","id"],"",t)},ln=function(t){return B()(["version"],void 0,t)},hn=function(t){return an(t)?B()(["orderId"],void 0,t):B()(["order","id"],void 0,t)},fn=function(t){return B()(["total","amount"],"",t)||rn.apply(void 0,B()(["items"],[],t).map((function(t){return t.total})))};var pn=function(t){return un(t)?B()(["totalAmount"],"0",t):an(t)?function(t){return fn(t.cart)}(t):function(t){return B()(["order","total","amount"],"0",t)}(t)};function mn(t){return B()(["currencyCode"],"",t)}function yn(t){var e=Ze()(["requiredFields","shippingTypes"],t);if(e)return{direct:B()(["direct"],!1,e),pickup:B()(["pickup"],!1,e)}}function vn(t){var e=Ze()(["requiredFields","shippingContact"],t);if(e)return{name:B()(["name"],!0,e),email:B()(["email"],!0,e),phone:B()(["phone"],!1,e)}}function gn(t){return an(t)||un(t)?B()(["availablePaymentMethods"],[],t):B()(["paymentMethods"],[],t).map((function(t){return t.type}))}function bn(t){return Boolean(vn(t)||yn(t))||t.type&&[$e.Checkout,$e.CheckoutOld].includes(t.type)}function wn(t){return(an(t)||un(t))&&t.availablePaymentMethods&&1===He()(t.availablePaymentMethods)&&Ve()(t.availablePaymentMethods)===tn.Split}function kn(t){return[dn(t),C(8),Date.now()].join(".")}function Sn(t){return Sn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sn(t)}function Cn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Cn=function(){return!!t})()}function Pn(t){var e="function"==typeof Map?new Map:void 0;return Pn=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(Cn())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,e);var r=new(t.bind.apply(t,o));return n&&N(r,n.prototype),r}(t,arguments,Sn(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),N(n,t)},Pn(t)}var xn,En=function(t){function e(){return t.apply(this,arguments)||this}return K(e,t),e}(Pn(Error)),Mn=function(t){function e(){return t.apply(this,arguments)||this}return K(e,t),e}(Pn(Error));function In(t,e){if(!t){var n=new En(e);throw $("assert-error",n),n}}function Bn(t){if(an(t)||un(t))return!1;var e=t.requiredFields;return Boolean(e&&("shippingContact"in e||"shippingTypes"in e))}function On(t){an(t)&&function(t,e){return Le(e)&&Object.prototype.hasOwnProperty.call(e,t)}("metadata",t)&&(In("string"==typeof t.metadata,"sheet.metadata must be a string"),"string"==typeof t.metadata&&In(encodeURIComponent(t.metadata).length<=512,"sheet.metadata is too long"))}function Tn(t){var e;if(an(t)||un(t))return{allowedAuthMethods:[],allowedCardNetworks:[]};var n=null===(e=t.paymentMethods)||void 0===e?void 0:e.find((function(t){return t.type===tn.Card}));if(!n)return{allowedAuthMethods:[],allowedCardNetworks:[]};var o=n.allowedAuthMethods,r=void 0===o?[]:o,i=n.allowedCardNetworks;return{allowedAuthMethods:r,allowedCardNetworks:void 0===i?[]:i}}function Rn(t){return sn(t)?t.merchant:{id:t.merchantId,url:"",name:""}}var Wn=function(t){return t.type?t.type:un(t)?$e.ByToken:an(t)?t.orderId?$e.Payment:$e.Checkout:Bn(t)?$e.CheckoutOld:$e.Token},An=function(t){return[$e.Payment,$e.Checkout].includes(t)},_n=function(t,e){return sn(t)&&"order"in e?(t.order=Object.assign({},t.order,e.order),!0):an(t)&&("cart"in e||"metadata"in e)?(t.cart=Object.assign({},t.cart,e.cart),t.metadata=e.metadata||t.metadata,!0):!(!un(t)||!("totalAmount"in e))&&(t.totalAmount=e.totalAmount||t.totalAmount,!0)},Un=((xn={})[$e.Token]="payment",xn[$e.Payment]="payment-v3",xn[$e.Checkout]="checkout-v3",xn[$e.CheckoutOld]="checkout",xn[$e.Subscription]="subscription",xn[$e.ByToken]="payment-v3",xn);function Ln(t){return t.replace(/^https:\/\/pay\.yandex\./,"https://sandbox.pay.yandex.")}var Dn=function(t,e){void 0===e&&(e={});var n={};if(n.abuid=We,n.ymuid=Re,e.amAuth&&(n.ama="1"),e.rpcs&&(n.rpcs=e.rpcs),e.sessionType&&(n.pt=Un[e.sessionType],n.st=e.sessionType),e.duid&&(n.duid=e.duid),e.extra&&(n.extra=JSON.stringify(e.extra)),t){var o=function(t,e){var n=e?"click-"+e:"";return n?[t,n]:[t]}(t,e.checkoutCounter);n.msid=o[0]||"",n.mcid=o[1]||""}return e.sdkInIframe&&(n.sifrm="1"),e.merchantId&&(n.merchantId=e.merchantId),n},jn=function(t,e,n){void 0===n&&(n={});var o=t,r=Dn(e,n);return n.env===Ge.Sandbox&&(o=Ln(t)),ot(o,r)};function Fn(t){return X(t)}var Nn=function(t,e){var n;return void 0===e&&(e=0),setTimeout(t,null!==(n=e)&&void 0!==n?n:1e3)},Kn=function(t,e,n){var o;void 0===n&&(n=0);var r=function(){if(t())return e();o=Nn(r,n)};return r(),function(){o&&clearTimeout(o)}},zn=function(t){return void 0===t&&(t=""),t+"-"+ ++zn.counter};function Vn(t,e){return"string"==typeof t?encodeURIComponent(t):Math.round(1e3*(t-(e||0)))/1e3}zn.counter=0;var qn={};function Hn(t,e,n){void 0===n&&(n={});var o=v(n),r={1701:t,2877:Vn(e)};Object.entries(o).forEach((function(t){var e=t[0],n=t[1];r[e]=String(n)})),l("690.2096.2877",r,g())}function Yn(t){qn[t]=[Date.now()]}function Zn(t){var e=qn[t];e&&0!==e.length&&(e.push(Date.now(),v()),function(t){var e,n,o,r=qn[t],i=void 0;if(r&&(n=r[0],o=r[1],i=r[2]),void 0!==n&&void 0!==o){var a={1701:t,207.2154:Vn(n),207.1428:Vn(o),2877:Vn(o-n)};Object.entries(null!==(e=i)&&void 0!==e?e:{}).forEach((function(t){var e=t[0],n=t[1];a[e]=String(n)})),l("690.2096.2877",a),delete qn[t]}}(t))}var $n=function(t){return t[t.InitFrameCreationStarted=0]="InitFrameCreationStarted",t[t.InitFrameCreated=1]="InitFrameCreated",t[t.FirstSessionCreationStarted=2]="FirstSessionCreationStarted",t[t.SessionCreationStarted=3]="SessionCreationStarted",t[t.SessionCreated=4]="SessionCreated",t[t.FirstViewMountingStarted=5]="FirstViewMountingStarted",t[t.WidgetMountingStarted=6]="WidgetMountingStarted",t[t.WidgetMounted=7]="WidgetMounted",t[t.SimpleButtonMountingStarted=8]="SimpleButtonMountingStarted",t[t.SimpleButtonMounted=9]="SimpleButtonMounted",t[t.PersonalButtonMountingStarted=10]="PersonalButtonMountingStarted",t[t.PersonalButtonMounted=11]="PersonalButtonMounted",t[t.SimpleWidget_MountingStarted=12]="SimpleWidget_MountingStarted",t[t.SimpleWidget_Mounted=13]="SimpleWidget_Mounted",t[t.SimpleWidgetModal_MountingStarted=14]="SimpleWidgetModal_MountingStarted",t[t.SimpleWidgetModal_Mounted=15]="SimpleWidgetModal_Mounted",t[t.InfoWidget_MountingStarted=16]="InfoWidget_MountingStarted",t[t.InfoWidget_Mounted=17]="InfoWidget_Mounted",t[t.UltimateWidget_MountingStarted=18]="UltimateWidget_MountingStarted",t[t.UltimateWidget_Mounted=19]="UltimateWidget_Mounted",t}({}),Gn=function(t){return t.CreateInitFrame="sdk--create-init-frame",t.WaitInitFrame="sdk--wait-init-frame",t.WaitCreateSession="sdk--wait-create-session",t.CreateSession="sdk--create-session",t.WaitMount="sdk--wait-mount",t.ShowWidget="sdk--show-widget",t.ShowSimpleButton="sdk--show-simple-button",t.ShowSimpleButtonByWidget="sdk--show-simple-button.by-widget",t.ShowPersonalButton="sdk--show-personal-button",t.ShowPersonalButtonByWidget="sdk--show-personal-button.by-widget",t.ShowSimpleButtonFromCreate="sdk--show-simple-button.from-create",t.ShowSimpleButtonFromCreateByWidget="sdk--show-simple-button.by-widget.from-create",t.ShowPersonalButtonFromCreate="sdk--show-personal-button.from-create",t.ShowPersonalButtonFromCreateByWidget="sdk--show-personal-button.by-widget.from-create",t.ShowSimpleWidget="sdk--show-simple-widget",t.ShowSimpleWidgetFromInit="sdk--show-simple-widget.from-init",t.ShowSimpleWidgetModal="sdk--show-simple-widget-modal",t.ShowUltimateWidget="sdk--show-ultimate-widget",t}(Gn||{}),Jn={deltaName:Gn.CreateInitFrame,from:$n.InitFrameCreationStarted,to:$n.InitFrameCreated},Qn={deltaName:Gn.WaitInitFrame,sendZero:!0,from:$n.FirstSessionCreationStarted,to:$n.InitFrameCreated},Xn={deltaName:Gn.WaitCreateSession,sendZero:!0,from:$n.InitFrameCreated,to:$n.FirstSessionCreationStarted},to={deltaName:Gn.CreateSession,from:$n.SessionCreationStarted,to:$n.SessionCreated},eo={deltaName:Gn.WaitMount,from:$n.SessionCreated,to:$n.FirstViewMountingStarted},no={deltaName:Gn.ShowWidget,from:$n.WidgetMountingStarted,to:$n.WidgetMounted},oo={deltaName:Gn.ShowWidget,from:$n.UltimateWidget_MountingStarted,to:$n.UltimateWidget_Mounted},ro={deltaName:Gn.ShowSimpleWidget,from:$n.SimpleWidget_MountingStarted,to:$n.SimpleWidget_Mounted},io={deltaName:Gn.ShowSimpleWidgetModal,from:$n.SimpleWidgetModal_MountingStarted,to:$n.SimpleWidgetModal_Mounted},ao={deltaName:Gn.ShowSimpleWidgetFromInit,trigger:$n.SimpleWidget_Mounted,include:[Jn,ro]},so=function(t){var e=t.isInWidget;return{deltaName:Boolean(e)?Gn.ShowSimpleButtonByWidget:Gn.ShowSimpleButton,from:$n.SimpleButtonMountingStarted,to:$n.SimpleButtonMounted}},uo=function(t){var e=t.isInWidget;return{deltaName:Boolean(e)?Gn.ShowPersonalButtonByWidget:Gn.ShowPersonalButton,from:$n.PersonalButtonMountingStarted,to:$n.PersonalButtonMounted}},co=function(t){var e=t.isInWidget,n=[to];return n.push(so({isInWidget:e})),{deltaName:Boolean(e)?Gn.ShowSimpleButtonFromCreateByWidget:Gn.ShowSimpleButtonFromCreate,trigger:$n.SimpleButtonMounted,include:n}};function lo(t){return void 0!==t.trigger}var ho,fo=[Jn,Qn,Xn,to,eo,no,oo,ro,io,ao,so,uo,co,function(t){var e=t.isInWidget,n=co({isInWidget:e}).include;return n.push(uo({isInWidget:e})),{deltaName:Boolean(e)?Gn.ShowPersonalButtonFromCreateByWidget:Gn.ShowPersonalButtonFromCreate,trigger:$n.PersonalButtonMounted,include:n}}];function po(t,e){return e-t}function mo(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return yo(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yo(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var vo=function(){function t(t,e){this.marks=void 0,this.additional=void 0,this.marks=[].concat(t),this.additional=e}t.of=function(t){return this.registry.get(t)||this.primary},t.ofSession=function(t){return this.sessionRegistry.get(t)||this.primary},t.unbindFromSession=function(t){this.sessionRegistry.delete(t)};var e=t.prototype;return e.fork=function(e){return void 0===e&&(e={}),new t(this.marks,Object.assign({},this.additional,e))},e.bind=function(e){t.registry.set(e,this)},e.bindBySession=function(e){t.sessionRegistry.set(e,this)},e.send=function(t,e){Hn(t,e,this.additional)},e.trySendSimple=function(t){var e=t.deltaName,n=t.sendZero,o=t.from,r=t.to;if(this.has(o)&&this.has(r)){var i=po(this.get(o),this.get(r));this.send(e,i)}else n&&this.has(r)&&this.send(e,0)},e.trySendCompound=function(t){for(var e,n=t.deltaName,o=0,r=mo(t.include);!(e=r()).done;){var i=e.value,a=i.from,s=i.to;if(!this.has(a)||!this.has(s))return;o+=po(this.get(a),this.get(s))}this.send(n,o)},e.trySend=function(t){if(this.has(t))for(var e,n=mo(fo);!(e=n()).done;){var o=e.value;"function"==typeof o&&(o=o(this.additional)),lo(o)?o.trigger===t&&this.trySendCompound(o):o.to===t&&this.trySendSimple(o)}},e.has=function(t){return void 0!==this.marks[t]},e.get=function(t){return this.marks[t]},e.mark=function(t){this.has(t)||(this.marks[t]=window.performance?performance.now():Date.now(),this.trySend(t))},t}();ho=vo,vo.registry=new WeakMap,vo.sessionRegistry=new Map,vo.primary=new ho([],{});var go=function(t){return t.Ready="ready",t.Abort="abort",t.Error="error",t.Process="process",t.Ping="ping",t.Change="change",t.Reset="reset",t.Setup="setup",t.Success="success",t.NativeInitialize="nativeInitialize",t}({}),bo=function(t){return t.Close="CLOSE",t.Timeout="TIMEOUT",t.ManualClose="MANUAL_CLOSE",t}({}),wo=function(t){return t.SdkReady="sdk-ready",t.SdkBadges="sdk-badges",t.SdkExp="sdk-exp",t.SdkPing="sdk-ping",t.SdkSplitAvailable="sdk-split-available",t.PaymentUpdate="payment-update",t.PaymentProcess="payment-process",t.PaymentLock="payment-lock",t.PaymentError="payment-error",t.PaymentExtra="payment-extra",t.PaymentUnlock="payment-unlock",t.IsReadyToPay="sdk-is-ready-to-pay",t.CheckPayment="sdk-check-payment",t.SdkCheckPaymentResponse="sdk-check-payment-response",t.SdkBroadcastSendMessage="sdk-broadcast-send-message",t.SdkBroadcastOnMessage="sdk-broadcast-on-message",t.SdkIsSplitAvailable="sdk-is-split-available",t.SdkIsSplitAvailableResponse="sdk-is-split-available-response",t}({}),ko=function(t){return t.Setup="setup",t.Payment="payment",t.Update="update",t.Complete="complete",t.Ping="ping",t.NativeInitialized="nativeInitialized",t.GoBack="goback",t}({}),So=function(t){return t.Success="success",t.Error="error",t.Close="close",t.AuthRedirect="auth-redirect",t}({}),Co=function(t){function e(){var e;return(e=t.call(this)||this).mounted=!1,e.frame=void 0,e.listener=void 0,e.emitter=void 0,e.paymentReady=new Map,e.paymentStart=new Map,e.sendMessage=function(t){Kn((function(){return e.mounted}),(function(){e.emitter?e.emitter.send(t):H("SDK: init frame 2 cannot send message because of emitter")}),100)},e.onMessage=function(t){t&&t.type&&(t.type===wo.SdkReady&&Fe.set("disabledPRA",t.disabledPRA),t.type===wo.SdkBadges&&(Fe.set("blacklistBT",new Set(t.blacklistBT)),Fe.set("enabledBT",t.enabledBT)),t.type===wo.SdkExp&&(Fe.set("blacklistSW",new Set(t.blacklistSW)),Fe.set("enabledSW",t.enabledSW),Fe.set("split006En",t.split006En),Fe.set("split006BL",new Set(t.split006BL)),Fe.set("split006WL",new Set(t.split006WL))),t.type!==wo.SdkExp&&t.type!==wo.SdkReady&&t.type!==wo.SdkBadges&&t.type!==wo.SdkCheckPaymentResponse&&t.type!==wo.SdkBroadcastOnMessage&&t.type!==wo.SdkIsSplitAvailableResponse||e.emit(t.type,t))},e.subscribeOnFrame(),e.mountFrame(),e}K(e,t),e.getInstance=function(){return e.instance||(vo.primary.mark($n.InitFrameCreationStarted),e.instance=new e),e.instance};var n=e.prototype;return n.subscribeOnFrame=function(){var t=this;this.once(wo.SdkExp,(function(e){t.mounted=!0,A.fn(e),vo.primary.mark($n.InitFrameCreated)}))},n.mountFrame=function(){var t=this;if(this.frame)H("SDK: Skip mount init frame 2");else try{var e=jn(me,null),n=Fn(e),o=new ct({targetUrl:n}),r="ya-frame-"+C(8);Kn((function(){return Boolean(document.body)}),(function(){var n;t.frame=Ne(r,{src:e}),qt.add(document.body,t.frame),t.emitter=new At(o,null!==(n=t.frame.contentWindow)&&void 0!==n?n:void 0)}),10),this.listener=new Lt(o),this.listener.on(this.onMessage);var i=setTimeout((function(){Z("SDK: Init frame timed out"),t.emit(wo.SdkReady,{type:wo.SdkReady,readyToPay:!1})}),15e3);this.once(wo.SdkExp,(function(){clearTimeout(i)}))}catch(t){Y("init speedupFrame",t),this.emit(wo.SdkReady,{type:wo.SdkReady,readyToPay:!1})}},F(e,[{key:"isReady",get:function(){return this.mounted}}])}(Ht);Co.instance=void 0;var Po=function(){if(!window)return!1;try{return window.self!==window.top}catch(t){return!0}},xo=/(.)([A-Z][a-z]+)/g,Eo=/([a-z0-9])([A-Z])/g;function Mo(t){for(var e,n={},o=0,r=Object.entries(t);o<r.length;o++){var i=r[o],a=i[0],s=i[1];n[(e=a,e.replace(xo,"$1_$2").replace(Eo,"$1_$2").toLowerCase())]=s}return n}var Io=["experiments","testIds","boxes"],Bo="border-radius: 6px; padding: 2px 4px; color: white; font-weight: 300; background-color: #da9827;",Oo={env:"production",project:"pay",page:"",platform:f(),product:"",productVersion:"",merchantId:"",checkoutOrderId:"",sessionId:"",transactionId:"",version:"0.0.0",experiments:"",puid:"",rnd_f:"",rnd_b:"",testIds:"",_debug:!1},To=function(t){return"production"===String(t||"").toLowerCase()?"production":"testing"};function Ro(e){var n=To(e.env||Oo.env),o=e.experiments,i=e.testIds,a=e.boxes,s=t(e,Io);o&&(s.experiments=h(o)),a?s.testIds=a:i&&i.length&&(s.testIds=i.map(encodeURIComponent).join(";")),Oo=Object.assign(Oo,r(s),{env:n})}function Wo(t,e,n){var o;"object"==typeof e&&(n=e,e=1);var r=function(t,e,n){void 0===n&&(n={});var o=Oo.env;"production"===o&&n.env&&(o=To(n.env),delete n.env);var r="number"==typeof e?Number.isInteger(e)?"integer":"float":"string";return{rum_id:"ru."+Oo.project,"-version":Oo.version,"-env":o,"-ua":navigator.userAgent,"-project":Oo.project,"-page":Oo.page,"-ts":Date.now(),"-type":r,"-name":t,"-value":e,"-additional":JSON.stringify(Mo(Object.assign({merchantId:Oo.merchantId,sessionId:Oo.sessionId,checkoutOrderId:Oo.checkoutOrderId},Oo.transactionId&&{transactionId:Oo.transactionId},{platform:Oo.platform,product:Oo.product,productVersion:Oo.productVersion,puid:Oo.puid,rnd_f:Oo.rnd_f,rnd_b:Oo.rnd_b},n)))}}(t,null!==(o=e)&&void 0!==o?o:1,n),i=[];Oo.experiments&&i.push("experiments="+Oo.experiments),Oo.testIds&&i.push("slots="+Oo.testIds),Oo._debug&&function(t){for(var e=z(t["-additional"],{}),n={},o=0,r=Object.entries(t);o<r.length;o++){var i=r[o],a=i[0],s=i[1];"-additional"!==a&&(n[a.startsWith("-")?a.slice(1):a]=s)}function u(t){for(var e in t){var n=t[e];(n instanceof Array||n instanceof Object)&&(t[e]=JSON.stringify(n))}return t}console.groupCollapsed("%csignal: "+t["-name"],Bo),console.log("Additionals"),console.table(u(e)),console.log("Signal data"),console.table(u(n)),console.groupEnd()}(r),l("690.32",r,["table=rum_events"].concat(i)),l("690.32",r,["table=trust_front"].concat(i))}var Ao={init:Ro,update:Ro};function _o(t,e){Wo(t,e)}var Uo={buttonRender:function(t){return _o("sdk-button-render",t)},buttonClick:function(t){return _o("sdk-button-click",t)},buttonCheckout:function(t){return _o("sdk-button-checkout",t)},buttonCheckoutAbort:function(t){return _o("sdk-button-checkout-abort",t)},buttonCheckoutError:function(t){return _o("sdk-button-checkout-error",t)},createSession:function(t){return _o("sdk-create-session",function(t){for(var e={},n=0,o=Object.entries(t||{});n<o.length;n++){var r=o[n],i=r[0],a=r[1];e[i]="boolean"==typeof a?a?"yes":"no":a}return e}(t))}},Lo=Object.assign({},Ao,{sdk:Uo});function Do(t){t.env===Ge.Sandbox&&function(t){y({env:t})}("prestable")}function jo(t){(an(t)||un(t))&&(t.availablePaymentMethods?Array.isArray(t.availablePaymentMethods)?0===t.availablePaymentMethods.length?G("SDK: availablePaymentMethods empty"):G("SDK: availablePaymentMethods",{value:t.availablePaymentMethods}):G("SDK: availablePaymentMethods not array",{value:t.availablePaymentMethods}):G("SDK: availablePaymentMethods undefined"))}var Fo=function(t){return{env:t.env||"",merchantId:dn(t),product:(e=t,Un[e.type]),productVersion:String(ln(t)),paymentMethods:gn(t)};var e},No=function(t){function e(e){var n;return(n=t.call(this,e)||this)._bc=void 0,n._bc=Rt(n.options.sessionId),n}K(e,t);var n=e.prototype;return n.createMessage=function(t){return new ht(t,this.options.channel,this.options.sourceUrl)},n.send=function(t){var e=this.createMessage(t);this._bc.postMessage(String(e))},n.destroy=function(){},F(e,[{key:"isConnected",get:function(){return!0}}])}(lt),Ko=function(t){function e(e){var n;return(n=t.call(this,e)||this)._bc=void 0,n.onMessage=function(t){try{var e=Ot(t);n.processMessage(e)}catch(t){0}},n._bc=Rt(n.options.sessionId),n._bc.addEventListener("message",n.onMessage),n}return K(e,t),e.prototype.destroy=function(){this._bc.removeEventListener("message",this.onMessage)},e}(Ut),zo=function(t){function e(e,n,o){var r,i=(r=t.call(this,e,Et())||this).createMessage(n),a=function(t,e){return void 0===e&&(e={}),window.open(t,e.target,e.features)}(It(e.targetUrl,String(i)),{target:e.channel,features:o});return r.setTarget(a),r}K(e,t);var n=e.prototype;return n.focus=function(){var t=this;this.isConnected&&dt((function(){var e;null===(e=t.target)||void 0===e||e.focus()}))},n.close=function(){var t=this;this.isConnected&&dt((function(){var e;null===(e=t.target)||void 0===e||e.close()}))},e}(At),Vo=function(t){function e(e,n){var o;return(o=t.call(this,e)||this).target=void 0,o.target=n,o}K(e,t);var n=e.prototype;return n.createMessage=function(t){return new ht(t,this.options.channel,this.options.sourceUrl)},n.send=function(t){var e=this,n=this.createMessage(t);dt((function(){e.target.postMessage(String(n))}))},n.destroy=function(){},F(e,[{key:"isConnected",get:function(){return!0}}])}(lt),qo=function(t){function e(e,n){var o;return(o=t.call(this,e)||this).target=void 0,o.onMessage=function(t){try{var e=o.createMessage(t);o.processMessage(e)}catch(t){0}},o.target=n,o.target&&"function"==typeof o.target.addEventListener&&o.target.addEventListener("message",o.onMessage),o}K(e,t);var n=e.prototype;return n.createMessage=function(t){var e=JSON.parse(t.data),n=e.sourceUrl&&X(e.sourceUrl)===t.origin?e.sourceUrl:t.origin;return new ht(e.payload,e.channel,n)},n.destroy=function(){this.target.removeEventListener("message",this.onMessage)},e}(Ut),Ho=function(t){function e(e){var n;return(n=t.call(this,e)||this).isSent=!1,n}K(e,t);var n=e.prototype;return n.constructUrl=function(t){return t||this.options.targetUrl},n.send=function(t,e){this.isSent||(J(this.constructUrl(e)),this.isSent=!0)},n.destroy=function(){this.isSent=!0},F(e,[{key:"isConnected",get:function(){return!1}}])}(lt),Yo=function(t){function e(e,n){var o;return void 0===n&&(n={}),(o=t.call(this,e)||this).params=n,o.isSent=!1,o}K(e,t);var n=e.prototype;return n.createMessage=function(t){var e=this.options.sourceUrl;return this.params.noEmitSourceUrl&&(e=void 0),new ht(t,this.options.channel,e)},n.constructUrl=function(t){var e=this.createMessage(t);return It(this.options.targetUrl,String(e),this.params.forceQueryMode)},n.send=function(t){this.isSent||(J(this.constructUrl(t)),this.isSent=!0)},n.destroy=function(){this.isSent=!0},F(e,[{key:"isConnected",get:function(){return!1}}])}(lt),Zo=function(t){function e(e,n,o){var r;return void 0===o&&(o=!1),r=t.call(this,e)||this,o?setTimeout((function(){return r.send(n)}),500):r.send(n),r}K(e,t);var n=e.prototype;return n.focus=function(){},n.close=function(){},e}(Yo),$o=function(t){function e(e){var n;return(n=t.call(this,e)||this).processTimeout=void 0,n.onProcess=function(){try{var t=n.createMessage();n.processMessage(t)}catch(t){0}},n.processTimeout=setTimeout(n.onProcess,50),n}K(e,t);var n=e.prototype;return n.hasQueryMessage=function(){return t=this.options.sourceUrl,e=nt(t),{hasMessage:Boolean(e[st]),hasForceMode:Boolean(e[ut])};var t,e},n.createMessage=function(){var t=nt(this.options.sourceUrl)[st]||"",e=JSON.parse("?"===t.slice(-1)?t.slice(0,-1):t);return new ht(e.payload,e.channel,e.sourceUrl)},n.destroy=function(){clearTimeout(this.processTimeout)},e}(Ut),Go=function(t){function e(e){var n;return void 0===e&&(e=new ct),(n=t.call(this)||this).options=e,n.queryListener=void 0,n.messageListener=void 0,n.nativeListener=void 0,n.broadcastListener=void 0,n.waitInitializationP=void 0,n.setInitialized=void 0,n.emitter=void 0,n.onMessage=function(t,e){n.emit(t,e)},n.onOptionsMessage=function(t,e){var o,r;n.options.isInitialized?n.clearSource():n.updateOptions(e),null===(o=(r=n).setInitialized)||void 0===o||o.call(r,!0)},n.createQueryListener(),n.createMessageListener(),n.createBroadcastListener(),n.waitInitializationP=new Promise((function(t){n.setInitialized=t,n.options.isInitialized&&t(!0)})),n}K(e,t);var n=e.prototype;return n.createQueryListener=function(){this.queryListener=new $o(this.options),this.queryListener.on(this.onMessage),this.queryListener.on(this.onOptionsMessage)},n.createMessageListener=function(){this.messageListener=new Lt(this.options),this.messageListener.on(this.onMessage)},n.createBroadcastListener=function(){Wt()&&(this.broadcastListener=new Ko(this.options),this.broadcastListener.on(this.onMessage))},n.createNativeListener=function(t){var e;this.nativeListener=new qo(this.options,t),this.nativeListener.on(this.onMessage),null===(e=this.messageListener)||void 0===e||e.off(this.onMessage),this.broadcastListener&&this.broadcastListener.off(this.onMessage)},n.clearSource=function(){var t;(function(t){history.replaceState(null,document.title,t)})(ot(this.options.sourceUrl,((t={})[st]=void 0,t[ut]=void 0,t)).split("#")[0])},n.updateOptions=function(t){this.options.targetUrl=t.sourceUrl||"/"},n.hasQueryMessage=function(){var t;return null===(t=this.queryListener)||void 0===t?void 0:t.hasQueryMessage()},n.connect=function(t){var e;void 0===t&&(t={});var n=this.connectNative(t);if(n)return n;var o=(null===(e=t.message)||void 0===e?void 0:e.target)||Mt();try{if(t.forceQueryMode||o===window)throw new Error;return this.emitter=new At(this.options,o),this.emitter}catch(e){var r;return Wt()&&null!==(r=t.connection)&&void 0!==r&&r.isQueryModeDisabled?(this.emitter=new No(this.options),this.emitter):(this.emitter=new Yo(this.options,Object.assign({forceQueryMode:Boolean(t.forceQueryMode)},t.query)),this.emitter)}},n.connectNative=function(t){if(void 0===t&&(t={}),t.native&&(t.native.listener&&this.createNativeListener(t.native.listener),t.native.target))return this.emitter=new Vo(this.options,t.native.target),this.emitter},n.connectRedirectEmitter=function(){return this.emitter=new Ho(this.options),this.emitter},n.open=function(t,e,n,o,r){try{return o?new Zo(this.options,t,null==n?void 0:n()):new zo(this.options,t,e)}catch(e){if(r)throw new Error("QueryMode is disabled");var i=null==n?void 0:n();return new Zo(this.options,t,i)}},n.destroy=function(){var t,e;null===(t=this.queryListener)||void 0===t||t.destroy(),null===(e=this.messageListener)||void 0===e||e.destroy(),this.broadcastListener&&this.broadcastListener.destroy()},n.waitInitialization=function(){return this.waitInitializationP},F(e,[{key:"isQueryMode",get:function(){return this.emitter instanceof Yo||this.emitter instanceof Ho}},{key:"isBroadcastMode",get:function(){return this.emitter instanceof No}}])}(_t);function Jo(t,e){var n,o=null===(n=("; "+document.cookie).split("; "+t+"=").pop())||void 0===n?void 0:n.split(";").shift();return void 0===o?e:o}var Qo=n(970),Xo=n.n(Qo),tr=function(t,e){return void 0===e&&(e={}),function(){var n=[],o=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2];Array.isArray(r)&&(i=r,r=void 0),Array.isArray(o)&&(i=o,o=void 0),"object"==typeof o&&(r=o,o=void 0);var a=o?t+"__"+o:t;if(n.push(a),r)for(var s=0,u=Object.entries(r);s<u.length;s++){var c=u[s],d=c[0],l=c[1];"boolean"==typeof l||null==l?l&&n.push(a+"_"+d):n.push(a+"_"+d+"_"+l)}var h=n.join(" ");return e.lowerCase&&(h=h.toLowerCase()),i&&Array.isArray(i)&&(h=[h].concat(i).join(" ")),h}},er=function(t){var e,n,o,r=t.offsetWidth,i=t.offsetHeight;if(r>=75&&i>=32){var a=(n=(e={width:r,height:i}).width,o=e.height,{paddingX:Math.min(36,10+.5*Math.max(0,n-75)),paddingY:Math.min(17,4+.5*Math.max(0,o-32))}),s=a.paddingX,u=a.paddingY;qt.style(t,{padding:u+"px "+s+"px"})}},nr=function(t){return t.Ready="READY",t.Failure="FAILURE",t}({}),or=function(t){return t.Update="UPDATE",t.Process="YAPAY_PROCESS",t.Lock="LOCK",t.Unlock="UNLOCK",t.Error="ERROR",t.Extra="EXTRA",t}({}),rr=n(688),ir=n.n(rr);const ar=n.p+"_/yapay-simple-black-red.en.ddba3076.svg",sr=n.p+"_/yapay-simple-black-red.ccc8c125.svg",ur=n.p+"_/yapay-simple-white-red.en.fd449128.svg",cr=n.p+"_/yapay-simple-white-red.40eb6a45.svg";var dr='xmlns="http://www.w3.org/2000/svg" fill="none"',lr=function(t,e,n){var o=n?fr(t,e):hr(t,e);return"data:image/svg+xml;base64,"+btoa(o)},hr=function(t,e){return["<svg "+dr+' width="59" height="22">','<path fill="#FC3F1D" d="M20.2 11A9.8 9.8 0 1 0 .6 11a9.8 9.8 0 0 0 19.6 0Z"/>',"ru"===e?'<path fill="#FFF" d="M11.8 16.9h2V5h-3c-3 0-4.5 1.6-4.5 3.8 0 1.8.8 3 2.4 4L6 17h2.2l3-4.5-1-.7c-1.3-.8-1.9-1.5-1.9-2.9 0-1.2.9-2 2.6-2h.9v10Z"/>':'<path fill="#FFF" d="M10.7 12a6 6 0 0 1 .7 3.2v2h-2v-3.4L5.5 5.5h2.2l3 6.5Zm2.5-6.5L10.7 11h2l2.6-5.6h-2.1Z"/>',"ru"===e?'<path fill="'+t+'" d="M35.1 3.4v14.8h-2.5V5.4H28v12.8h-2.6V3.4h9.7ZM39.4 18.4c-1.1 0-2-.2-2.6-.7v-2a4.1 4.1 0 0 0 2.5.7c.8 0 1.4-.2 1.8-.7.4-.5.6-1.1.7-2h-3.7v-2h3.7c-.2-1.6-1-2.4-2.5-2.4-.4 0-.9 0-1.3.2a5 5 0 0 0-1 .5V7.8c.3-.1.6-.3 1-.3l1.7-.2c.8 0 1.5.1 2 .4A4 4 0 0 1 43.4 9c.4.5.7 1 .9 1.7.2.7.3 1.4.3 2.3 0 1.7-.4 3.1-1.3 4-.8 1-2 1.5-3.8 1.5ZM50.5 6.1c-1 0-1.8-.2-2.3-.7-.5-.6-.8-1.2-.8-2h2.1c0 .4.1.7.3.9l.7.2c.3 0 .5 0 .6-.2.2-.2.3-.5.3-.9h2l-.1 1c-.2.4-.3.7-.6 1-.2.2-.5.4-1 .5l-1.2.2Zm-1.9 1.4v6.6l3.9-6.6h2.2v10.7h-2.4v-6.6l-3.9 6.6h-2.2V7.5h2.4Z"/>':'<path fill="'+t+'" d="M29.3 3.4a6 6 0 0 1 4 1.3c1 .8 1.5 2 1.5 3.4 0 .8-.2 1.5-.4 2.1-.3.6-.7 1.1-1.1 1.5-.5.4-1 .7-1.8 1a8 8 0 0 1-2.2.2H28v5.3h-2.5V3.4h3.8Zm0 7.5a3 3 0 0 0 2-.7c.6-.4.9-1.1.9-2 0-1-.3-1.7-.8-2.1-.4-.5-1.1-.7-2-.7H28V11h1.3ZM41.7 13.3h-.4c-1 0-1.8.1-2.3.4-.5.2-.7.7-.7 1.3 0 .4.1.8.4 1 .2.3.6.5 1.2.5.4 0 .8-.1 1.1-.3.3-.1.5-.3.7-.6v-2.3Zm2.5 2.3.1 2.6H42l-.2-.4v-.5h-.1l-1 .7c-.3.2-.9.3-1.6.3-1 0-1.8-.3-2.4-.9-.6-.5-.9-1.4-.9-2.4 0-1.1.5-2 1.3-2.6 1-.6 2.3-.9 4.3-.9h.4V11c0-.6-.2-1-.4-1.2-.3-.2-.8-.3-1.4-.3h-1a7 7 0 0 0-1.8.6l-.6.4v-2a7 7 0 0 1 3.7-1c1.4 0 2.4.2 3 .7.7.6 1 1.5 1 2.8v4.7ZM47.6 21.5l-.6-.1-.5-.1-.3-.2v-2c.3.2.7.4 1.2.4.3 0 .6-.1.8-.3.2-.1.4-.3.5-.6l-3.6-11h2.6l2.4 8 2.3-8H55l-3.4 10-.6 1.5c-.2.5-.4.9-.7 1.2-.3.4-.7.7-1.1.9-.4.2-1 .3-1.5.3Z"/>',"</svg>"].join("")},fr=function(t,e){return"<svg "+dr+' width="70" height="19"> '+("ru"===e?'<path fill="'+t+'" d="M26.82 16.83a5.06 5.06 0 0 1-4.18-1.91c-1.02-1.3-1.53-3.1-1.53-5.44 0-2.28.5-4.07 1.51-5.39a5.21 5.21 0 0 1 4.39-1.98c.66 0 1.25.1 1.78.3.52.17.95.38 1.28.6v2a8.46 8.46 0 0 0-1.33-.65c-.5-.2-1.04-.31-1.6-.31-1.22 0-2.1.44-2.66 1.34-.55.89-.82 2.25-.82 4.1 0 1.78.27 3.13.82 4.05.56.9 1.4 1.36 2.53 1.36a4.63 4.63 0 0 0 3.06-1.05v2c-.32.21-.75.43-1.28.65a5.2 5.2 0 0 1-1.97.33ZM31.62 6.27h8.11v10.36h-2.46V8.2h-3.19v8.41h-2.46V6.28ZM40.97 14.5l.15.1c.1.06.23.09.41.09.4 0 .66-.2.79-.62.12-.4.2-1.16.25-2.26l.2-5.54h7.05v10.36h-2.46V8.2h-2.5l-.14 3.7a10.04 10.04 0 0 1-.64 3.75c-.38.78-1.09 1.17-2.13 1.17a2 2 0 0 1-.7-.1l-.28-.1V14.5ZM51.9 6.27h2.4v6.4l3.8-6.4h2.13v10.36h-2.4v-6.4l-3.8 6.4H51.9V6.27ZM69.93 8.2h-2.9v8.43h-2.46V8.2h-2.9V6.27h8.26v1.94Z"/>':'<path fill="'+t+'" d="M25.37 16.74a5.93 5.93 0 0 1-3.91-1.28v-2c.34.26.83.55 1.48.87.66.31 1.4.47 2.22.47.77 0 1.39-.18 1.85-.53.47-.37.7-.9.7-1.59 0-.42-.1-.77-.29-1.03-.17-.27-.41-.5-.72-.68a4.57 4.57 0 0 0-1-.45c-.39-.12-.78-.25-1.18-.4a7.33 7.33 0 0 1-1.13-.46c-.37-.2-.7-.44-.99-.72a3.7 3.7 0 0 1-.68-1.12c-.16-.45-.24-1-.24-1.64a3.75 3.75 0 0 1 2.84-3.89 6.51 6.51 0 0 1 1.89-.27 5.41 5.41 0 0 1 3.3.93v2c-.42-.24-.88-.46-1.39-.67a4.66 4.66 0 0 0-1.85-.33c-.82 0-1.43.18-1.8.54-.4.36-.59.85-.59 1.48 0 .76.29 1.28.85 1.57.57.27 1.23.52 1.97.74 1 .28 1.84.74 2.52 1.35.68.6 1.02 1.56 1.02 2.85 0 .82-.14 1.5-.43 2.05-.29.55-.66 1-1.13 1.32-.45.32-.97.54-1.56.68-.58.14-1.16.2-1.75.2ZM34.26 6.18l.12 1.33a3.15 3.15 0 0 1 2.76-1.54c1.15 0 2.1.47 2.82 1.4.73.93 1.1 2.26 1.1 3.97 0 1.73-.38 3.06-1.14 4a3.53 3.53 0 0 1-4.36 1.05c-.44-.25-.81-.6-1.11-1.07v4.2H32V6.17h2.26Zm2.14 8.62c.7 0 1.23-.27 1.59-.82.35-.56.53-1.44.53-2.64 0-1.2-.16-2.06-.5-2.61a1.64 1.64 0 0 0-1.5-.82c-.68 0-1.2.28-1.56.84a5.1 5.1 0 0 0-.51 2.61c0 1.2.16 2.07.49 2.62.33.55.82.82 1.46.82ZM45.14 2.22v14.31h-2.45V2.23h2.45ZM48.4 4.9a1.38 1.38 0 0 1-1.42-1.44c0-.43.14-.77.42-1.03.27-.27.6-.41 1-.41s.74.14 1.02.41c.28.26.43.6.43 1.03A1.41 1.41 0 0 1 48.4 4.9Zm-1.2 1.28h2.44v10.35H47.2V6.18ZM50.87 6.18h1.3V3.9h2.45v2.27h2.57V8.1h-2.57v5.33c0 .39.12.71.37.97s.62.4 1.13.4c.41 0 .73-.06.95-.17l.33-.17v2l-.5.12c-.33.1-.79.15-1.38.15-1.12 0-1.97-.31-2.53-.93a3.5 3.5 0 0 1-.82-2.39v-5.3h-1.3V6.17Z"/>')+' <g clip-path="url(#a)"><path fill="url(#b)" d="m16.37 16.36-.02-.02-.01-.03-.01-.02-.01-.03-.02-.02.01-.02v-.01l-.02-.02-.02-.02-.02-.03.02-.01-.02-.02-.01-.03v-.02s0-.02-.02-.03l.02-.01-.04-.05.01-.01-.02-.03s0-.02-.03-.04l-.02-.04.02-.01-.02-.02-.01-.02.02-.02-.05-.08-.02-.02-.01-.03-.01-.03-.01-.03h.01l-.03-.06-.02-.03h.01l-.03-.07-.02-.02v-.03l-.02-.03-.01-.04-.01-.02-.13-.33c-.58-1.4-3.04-7.26-3.2-7.68l.02-.02c4.63-3.67 4.1-4.2 4.1-4.2a9.62 9.62 0 0 0-14.13.1c-.15.16-.28.32-.4.48l-.35.48A9.58 9.58 0 0 0 2.68 16a9.47 9.47 0 0 0 8.13 2.94 9.56 9.56 0 0 0 5.37-2.37l.06-.05.14-.13-.02-.02v-.01Z" /><path fill="url(#f)" d="m12.48 7.36-.6.48a181.48 181.48 0 0 1-4.71 3.68 21.82 21.82 0 0 0 5.31 4.2c1.7.9 3.03 1.07 3.68.5.65-.58.57-1.9-.18-3.64-.9-1.9-2.08-3.66-3.5-5.22Z" /><path fill="#84EEB1" d="m12.6 7.26-.72.58a19.88 19.88 0 0 1 3.28 4.9c.74 1.71.72 2.57.48 2.79-.23.21-1.27.27-2.92-.6A19.97 19.97 0 0 1 7.82 11l-.82.6.2.2c3.43 3.55 7.15 5.57 8.79 4.84l.14-.08h.02l.18-.13.16-.18c1.07-1.4-.56-5.18-3.79-8.88l-.1-.12Z" /></g><defs><radialGradient id="b" cx="0" cy="0" r="1" gradientTransform="matrix(42.368 0 0 32.2871 12.67 1.39)" gradientUnits="userSpaceOnUse" ><stop stop-color="#48F56D" /><stop offset=".09" stop-color="#43EA68" /><stop offset=".25" stop-color="#37CB5A" /><stop offset=".44" stop-color="#239A44" /><stop offset=".62" stop-color="#085625" /><stop offset=".8" stop-color="#00421C" /></radialGradient><linearGradient id="f" x1="13.25" x2="9.71" y1="22.97" y2="-2.44" gradientUnits="userSpaceOnUse" ><stop offset=".1" stop-color="#FF8475" /><stop offset=".37" stop-color="#E84E43" /><stop offset=".6" stop-color="#D6261F" /><stop offset=".79" stop-color="#CC0E08" /><stop offset=".9" stop-color="#C80500" /></linearGradient><clipPath id="a"><rect width="19.09" height="19" x=".17" fill="'+t+'" rx="9.5" /></clipPath></defs></svg>'},pr=function(t){return t.replace(/[\r\n\t]+/gm,"").replace(/\s{2,}/g," ").replace(/ ?([{:;,!}]) ?/g,"$1").trim()},mr="#FFF",yr="#2E2F33",vr={light:"radial-gradient(340px 82px at top, rgba(255, 92, 77, 0.1) 0%, rgba(235, 70, 159, 0.1) 10%, rgba(131, 65, 239, 0.036) 40%, rgba(63, 104, 249, 0) 52%)",dark:"radial-gradient(340px 82px at top, rgba(255, 92, 77, 0.5) 0%, rgba(235, 70, 159, 0.5) 10%, rgba(131, 65, 239, 0.18) 40%, rgba(63, 104, 249, 0) 52%)",bnplLight:"radial-gradient(73.06% 50% at 50% 0%, rgba(71, 241, 108, 0.3) 0%, rgba(59, 211, 94, 0.25) 25%, rgba(45, 179, 79, 0.07) 75%, rgba(32, 147, 65, 0) 100%)",bnplDark:"radial-gradient(73.06% 50% at 50% 0%, rgba(71, 241, 108, 0.50) 0%, rgba(59, 211, 94, 0.50) 25%, rgba(45, 179, 79, 0.18) 75%, rgba(32, 147, 65, 0.00) 100%)"},gr=function(t){t.target instanceof HTMLButtonElement&&function(t){var e=t.offsetWidth,n=t.offsetHeight;if(e>=_e&&n>=Ue){var o=Math.min(36,10+.5*Math.max(0,e-_e)),r=Math.min(17,4+.5*Math.max(0,n-Ue));return qt.style(t,{padding:r+"px "+o+"px"})}qt.style(t,{padding:"4px 2px"})}(t.target)},br=function(t,e,n,o){var r=t.theme,i=t.width,a=t.style;return Object.assign({},function(t,e){var n,o,r,i;return{overflow:"hidden",flex:"1 0 auto","box-sizing":"border-box",width:t===$t.MaxImportant?"100%":"","min-width":t===$t.MaxImportant?"100%":"","max-width":t===$t.MaxImportant?"100%":"",height:null!==(n=null==e?void 0:e.height)&&void 0!==n?n:"","min-height":null!==(o=null==e?void 0:e.height)&&void 0!==o?o:"","max-height":null!==(r=null==e?void 0:e.height)&&void 0!==r?r:"",cursor:"pointer","user-select":"none","border-width":"1px","border-style":"solid","border-radius":null!==(i=null==e?void 0:e.borderRadius)&&void 0!==i?i:"","background-position":"center","background-size":"contain, cover","background-repeat":"no-repeat","background-clip":"border-box","background-origin":"content-box, border-box",transition:"opacity 150ms linear,filter 150ms linear,background-color 150ms linear",transform:"translate3d(0,0,0)"}}(i,a),function(t,e,n,o){var r;if(!n)return{};var i=lr(yr,e,o),a=lr(mr,e,o),s=o?"bnplLight":"light",u=o?"bnplDark":"dark";return((r={})[Zt.White]={"background-color":mr,"background-image":"url("+i+"), "+vr[s]},r[Zt.WhiteOutlined]={"background-color":mr,"border-color":"#000000","background-image":"url("+i+"), "+vr[s]},r[Zt.Black]={"background-color":yr,"background-image":"url("+a+") ,"+vr[u]},r)[n]}(0,e,r,o))},wr=.5;function kr(t,e){return Le(n=t)&&1===n.nodeType?window.IntersectionObserver?function(t,e){var n=new IntersectionObserver((function(o){var r=o[0];r&&r.isIntersecting&&r.intersectionRatio>=wr&&(e("io"),n.unobserve(t))}),{threshold:[0,.25,.5,.75,1]});return n.observe(t),function(){return n.unobserve(t)}}(t,e):t.getBoundingClientRect?function(t,e){return Kn((function(){var e=t.getBoundingClientRect(),n=e.width,o=e.height,r=window.innerHeight-e.bottom,i=window.innerWidth-e.right;return Math.max(0,o+Math.min(0,e.top,r))/o*(Math.max(0,n+Math.min(0,e.left,i))/n)>=wr}),(function(){return e("raf")}))}(t,e):function(t,e){var n,o=function(){n=null,document.body&&document.body.contains?document.body===t||document.body.contains(t)?e("mount"):n=Nn(o):e("timer")};return n=Nn(o,0),function(){n&&clearTimeout(n)}}(t,e):function(){};var n}function Sr(t){return"none"!==qt.getCssProp(t,"pointerEvents")}function Cr(t){var e=t.parentElement;return e?Sr(e)?e:Cr(e):null}function Pr(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return xr(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xr(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var Er=function(t){function e(e){var n;return(n=t.call(this)||this)._watchInterval=void 0,n._registry=void 0,n.watcherId=void 0,n._watchInterval=e,n._registry=new Map,n}K(e,t);var n=e.prototype;return n.register=function(t){this._registry.set(t,!0),this.emit("change",{mounted:[t]}),this.watcher()},n.unregister=function(t){this._registry.delete(t)},n.watcher=function(){var t=this;this._registry.size>0&&!this.watcherId&&(this.watcherId=setInterval((function(){return t.action()}),this._watchInterval))},n.action=function(){for(var t,e=[],n=[],o=Pr(this._registry);!(t=o()).done;){var r=t.value,i=r[0],a=r[1];i.isConnected!==a&&(this._registry.set(i,!a),a?n.push(i):e.push(i))}(e.length||n.length)&&this.emit("change",{mounted:e,unmounted:n})},F(e,[{key:"activeElements",get:function(){return Array.from(this._registry.entries()).filter((function(t){t[0];return t[1]})).map((function(t){var e=t[0];t[1];return e}))}}])}(Ht),Mr=new(function(t){function e(){var e;return(e=t.call(this,100)||this)._dataRegistry=void 0,e._dataRegistry=new Map,e}K(e,t);var n=e.prototype;return n.registerButton=function(e,n){t.prototype.register.call(this,e),this._dataRegistry.set(e,n)},n.unregisterButton=function(e){t.prototype.unregister.call(this,e),this._dataRegistry.delete(e)},n.getData=function(t){return this._dataRegistry.get(t)},F(e,[{key:"values",get:function(){return Array.from(this._dataRegistry.values())}}])}(Er));function Ir(t){qt.show(t,"inline-block")}var Br=function(){function t(t,e){this.buttonWatcher=void 0,this.mountingLimit=void 0,this.mountedTimes=void 0,this.logSent=void 0,this.mountedButton=void 0,this.mountedButtonHandler=void 0,this.buttonWatcher=t,this.mountingLimit=e,this.mountedTimes=0,this.logSent=!1}var e=t.prototype;return e.start=function(){var t=this;this.buttonWatcher.on("change",(function(){t.action()}))},e.registerWebButton=function(t,e){this.isApiAvailable&&this.buttonWatcher.registerButton(t,e)},e.unregisterWebButton=function(t){this.isApiAvailable&&this.buttonWatcher.unregisterButton(t)},e.dispatchClickEvent=function(){if(this.hasStickyButton&&this.mountedButton){var t,e=new Event("click",{bubbles:!0});if(Sr(this.mountedButton))this.mountedButton.dispatchEvent(e);else null===(t=Cr(this.mountedButton))||void 0===t||t.dispatchEvent(e)}},e.removeStickyButton=function(){var t=this;return Yn(Te.SdkRemountStickyButton),this.mountedButtonHandler?this.mountedButtonHandler.unmount().catch((function(t){Z("stickyButtonRemoveError",t)})).then((function(){t.mountedButton&&Ir(t.mountedButton),t.mountedButtonHandler=void 0,t.mountedButton=void 0})):Promise.resolve()},e.addStickyButton=function(t){var e=this;this.mountedTimes>0&&Zn(Te.SdkRemountStickyButton);var n=this.buttonWatcher.getData(t);return n?!this.hasStickyButton&&this.canStickyButtonMount&&t.id?this.api?this.api.mount(n,(function(){return e.dispatchClickEvent()})).then((function(n){!function(t){qt.hide(t,!0)}(t),e.mountedButtonHandler=n,e.mountedButton=t,e.mountedTimes+=1})).catch((function(e){Ir(t),Z("stickyButtonMountError",e)})):(Z("Replace sticky button with button because of nonexisting api"),Ir(t),Promise.resolve()):(Ir(t),Promise.resolve()):(Z("Replace sticky button with button because of nonexisting button data"),Ir(t),Promise.resolve())},e.action=function(){var t=this;if(this.isApiAvailable){var e=this.buttonWatcher.activeElements;if(1===e.length){var n=e[0];n!==this.mountedButton&&this.removeStickyButton().then((function(){return t.addStickyButton(n)}))}else this.removeStickyButton().then((function(){t.buttonWatcher.activeElements.forEach(Ir)}))}},F(t,[{key:"api",get:function(){var t,e;return null===(t=window.yandex)||void 0===t||null===(e=t.pay)||void 0===e?void 0:e.stickyButton}},{key:"isApiAvailable",get:function(){return Boolean(this.api)}},{key:"hasStickyButton",get:function(){return Boolean(this.mountedButton)&&Boolean(this.mountedButtonHandler)}},{key:"canStickyButtonMount",get:function(){return this.mountedTimes<this.mountingLimit||(this.logSent||(Z("Trying to attach sticky button more than "+this.mountingLimit+" times"),this.logSent=!0),!1)}}])}(),Or=new Br(Mr,2),Tr=n(952),Rr=n.n(Tr),Wr=function(t){var e,n=Rr()(t);sn(n)&&(n.order.items=null===(e=n.order.items)||void 0===e?void 0:e.map((function(t){return{amount:t.amount}})),delete n.order.total.label);return an(n)&&(n.cart={items:n.cart.items}),n},Ar=function(t){function e(e,n,o){var r;return(r=t.call(this)||this).frame=void 0,r.frameListener=void 0,r.frameEmitter=void 0,r.payment=void 0,r.buttonOptions=void 0,r.buttonStyles=void 0,r.onMessage=function(t){t&&t.type&&r.emit(t.type,t)},r.onPaymentUpdate=function(){r.frameEmitter&&r.frameEmitter.send({type:or.Update,paymentSheet:r.payment.sheet})},r.onPaymentProcess=function(){r.frameEmitter&&r.frameEmitter.send({type:or.Process})},r.onPaymentLock=function(){r.emit(wo.PaymentLock,null),r.frameEmitter&&r.frameEmitter.send({type:or.Lock})},r.onPaymentUnlock=function(){r.emit(wo.PaymentUnlock,null),r.frameEmitter&&r.frameEmitter.send({type:or.Unlock})},r.onPaymentError=function(){r.emit(wo.PaymentError,null),r.frameEmitter&&r.frameEmitter.send({type:or.Error})},r.onPaymentExtraChange=function(t){var e=t.innerType,n=t.bnplSelected;r.frameEmitter&&r.frameEmitter.send({type:or.Extra,innerType:e,bnplSelected:n})},r.payment=e,r.buttonOptions=n,r.buttonStyles=o,r.subscribePayment(),r}K(e,t),e.create=function(t,n,o){return new e(t,n,o)};var n=e.prototype;return n.destroy=function(){t.prototype.destroy.call(this),this.unmount()},n.mount=function(t){try{if(this.frame)return;var e=this.buttonOptions,n=this.buttonStyles,o=this.payment,r=o.sheet,i=o.env,a=Wr(r),s=jn(ye,this.payment.sessionId,{env:i,extra:{buttonOptions:e,paymentSheet:a,buttonStyles:n},merchantId:dn(r)}),u=Fn(s);this.frame=Ke(s,{opacity:"0"}),qt.add(t,this.frame),qt.style(this.frame,{position:"absolute",top:"0",right:"0",bottom:"0",left:"0",border:"0",display:"block",width:"100%",height:"100%","pointer-events":"none","z-index":0}),this.connect(u)}catch(t){Y("sdk-payment-method mount",t)}},n.unmount=function(){this.frame&&(qt.remove(this.frame),this.frame=void 0),this.frameListener&&(this.frameListener.destroy(),this.frameListener=void 0),this.frameEmitter&&(this.frameEmitter.destroy(),this.frameEmitter=void 0),this.unsubscribePayment()},n.show=function(){this.frame&&qt.animate(this.frame,{property:"opacity",from:"0",to:"1"})},n.connect=function(t){var e,n,o,r=this,i=new ct({targetUrl:t});this.frameListener=new Lt(i),this.frameListener.on(this.onMessage);var a=null===(e=this.frame)||void 0===e?void 0:e.contentWindow;this.on(nr.Ready,(function(){var t,e,n;if(a!==(null===(t=r.frame)||void 0===t?void 0:t.contentWindow))if($("SDK: Button remounted. Need to reconnect",{buttonType:r.buttonOptions.type}),a=null!==(e=null===(n=r.frame)||void 0===n?void 0:n.contentWindow)&&void 0!==e?e:null)try{r.frameEmitter=new At(i,a)}catch(t){Y("SDK: Button Message Connection Emitter failed on remount",t)}else $("SDK: Button remount. No content window")})),this.frameEmitter=new At(i,null!==(n=null===(o=this.frame)||void 0===o?void 0:o.contentWindow)&&void 0!==n?n:void 0)},n.subscribePayment=function(){this.payment.on(wo.PaymentUpdate,this.onPaymentUpdate),this.payment.on(wo.PaymentProcess,this.onPaymentProcess),this.payment.on(wo.PaymentLock,this.onPaymentLock),this.payment.on(wo.PaymentUnlock,this.onPaymentUnlock),this.payment.on(wo.PaymentError,this.onPaymentError),this.payment.on(wo.PaymentExtra,this.onPaymentExtraChange)},n.unsubscribePayment=function(){this.payment.off(wo.PaymentUpdate,this.onPaymentUpdate),this.payment.off(wo.PaymentProcess,this.onPaymentProcess),this.payment.off(wo.PaymentLock,this.onPaymentLock),this.payment.off(wo.PaymentUnlock,this.onPaymentUnlock),this.payment.off(wo.PaymentError,this.onPaymentError),this.payment.off(wo.PaymentExtra,this.onPaymentExtraChange)},e}(Ht),_r=tr(xe,{lowerCase:!0}),Ur=tr(Me,{lowerCase:!0}),Lr={type:Yt.Pay,theme:Zt.Black,width:$t.Auto},Dr=function(t){function e(e,n,o){var r;void 0===o&&(o={}),(r=t.call(this)||this).hasShadowRoot=!1,r.payment=void 0,r.parent=void 0,r.options=void 0,r.oldStyleElement=void 0,r.styleElement=void 0,r.buttonElement=void 0,r.backdropElement=void 0,r.paymentMethod=void 0,r.renderWatcherUnsubscribe=Xo(),r.resizeObserverUnsubscribe=Xo(),r.locked=!1,r.settings=void 0,r.onClick=function(t){r.locked||(Lo.sdk.buttonClick(r.payment.signalData),r.emit(Gt.Click,t))},r.onSdkPaymentMethodReady=function(t){Fe.set("hasNewPRA",t.hasNewPRA),r.showPaymentMethod(),vo.of(r).mark($n.PersonalButtonMounted)},r.onSdkPaymentMethodFailure=function(){r.unmountPaymentMethod()},r.onPaymentLock=function(){r.locked=!0},r.onPaymentUnlock=function(){r.locked=!1};try{var i=n.sheet;r.payment=n,r.settings=o,r.options=ie(e,Lr),i&&bn(i)&&(r.settings.disableStickyButton=!0)}catch(t){throw H("SDK: Error create button",t),t}return r}K(e,t),e.create=function(t,n,o){return new e(t,n,o)};var n=e.prototype;return n.destroy=function(){t.prototype.destroy.call(this),this.unmount()},n.mount=function(t){var e=this;if(t){vo.of(this).mark($n.SimpleButtonMountingStarted),vo.ofSession(this.payment.sessionId).mark($n.FirstViewMountingStarted),this.parent&&this.unmount();var n=function(n){try{e.parent=t,e.hasShadowRoot=void 0!==window.ShadowRoot&&t instanceof ShadowRoot,e.mountStyles(),e.mountButton(n),vo.of(e).mark($n.SimpleButtonMounted),vo.of(e).mark($n.PersonalButtonMountingStarted),e.mountPaymentMethod(),e.registerStickyButton(),e.renderWatcherUnsubscribe=kr(e.buttonElement,(function(){Lo.sdk.buttonRender(e.payment.signalData)}))}catch(t){Y("SDK: Button mount",t)}};wn(this.payment.sheet)?n(!0):n()}else Z("SDK: Falsy parent on button mount",{fn:"Button.mount",message:"parent: "+t})},n.unmount=function(){this.parent=void 0,this.renderWatcherUnsubscribe(),this.unmountButton(),this.unmountStyles(),this.unmountPaymentMethod(),this.unregisterStickyButton()},n.setBackdrop=function(t){if(this.buttonElement&&this.backdropElement)this.backdropElement.style.height=t;else{var e=document.createElement("div");qt.style(e,function(t){return{position:"relative",background:"transparent",overflow:"hidden",cursor:"pointer",width:"100%",height:t,flex:"0 0 "+t}}(t),!0),qt.on(e,"click",this.onClick),e.setAttribute("class",Ur()),this.parent?qt.add(this.parent,e,this.buttonElement):Y("SDK: Backdrop has no parent element"),this.backdropElement=e}},n.registerStickyButton=function(){if(this.buttonElement){var t=this.payment,e=t.env,n=t.sessionId,o=t.sheet,r=this.options,i=r.type,a=r.theme,s=r.width;if(o&&!this.settings.disableStickyButton){var u={env:e,sessionId:n,merchant:Rn(o),buttonOptions:{type:i,theme:a,width:s},paymentMethodOptions:Tn(o),paymentType:o.type,orderTotal:{amount:pn(o),currency:o.currencyCode}};(an(o)||un(o))&&o.availablePaymentMethods&&(u.availablePaymentMethods=o.availablePaymentMethods),Or.registerWebButton(this.buttonElement,u)}}else Z("SDK: Skip sticky button register")},n.unregisterStickyButton=function(){!this.settings.disableStickyButton&&this.buttonElement&&Or.unregisterWebButton(this.buttonElement)},n.mountButton=function(t){var e=this.options,n=e.type,o=e.theme,r=e.width,i=o===Zt.Black?"dark":"light",a=_r({type:n,theme:o,width:r,"theme-type":i}),s=document.createElement("button"),u=void 0!==this.payment.sheet.language?this.payment.sheet.language:"ru";qt.style(s,br(this.options,u,0,t),!0),s.setAttribute("id",zn("yandexpay-button")),s.setAttribute("type","button"),s.setAttribute("aria-label","Yandex Pay"),s.setAttribute("class",a),this.settings.disableStickyButton||!Or.isApiAvailable||Or.hasStickyButton||qt.hide(s,!0),this.parent?qt.add(this.parent,s):H("SDK: Cannot mount button: has no parent element"),qt.on(s,"click",this.onClick),er(s),this.resizeObserverUnsubscribe=function(t){if(window.ResizeObserver){var e=ir()(40,gr),n=new ResizeObserver((function(t){return t.forEach(e)}));return n.observe(t,{box:"border-box"}),function(){return n.disconnect()}}return Xo()}(s),this.buttonElement=s},n.unmountButton=function(){this.buttonElement&&qt.off(this.buttonElement,"click",this.onClick),this.backdropElement&&qt.off(this.backdropElement,"click",this.onClick),this.buttonElement&&qt.remove(this.buttonElement),this.resizeObserverUnsubscribe()},n.mountStyles=function(){var t,n,o,r,i=document.createElement("style");i.setAttribute("type","text/css"),i.textContent=(t={assetsUrl:le,baseClass:xe},n=this.payment.sheet.language,o=t.assetsUrl,r=t.baseClass,void 0===n&&(n="ru"),pr("\n  ."+r+" {\n    position: relative;\n    display: inline-block;\n    box-sizing: border-box;\n    height: 54px;\n    min-width: 282px;\n    min-height: 40px;\n    padding: 14px 36px;\n    overflow: hidden;\n    background-origin: content-box;\n    background-position: center center;\n    background-repeat: no-repeat;\n    background-size: contain;\n    border-width: 1px;\n    border-style: solid;\n    border-color: transparent;\n    border-radius: 8px;\n    user-select: none;\n    cursor: pointer;\n    transition: opacity 150ms linear, filter 150ms linear, background-color 150ms linear;\n\n    transform: translate3d(0, 0, 0);\n  }\n\n  ."+r+":focus {\n    outline: none;\n    border-color: transparent;\n    box-shadow: 0 0 0 3px rgb(255 56 21 / 50%);\n  }\n\n  ."+r+"_theme_white,\n  ."+r+"_theme_white-outlined {\n    background-color: #ffffff;\n  }\n\n  ."+r+"_theme_white-outlined {\n    border-color: #000000;\n  }\n\n  ."+r+"_theme-type_light:hover,\n  ."+r+"_theme-type_light:active {\n    filter: brightness(0.95);\n  }\n\n  ."+r+"_theme_black {\n    background-color: #000000;\n  }\n\n  ."+r+"_theme-type_dark:hover,\n  ."+r+"_theme-type_dark:active {\n    opacity: 0.8;\n  }\n\n  ."+r+"_theme-type_light {\n    background-image: url('"+o+("ru"===n?sr:ar)+"');\n  }\n\n  ."+r+"_theme-type_dark {\n    background-image: url('"+o+("ru"===n?cr:ur)+"');\n  }\n\n  ."+r+" iframe,\n  ."+r+"::before {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    border: 0;\n  }\n\n  ."+r+" iframe {\n    position: 'absolute';\n    top: '0';\n    right: '0';\n    bottom: '0';\n    left: '0';\n    border: '0';\n    display: 'block';\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n    z-index: 0;\n  }\n\n  ."+r+"_width_max {\n    width: 100%;\n    min-width: 100px;\n  }\n\n  ."+r+"::before {\n    content: '';\n    z-index: 1;\n  }\n"));var a=document.createElement("style");a.setAttribute("type","text/css"),a.textContent=function(t){var e=t.baseClass,n=t.backdropClass;return pr("\n  ."+e+" {\n    display: 'inline-block';\n    position: 'relative';\n    height: 54px;\n    min-width: 282px;\n    min-height: 40px;\n    padding: 0;\n    border-radius: 8px;\n  }\n\n  ."+e+":focus {\n    outline: none;\n    border-color: transparent;\n    box-shadow: 0 0 0 3px rgb(255 56 21 / 50%);\n  }\n\n  ."+n+":hover+."+e+"_theme-type_light,\n  ."+e+"_theme-type_light:hover,\n  ."+e+"_theme-type_light:active {\n    filter: brightness(0.95);\n  }\n\n  ."+n+":hover+."+e+"_theme-type_dark,\n  ."+e+"_theme-type_dark:hover,\n  ."+e+"_theme-type_dark:active {\n    filter: brightness(0.8);\n    opacity: 1;\n  }\n\n  ."+e+" iframe,\n  ."+e+"::before {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    border: 0;\n  }\n\n  ."+e+"_width_max {\n    width: 100%;\n    min-width: 100px;\n  }\n\n  ."+e+"::before {\n    content: '';\n    z-index: 1;\n  }\n")}({baseClass:xe,backdropClass:Me}),this.hasShadowRoot?(this.oldStyleElement=i,this.styleElement=a,this.parent?(qt.add(this.parent,i),qt.add(this.parent,a)):Z("SDK: Button cannot mount styles: has no parent element")):e.isMainStylesMounted||(document.head.appendChild(i),document.head.appendChild(a),e.isMainStylesMounted=!0)},n.unmountStyles=function(){this.oldStyleElement&&qt.remove(this.oldStyleElement),this.styleElement&&qt.remove(this.styleElement)},n.mountPaymentMethod=function(){if(this.buttonElement&&this.buttonElement.isConnected){var t,e,n=(t=this.buttonElement,e=getComputedStyle(t),{border:parseInt(e.borderRadius||e.borderTopRightRadius,10),height:parseInt(e.height,10)});this.paymentMethod=Ar.create(this.payment,this.options,n),this.paymentMethod.mount(this.buttonElement),this.paymentMethod.on(nr.Ready,this.onSdkPaymentMethodReady),this.paymentMethod.on(nr.Failure,this.onSdkPaymentMethodFailure),this.paymentMethod.on(wo.PaymentLock,this.onPaymentLock),this.paymentMethod.on(wo.PaymentUnlock,this.onPaymentUnlock)}else Z("SDK: Skip payment-method mount on unconnected button")},n.unmountPaymentMethod=function(){this.paymentMethod&&this.paymentMethod.destroy()},n.showPaymentMethod=function(){this.paymentMethod&&this.paymentMethod.show()},e}(Ht);function jr(t){try{if(Ct&&kt&&!Po()){var e=(o="qr_redirect",r=[],O(W,o,r)).includes(dn(t)),n=function(t,e){return T(W,t,e)}("qr_am_auth");return{redirect:e,auth:e&&n}}}catch(t){}var o,r;return{redirect:!1,auth:!1}}Dr.isMainStylesMounted=!1;var Fr={},Nr=function(t){return Fr[t.sessionId]},Kr=!1,zr="__YPMSG__",Vr=3e4,qr=new Ht;function Hr(t){var e="string"==typeof t.data?b(t.data,{}):t.data;if(e&&e.source===zr)return e}function Yr(t){if(!t||"function"!=typeof t.postMessage)throw new Error("RPC-Bell: Invalid target object")}function Zr(t){Kr||(Kr=!0,window.addEventListener("message",(function(t){var e=Hr(t);e&&qr.emit(e.route,{message:e,ports:t.ports})})));var e=t.target,n=t.origin,o=void 0===n?"*":n,r=t.scope,i=void 0===r?"*":r,a=t.reqTimeout,s=void 0===a?Vr:a;Yr(e);var u=[],c=function(t,e){return e+":"+t+":"+i},d=function(t){return"res:"+t+":"+i};function l(t,e,n){return{source:zr,route:t,id:e,payload:n}}function h(t,n){Yr(e),e.postMessage(t,o,n)}function f(t,e,n){var o,r,i=c(t,n?"req":"event"),a=d(t),f=C(8),p=l(i,f,e);if(n){var m=new MessageChannel;r=[m.port2];var y=function(){m.port1.onmessage=null,m.port1.close(),clearTimeout(o),u=u.filter((function(t){return t!==y}))};s>0&&(o=setTimeout((function(){y(),n.error(new Error("PmRequestTimeout"))}),s)),m.port1.onmessage=function(t){var e=Hr(t);e&&function(t){var e=t.message;e.route===a&&e.id===f&&(y(),n.success(e.payload))}({message:e})},u.push(y)}h(p,r)}return{emit:function(t,e){f(t,e)},listen:function(t,e){var n=c(t,"event"),o=qr.on(n,(function(t){var n=t.message;e(n.payload)}));u.push(o)},request:function(t,e){return new Promise((function(n,o){try{f(t,e,{success:n,error:o})}catch(t){o(t)}}))},handle:function(t,e){var n=c(t,"req"),o=d(t),r=qr.on(n,(function(t){var n=t.message,r=(t.ports||[])[0],i=!1,a=function(t){if(!i){i=!0;var e=l(o,n.id,t);r?(Yr(r),r.postMessage(e)):h(e)}},s=function(){return a()},u=e(n.payload,(function(t){return a(t)}));u&&"function"==typeof u.then?u.then(s,s):s()}));u.push(r)},destroy:function(){u.forEach((function(t){return t()})),u=[]}}}var $r=function(t){var e=t.borderRadius;return{width:"100%",height:"0",position:"relative",display:"inline-block","box-sizing":"border-box",overflow:"hidden","border-radius":Number.isFinite(e)?e+"px":"8px",transform:"translate3d(0, 0, 0)"}},Gr=function(t,e,n){var o=t.widgetTheme===oe.Dark?"#ffffff14":"#00000014",r={height:e+"px","min-width":"180px","border-color":"transparent","border-width":"0 1px"};return e>0&&(r.border="1px solid "+o),n&&(r["margin-top"]=n+"px",r["margin-bottom"]=n+"px"),r},Jr=function(t,e,n){var o={height:e+"px","min-width":"300px",border:"none"};return n&&(o["margin-top"]=n+"px",o["margin-bottom"]=n+"px"),o},Qr=function(t,e,n){var o={height:e+"px","min-width":"311px",border:"none"};return n&&(o["margin-top"]=n+"px",o["margin-bottom"]=n+"px"),o},Xr=function(){return{position:"absolute",top:"0",right:"0",bottom:"0",left:"0",border:"0",width:"100%",height:"100%","z-index":"1"}},ti=function(t){return t.Ready="ready",t.Resize="resize",t.Close="close",t.PaymentUpdate="payment-update",t.ReadyToShowInfo="ready-to-show-info",t.MountingStart="mounting-start",t.ShowSplitInfo="show-split-info",t.ShowCashbackInfo="show-cashback-info",t.RenderSplitTooltip="render-split-tooltip",t.RenderCashbackTooltip="render-cashback-tooltip",t.RenderSplitModal="render-split-modal",t.RenderCashbackModal="render-cashback-modal",t.CheckoutButtonClick="checkout-button-click",t}({}),ei=tr(Ee,{lowerCase:!0}),ni={widgetType:Qt.Info,borderRadius:16,widgetTheme:oe.Light};function oi(t,e,n){if(t)return function(t,e,n){var o={},r=C(8),i={sessionId:n.sessionId,merchantId:dn(n.sheet),amount:pn(n.sheet),currencyCode:mn(n.sheet),theme:e.widgetTheme,borderRadius:e.borderRadius,paymentMethods:gn(n.sheet),isPrepayment:e.isPrepayment},a=function(){};try{vo.of(o).mark($n.InfoWidget_MountingStarted),vo.ofSession(n.sessionId).mark($n.FirstViewMountingStarted);var s=function(){var t=document.createElement("div"),n=$r(Object.assign({},e));return qt.attrs(t,{class:ei()}),qt.style(t,Object.assign({},n,{transition:"height 150ms ease-in-out, margin 150ms ease-in-out"})),t}(),u=function(){var t=n.sessionId,e=n.env,o=document.createElement("iframe");return qt.style(o,Xr()),qt.attrs(o,{class:ei("frame"),src:jn(ge,t,{env:e,rpcs:r,extra:i,merchantId:dn(n.sheet)})}),o}();qt.add(t,s),qt.add(s,u);var c=function(t,a){if(!a.contentWindow)throw new Error("Unable to get frame.contentWindow");var s=Zr({target:a.contentWindow,scope:r});return s.listen(ti.Ready,(function(){vo.of(o).mark($n.InfoWidget_Mounted)})),s.listen(ti.Resize,(function(n){qt.style(t,Jr(e,n.height,n.offsetY))})),n.on(wo.PaymentUpdate,(function(){i.amount=pn(n.sheet),i.currencyCode=mn(n.sheet),s.emit(ti.PaymentUpdate,Object.assign({},i))})),function(){return s.destroy()}}(s,u);a=function(){c(),qt.remove(s)}}catch(t){Y("SDK: InfoWidget mount",t)}return{destroy:a}}(t,ae(e,ni),n);Z("SDK: Falsy parent on widget-info mount",{fn:"InfoWidget.mount",message:"parent: "+t})}var ri,ii,ai,si,ui=(ri=window,void 0===ii&&(ii=5),void 0===ai&&(ai=250),si=new Promise((function(t){var e=setInterval((function(){try{var n,o,r,i,a,s=(null===(n=ri.Ya)||void 0===n?void 0:n.Metrika)||(null===(o=ri.Ya)||void 0===o?void 0:o.Metrika2),u=null==s||null===(r=s.counters)||void 0===r||null===(i=r.call(s))||void 0===i||null===(a=i[0])||void 0===a?void 0:a.id;if(ii-=1,void 0!==u)return clearInterval(e),t(u);if(ii<=0)return clearInterval(e),t(null)}catch(t){G("merchantMetrika error",t)}}),ai)})),{reachGoal:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];si.then((function(t){var n,o;null!==t&&(null===(n=(o=window).ym)||void 0===n||n.call.apply(n,[o,t,"reachGoal"].concat(e)))}))}}),ci=function(t){return t.Click="click",t}(ci||{}),di=function(t){function e(){var e;return(e=t.call(this)||this).element=void 0,e.onClick=function(){e.emit(ci.Click,void 0)},e.element=document.createElement("div"),e.mount(),e}K(e,t),e.getInstance=function(){return this.instance?this.instance:new e};var n=e.prototype;return n.mount=function(){qt.style(this.element,{"z-index":2147483647,display:"none",position:"fixed",top:0,right:0,bottom:0,left:0,"background-color":"rgba(32, 33, 36, .6)"},!0),qt.add(document.body,this.element),qt.on(this.element,"click",this.onClick)},n.show=function(){qt.style(this.element,{display:"block"})},n.hide=function(){qt.style(this.element,{display:"none"})},n.destroy=function(){t.prototype.destroy.call(this),qt.off(this.element,"click",this.onClick),qt.remove(this.element)},e}(Ht);di.Events=ci,di.instance=void 0;var li,hi,fi,pi,mi,yi,vi,gi,bi,wi,ki,Si,Ci,Pi,xi=function(t){return t[t.hidden=0]="hidden",t[t.tooltip=1]="tooltip",t[t.drawer=2]="drawer",t[t.modal=3]="modal",t}({}),Ei=function(t){return t[t.block=0]="block",t[t.frame=1]="frame",t[t.line=2]="line",t[t.arrow=3]="arrow",t}({}),Mi=function(t){return t[t.light=100]="light",t[t.dark=101]="dark",t}({}),Ii=(li=null,hi=xi.hidden,{show:function(t,e){li=e,hi=t},hide:function(){li=null,hi=xi.hidden},get active(){return li},get mode(){return hi}}),Bi=null,Oi=function(){return Bi||(Bi={x:0,y:0,w:window.innerWidth,h:window.innerHeight,sx:window.scrollX,sy:window.scrollY}),Bi},Ti=function(){Bi=null},Ri=function(t){var e,n,o=t.getBoundingClientRect(),r=Oi();return{x:o.x+(null!==(e=r.sx)&&void 0!==e?e:0),y:o.y+(null!==(n=r.sy)&&void 0!==n?n:0),w:o.width,h:o.height}},Wi=function(t,e){var n=Object.assign({},t);for(var o in e)if(void 0!==n[o])for(var r in n[o]=Object.assign({},n[o]),e[o])n[o][r]=e[o][r];return n},Ai=function(t,e){var n,o,r=Oi(),i={x:t.x+t.w/2-e.w/2,y:t.y+t.h};return i.r=i.y+e.h>r.h+(null!==(n=r.sy)&&void 0!==n?n:0),i.x=Math.max(i.x,null!==(o=r.sx)&&void 0!==o?o:0),i.sy=i.r?t.h:0,i},_i="2147483647",Ui=((mi={})[Ei.block]={position:"fixed",top:"0px",left:"0px",bottom:"0px","z-index":_i,display:"flex","flex-direction":"column",width:"100%","justify-content":"flex-end",background:"#00000000",cursor:"pointer"},mi[Ei.frame]={"border-radius":"24px 24px 0 0",width:"100%",transform:"translateY(100%)"},mi[Ei.line]={position:"relative","z-index":"1",display:"flex",width:"100%",height:"12px","justify-content":"center","align-items":"center",transform:"translateY(100%)",opacity:"0"},mi[Mi.light]=((fi={})[Ei.frame]={background:"#fff"},fi[Ei.line]={color:"#000"},fi),mi[Mi.dark]=((pi={})[Ei.frame]={background:"#000"},pi[Ei.line]={color:"#fff"},pi),mi),Li=((yi={})[Ei.block]={background:"#00000080",transition:"background 150ms"},yi[Ei.frame]={transform:"translateY(0%)",transition:"transform 150ms, height 150ms"},yi[Ei.line]={opacity:"1",transition:"opacity 150ms cubic-bezier(0.9, 0.03, 0.7, 0.2)"},yi),Di=((vi={})[Ei.block]={background:"#00000000",transition:"background 150ms"},vi[Ei.frame]={transform:"translateY(100%)",transition:"transform 150ms"},vi[Ei.line]={opacity:"0",transition:""},vi),ji=(gi=null,bi=!1,{show:function(t){Ti(),t.clear(),t.setOverflow(),t.draw(Ui),t.nextTick((function(){t.draw(Li)})),bi=!0,t.afterAnimation((function(){return bi=!1}))},hide:function(t,e){t.nextTick((function(){t.draw(Di),t.afterAnimation((function(){t.resetOverflow(),e()}))}))},enable:function(t,e){var n,o=t.$(Ei.block),r=t.$(Ei.frame);null===(n=gi)||void 0===n||n();var i=function(t){t.preventDefault(),t.stopPropagation()};return gi=function(t){t&&i(t),bi?bi=!1:(qt.off(r,"touchend",i,{capture:!0}),qt.off(r,"mouseup",i,{capture:!0}),gi&&(qt.off(o,"touchend",gi),qt.off(o,"mouseup",gi)),e(),gi=null)},qt.on(r,"touchend",i,{capture:!0}),qt.on(o,"touchend",gi),qt.on(r,"mouseup",i,{capture:!0}),qt.on(o,"mouseup",gi),gi}}),Fi=((Si={})[Ei.block]={position:"fixed",top:"0px",left:"0px","z-index":_i,display:"flex","align-items":"center","justify-content":"center",width:"100%",height:"100%",opacity:"0",background:"#00000080"},Si[Ei.frame]={border:"0px solid transparent","border-radius":"24px",transform:"translateY(-5%)"},Si[Ei.line]={display:"none"},Si[Ei.arrow]={display:"none"},Si[Mi.light]=((wi={})[Ei.frame]={background:"#fff"},wi),Si[Mi.dark]=((ki={})[Ei.frame]={background:"#000"},ki),Si),Ni=((Ci={})[Ei.block]={opacity:"1",transition:"opacity 150ms"},Ci[Ei.frame]={transform:"translateY(0%)",transition:"transform 150ms"},Ci),Ki=((Pi={})[Ei.block]={opacity:"0",transition:"opacity 150ms"},Pi[Ei.frame]={transform:"translateY(-5%)",transition:"transform 150ms"},Pi),zi=function(){var t=null,e=!1;return{show:function(t){Ti(),t.clear(),t.setOverflow(),t.draw(Fi),t.nextTick((function(){t.draw(Ni)})),e=!0,t.afterAnimation((function(){return e=!1}))},hide:function(t,e){t.nextTick((function(){t.draw(Ki),t.afterAnimation((function(){t.resetOverflow(),e()}))}))},enable:function(n,o){var r,i=n.$(Ei.block),a=n.$(Ei.frame);null===(r=t)||void 0===r||r();var s=function(t){t.stopPropagation()};return t=function(){e?e=!1:(qt.off(a,"touchend",s,{capture:!0}),qt.off(a,"mouseup",s,{capture:!0}),t&&(qt.off(i,"touchend",t),qt.off(i,"mouseup",t)),t=null,o())},qt.on(a,"touchend",s,{capture:!0}),qt.on(i,"touchend",t),qt.on(a,"mouseup",s,{capture:!0}),qt.on(i,"mouseup",t),t}}}(),Vi=n(477),qi=n.n(Vi);function Hi(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Yi(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yi(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Yi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var Zi,$i,Gi,Ji,Qi,Xi=function(){var t,e,n,o,r,i=Mi.light,a={w:0,h:0},s=((t={})[Ei.frame]=c("iframe"),t[Ei.block]=c("div"),t[Ei.line]=c("div",'<svg xmlns="http://www.w3.org/2000/svg" fill="none" width="35" height="4"><rect fill="currentColor" fill-opacity="0.2" width="34" height="4" rx="2" /></svg>'),t[Ei.arrow]=c("div",'<svg xmlns="http://www.w3.org/2000/svg" fill="none" width="24" height="8"><path fill="currentColor" d="m12 0-.4.8-.5 1A12 12 0 0 1 1 8H0h24-1.1A12 12 0 0 1 12.4.8L12 0Z" /></svg>'),t),u=((e={})[Ei.block]={position:"absolute",top:"-9999px",left:"-9999px","-webkit-tap-highlight-color":"transparent"},e[Ei.frame]={border:"none"},e[Ei.arrow]={display:"none"},e[Ei.line]={display:"none"},e);function c(t,e){var n=document.createElement(t);return qt.attrs(n,{id:"yndx-"+C(5)}),e&&(n.innerHTML=e),n}function d(t){return s[t]}function l(){clearTimeout(o),cancelAnimationFrame(n);for(var t=0,e=Object.entries(s);t<e.length;t++){var r=e[t][1];r.removeAttribute("style"),r.removeAttribute("class")}f(u),h(a),p()}function h(t){a=t,qt.style(d(Ei.frame),{width:void 0!==t.w?t.w+"px":"auto",height:void 0!==t.h?t.h+"px":"auto"})}function f(t){void 0===t&&(t={});for(var e,n=Hi(Object.values(Ei).filter((function(t){return"number"==typeof t})));!(e=n()).done;){var o=e.value;qt.style(d(o),Object.assign({},qi()(o,{},t),B()([i,o],{},t)))}}function p(){r&&(qt.style(document.body,r),r=null)}return{$:d,mount:function(t){var e=d(Ei.block),n=d(Ei.frame);return qt.attrs(n,{src:t}),e.className="",qt.add(e,d(Ei.arrow)),qt.add(e,d(Ei.line)),qt.add(e,n),qt.add(document.body,e),l(),n},clear:l,theme:function(t){void 0===t&&(t="");var e=t.toLowerCase();"light"===e&&(i=Mi.light),"dark"===e&&(i=Mi.dark)},resize:h,draw:f,hide:function(){var t;f(((t={})[Ei.block]=u[Ei.block],t))},nextTick:function(t){n=requestAnimationFrame(t)},afterAnimation:function(t){o=setTimeout(t,250)},setOverflow:function(){if(!r){var t=function(){var t=getComputedStyle(document.body),e=t.overflow,n=t.paddingRight,o={original:{overflow:"visible"===e?"":e,"padding-right":""},hidden:{overflow:"hidden","padding-right":""}},r=window.innerWidth-document.documentElement.clientWidth;if(r>0){var i=Number(n)||0;o.original["padding-right"]=0===i?"":i+"px",o.hidden["padding-right"]=i+r+"px"}return o}(),e=t.hidden,n=t.original;r=n,qt.style(document.body,e)}},resetOverflow:p}},ta=((Gi={})[Ei.block]={position:"absolute","z-index":_i,display:"flex","flex-direction":"column",opacity:"0",transform:""},Gi[Ei.frame]={display:"block","box-sizing":"content-box","border-radius":"24px","box-shadow":"0px 6px 58px 0px rgba(33, 34, 36, 0.17)",overflow:"hidden"},Gi[Ei.arrow]={position:"relative","z-index":"1",display:"flex","justify-content":"center","align-items":"center",height:"8px",width:"100%",order:"-1",transform:""},Gi[Ei.line]={display:"none"},Gi[Mi.light]=((Zi={})[Ei.frame]={background:"#fff"},Zi[Ei.arrow]={color:"#fff"},Zi),Gi[Mi.dark]=(($i={})[Ei.frame]={background:"#000"},$i[Ei.arrow]={color:"#000"},$i),Gi),ea=((Ji={})[Ei.block]={opacity:"1",transition:"opacity 150ms"},Ji),na=((Qi={})[Ei.block]={opacity:"0",transition:"opacity 150ms"},Qi);function oa(t){var e,n,o,r;return{position:((e={})[Ei.block]={top:t.y+"px",left:t.x+"px"},e),show:t.r?Wi(ta,(o=null!==(n=t.sy)&&void 0!==n?n:0,(r={})[Ei.block]={transform:"translateY(calc(-100% - "+o+"px))"},r[Ei.arrow]={transform:"rotate(180deg)",order:"100"},r)):ta,showAnimation:ea,hideAnimation:na}}var ra,ia,aa,sa,ua,ca,da,la,ha,fa,pa=(ra=null,ia=new WeakMap,aa=null,{show:function(t,e){aa=t,Ti(),e.clear();var n=e.$(Ei.block),o=oa(Ai(Ri(t),Ri(n)));ia.set(t,o.hideAnimation),e.draw(o.show),e.draw(o.position),e.nextTick((function(){e.draw(o.showAnimation)}))},move:function(t,e){if(t===aa){Ti();var n=e.$(Ei.block),o=oa(Ai(Ri(t),Ri(n)));e.draw(o.position)}},hide:function(t,e,n){t===aa&&e.nextTick((function(){e.draw(ia.get(t)||na),e.afterAnimation((function(){return n()})),ia.delete(t)}))},enable:function(t,e,n){var o,r=e.$(Ei.block);null===(o=ra)||void 0===o||o();var i=t,a=t,s=!1,u=function(t){var e=t.target,n=t.type;a=e,"touchend"===n&&(s=!0)},c=function(t){var e=t.target,n=t.type;setTimeout((function(){var t;("touchend"===n&&!s||"mouseout"===n&&a===e)&&(null===(t=ra)||void 0===t||t())}),50)};return ra=function(){n(),i&&qt.off(i,"mouseout",c),qt.off(r,"mouseout",c),qt.off(r,"mouseover",u),qt.off(r,"touchend",u),qt.off(t,"mouseover",u),qt.off(t,"touchend",u),qt.off(document.body,"touchend",c),i=null,a=null,ra=null},qt.on(document.body,"touchend",c),qt.on(t,"mouseout",c),qt.on(r,"mouseout",c),qt.on(r,"mouseover",u),qt.on(r,"touchend",u),qt.on(t,"mouseover",u),qt.on(t,"touchend",u),ra}}),ma=function(){var t=Xi(),e=function(){var t=new WeakMap;function e(e){var n=t.get(e);n&&(n(),t.delete(e))}return{connect:function(n,o){e(n);var r=!0,i=function(){r=!0},a=function(){r=!1},s=function(t){t.preventDefault(),Ii.active!==n&&r&&o()};qt.on(n,"mouseover",s),qt.on(n,"click",s),qt.on(n,"touchend",s),qt.on(n,"touchstart",i),qt.on(n,"touchmove",a),qt.on(n,"touchcancel",a),t.set(n,(function(){qt.off(n,"mouseover",s),qt.off(n,"click",s),qt.off(n,"touchend",s),qt.off(n,"touchstart",i),qt.off(n,"touchcancel",a),qt.off(n,"touchmove",a)}))},disconnect:e}}();return{mount:t.mount,theme:t.theme,connect:e.connect,disconnect:e.disconnect,resize:function(e){t.resize(Ii.mode===xi.drawer?{h:e.h}:e),Ii.mode===xi.tooltip&&Ii.active&&pa.move(Ii.active,t)},showTooltip:function(e,n){return Ii.show(xi.tooltip,e),pa.show(e,t),pa.enable(e,t,(function(){Ii.hide(),pa.hide(e,t,t.hide),null==n||n()}))},showDrawer:function(e,n){return Ii.show(xi.drawer,null),ji.show(t),ji.enable(t,(function(){Ii.hide(),ji.hide(t,t.hide),null==n||n()}))},showModal:function(e){return Ii.show(xi.modal,null),zi.show(t),zi.enable(t,(function(){Ii.hide(),zi.hide(t,t.hide),null==e||e()}))}}},ya=function(){return ft()&&window.innerWidth<=500},va=function(t,e){return t?{h:window.innerHeight-50}:{w:Math.min(520,window.innerWidth-50),h:Math.min(730,window.innerHeight-50,(null==e?void 0:e.height)||1/0)}},ga=(sa=ma(),ua=function(t){return t()},ca=!1,da=null,la=ya(),ha=function(){},fa=function(){var t=function(){return ha=function(){}};la=ya(),ha=la?sa.showDrawer(document.body,t):sa.showModal(t)},{mount:function(t){if(!da&&!ca){vo.of(ga).mark($n.SimpleWidgetModal_MountingStarted);var e=C(8),n=jn(ke,null,{rpcs:e,env:t}),o=sa.mount(n);if(!o.contentWindow)return void(ca=!0);(da=Zr({target:o.contentWindow,scope:e})).listen(ti.Close,(function(){return ha()})),da.listen(ti.Resize,(function(t){sa.resize(va(la,t))})),da.listen(ti.Ready,(function(){vo.of(ga).mark($n.SimpleWidgetModal_Mounted),sa.resize(va(la)),ga.onReady=ua}))}},showCashbackModal:function(t){da&&(sa.theme(t.theme),da.request(ti.RenderCashbackModal,t).then(fa))},showSplitModal:function(t){da&&(sa.theme(t.theme),da.request(ti.RenderSplitModal,t).then(fa))},onReady:function(t){da&&da.listen(ti.Ready,(function(){return t()}))},onCheckout:function(t){da&&da.listen(ti.CheckoutButtonClick,(function(){return t()}))}}),ba=tr(Ee,{lowerCase:!0}),wa={widgetType:Qt.Simple,borderRadius:16,widgetTheme:oe.Light};function ka(t,e,n,o){var r={},i=C(8),a={sessionId:n.sessionId,merchantId:dn(n.sheet),amount:pn(n.sheet),currencyCode:mn(n.sheet),theme:e.widgetTheme,showCheckout:Boolean(o)};var s=function(){};try{vo.of(r).mark($n.SimpleWidget_MountingStarted),vo.ofSession(n.sessionId).mark($n.FirstViewMountingStarted);var u=function(){var t=document.createElement("div"),n=$r(Object.assign({},e,{borderWidth:"1px"}));return qt.attrs(t,{class:ba()}),qt.style(t,Object.assign({},n,{"border-color":"transparent","border-width":"0 1px",transition:"height 150ms ease-in-out, margin 150ms ease-in-out"})),t}(),c=function(){var t=n.sessionId,e=n.env,o=document.createElement("iframe");return qt.style(o,Xr()),qt.attrs(o,{class:ba("frame"),src:jn(we,t,{env:e,rpcs:i,extra:a,merchantId:dn(n.sheet)})}),o}();qt.add(t,u),qt.add(u,c);var d=function t(s,u){if(!u.contentWindow)throw new Error("Unable to get frame.contentWindow");var c=u.contentWindow,d=Zr({target:u.contentWindow,scope:i});return d.listen(ti.MountingStart,(function(){c!==u.contentWindow&&($("SDK: Widget remounted. Need to reconnect",{widgetType:e.widgetType,buttonType:e.buttonType}),d.destroy(),t(s,u),c=u.contentWindow)})),o&&ga.onCheckout(o),d.listen(ti.Ready,(function(){vo.of(r).mark($n.SimpleWidget_Mounted),ga.onReady((function(){return d.emit(ti.ReadyToShowInfo)}))})),d.listen(ti.Resize,(function(t){qt.style(s,Gr(e,t.height,t.offsetY))})),d.listen(ti.ShowSplitInfo,(function(){return ga.showSplitModal(a)})),d.listen(ti.ShowCashbackInfo,(function(){return ga.showCashbackModal(a)})),n.on(wo.PaymentUpdate,(function(){a.amount=pn(n.sheet),a.currencyCode=mn(n.sheet),d.emit(ti.PaymentUpdate,Object.assign({},a))})),function(){return d.destroy()}}(u,c);s=function(){d(),qt.remove(u)}}catch(t){Y("SDK: SimpleWidget mount",t)}return{destroy:s}}function Sa(t,e,n,o){if(t)return ga.mount(n.env),ka(t,ae(e,wa),n,o);Z("SDK: Falsy parent on widget-info mount",{fn:"SimpleWidget.mount",message:"parent: "+t})}var Ca=function(){return ft()&&window.innerWidth<=500},Pa=function(t,e){return t?{h:window.innerHeight-50}:{w:Math.min(520,window.innerWidth-50),h:Math.min(730,window.innerHeight-50,(null==e?void 0:e.height)||1/0)}},xa=function(){var t=ma(),e=function(t){return t()},n=!1,o=null,r=Ca(),i=function(){},a=function(){var e=function(){return i=function(){}};r=Ca(),i=r?t.showDrawer(document.body,e):t.showModal(e)};return{mount:function(a){if(!o&&!n){vo.of(xa).mark($n.UltimateWidget_MountingStarted);var s=C(8),u=jn(ke,null,{rpcs:s,env:a}),c=t.mount(u);if(!c.contentWindow)return void(n=!0);(o=Zr({target:c.contentWindow,scope:s})).listen(ti.Close,(function(){return i()})),o.listen(ti.Resize,(function(e){t.resize(Pa(r,e))})),o.listen(ti.Ready,(function(){vo.of(xa).mark($n.UltimateWidget_MountingStarted),t.resize(Pa(r)),xa.onReady=e}))}},showCashbackModal:function(e){o&&(t.theme(e.theme),o.request(ti.RenderCashbackModal,e).then(a))},showSplitModal:function(e){o&&(t.theme(e.theme),o.request(ti.RenderSplitModal,e).then(a))},onReady:function(t){o&&o.listen(ti.Ready,(function(){return t()}))}}}();function Ea(t,e,n){return void 0===t&&(t=20),void 0===e&&(e=0),void 0===n&&(n=32),Math.max(e,Math.min(t,n))}var Ma=tr(Ee,{lowerCase:!0}),Ia={widgetType:Qt.Ultimate,borderRadius:16,widgetTheme:oe.Light};function Ba(t,e,n,o){var r={},i=C(8),a={sessionId:n.sessionId,merchantId:dn(n.sheet),amount:pn(n.sheet),currencyCode:mn(n.sheet),theme:e.widgetTheme,borderRadius:Ea(e.borderRadius),paymentMethods:gn(n.sheet),isPrepayment:e.isPrepayment,paymentSheet:n.sheet,padding:e.padding,showCheckout:Boolean(o),hideWidgetHeader:e.hideWidgetHeader,widgetSize:e.widgetSize,widgetBackground:e.widgetBackground,withOutline:e.withOutline};var s=function(){};try{vo.of(r).mark($n.UltimateWidget_MountingStarted),vo.ofSession(n.sessionId).mark($n.FirstViewMountingStarted);var u=function(){var t=document.createElement("div"),n=$r(Object.assign({},e));return qt.attrs(t,{class:Ma()}),qt.style(t,Object.assign({},n,{transition:"height 150ms ease-in-out, margin 150ms ease-in-out"})),t}(),c=function(){var t=n.sessionId,e=n.env,o=document.createElement("iframe");return qt.style(o,Xr()),qt.attrs(o,{class:Ma("frame"),src:jn(be,t,{env:e,rpcs:i,extra:a,merchantId:dn(n.sheet)})}),o}();qt.add(t,u),qt.add(u,c);var d=function t(s,u){if(!u.contentWindow)throw new Error("Unable to get frame.contentWindow");var c=u.contentWindow,d=Zr({target:u.contentWindow,scope:i});return d.listen(ti.MountingStart,(function(){c!==u.contentWindow&&($("SDK: Widget remounted. Need to reconnect",{widgetType:e.widgetType,buttonType:e.buttonType}),d.destroy(),t(s,u),c=u.contentWindow)})),o&&d.listen(ti.CheckoutButtonClick,(function(){return o()})),d.listen(ti.Ready,(function(){vo.of(r).mark($n.UltimateWidget_Mounted),xa.onReady((function(){return d.emit(ti.ReadyToShowInfo)}))})),d.listen(ti.Resize,(function(t){qt.style(s,Qr(e,t.height,t.offsetY))})),d.listen(ti.ShowSplitInfo,(function(){return xa.showSplitModal(a)})),d.listen(ti.ShowCashbackInfo,(function(){return xa.showCashbackModal(a)})),n.on(wo.PaymentUpdate,(function(){a.amount=pn(n.sheet),a.currencyCode=mn(n.sheet),d.emit(ti.PaymentUpdate,Object.assign({},a))})),function(){return d.destroy()}}(u,c);s=function(){d(),qt.remove(u)}}catch(t){Y("SDK: UltimateWidget mount",t)}return{destroy:s}}function Oa(t,e,n,o){if(t){xa.mount(n.env);var r=ae(e,Ia);return r.borderRadius=Ea(r.borderRadius),Ba(t,r,n,o)}Z("SDK: Falsy parent on widget-info mount",{fn:"UltimateWidget.mount",message:"parent: "+t})}var Ta=function(t){return t.Ready="widget-ready",t.Failure="widget-failure",t.WidgetExtrasChange="widget-extras-change",t.WidgetSizeChange="widget-size-change",t}({}),Ra=function(t){return t.Update="update",t.Lock="lock",t.Unlock="unlock",t.Config="config",t}({}),Wa=function(t,e){if(void 0===e&&(e=200),t){var n=qt.on(t,"transitionend",(function(e){t===e.target&&(n(),qt.style(t,{transition:""}))}));setTimeout((function(){qt.style(t,{transition:""}),n()}),e)}},Aa=function(t){function e(e,n){var o;return(o=t.call(this)||this).frame=void 0,o.frameListener=void 0,o.frameEmitter=void 0,o.payment=void 0,o.widgetOptions=void 0,o.onMessage=function(t){t&&t.type&&o.emit(t.type,t)},o.onPaymentUpdate=function(){o.frameEmitter&&o.frameEmitter.send({type:Ra.Update,paymentSheet:o.payment.sheet})},o.onPaymentProcess=function(){o.frameEmitter&&o.frameEmitter.send({type:Ra.Lock})},o.onPaymentLock=function(){o.frameEmitter&&o.frameEmitter.send({type:Ra.Lock})},o.onPaymentUnlock=function(){o.frameEmitter&&o.frameEmitter.send({type:Ra.Lock})},o.updateConfig=function(t){o.frameEmitter&&o.frameEmitter.send({type:Ra.Config,config:t})},o.payment=e,o.widgetOptions=n,o.subscribePayment(),o}K(e,t),e.create=function(t,n){return new e(t,n)};var n=e.prototype;return n.destroy=function(){t.prototype.destroy.call(this),this.unmount()},n.mount=function(t){try{if(this.frame)return;var e=this.widgetOptions,n=this.payment,o=n.sheet,r=n.env,i=Wr(o),a=e.widgetType===Qt.BnplPreview?Se:ve,s=jn(a,this.payment.sessionId,{env:r,extra:{paymentSheet:i,widgetOptions:e},merchantId:dn(o)}),u=Fn(s);this.frame=Ke(s,Object.assign({},Xr(),{opacity:"0"})),qt.add(t,this.frame),this.connect(u)}catch(t){Y("sdk-widget mount",t)}},n.unmount=function(){this.frame&&(qt.remove(this.frame),this.frame=void 0),this.frameListener&&(this.frameListener.destroy(),this.frameListener=void 0),this.frameEmitter&&(this.frameEmitter.destroy(),this.frameEmitter=void 0),this.unsubscribePayment()},n.show=function(){this.frame&&qt.animate(this.frame,{property:"opacity",from:"0",to:"1"})},n.connect=function(t){var e,n,o=this,r=new ct({targetUrl:t});this.frameListener=new Lt(r),this.frameListener.on(this.onMessage);var i=null===(e=this.frame)||void 0===e?void 0:e.contentWindow;this.on(Ta.Ready,(function(){var t,e;if(i!==(null===(t=o.frame)||void 0===t?void 0:t.contentWindow))if($("SDK: Widget remounted. Need to reconnect",{widgetType:o.widgetOptions.widgetType}),i=null===(e=o.frame)||void 0===e?void 0:e.contentWindow)try{o.frameEmitter=new At(r,i)}catch(t){Y("SDK: Widget Message Connection Emitter failed on remount",t)}else $("SDK: remount. No content window")})),this.frameEmitter=new At(r,null!==(n=i)&&void 0!==n?n:void 0)},n.subscribePayment=function(){this.payment.on(wo.PaymentUpdate,this.onPaymentUpdate),this.payment.on(wo.PaymentProcess,this.onPaymentProcess),this.payment.on(wo.PaymentLock,this.onPaymentLock),this.payment.on(wo.PaymentUnlock,this.onPaymentUnlock)},n.unsubscribePayment=function(){this.payment.off(wo.PaymentUpdate,this.onPaymentUpdate),this.payment.off(wo.PaymentProcess,this.onPaymentProcess),this.payment.off(wo.PaymentLock,this.onPaymentLock),this.payment.off(wo.PaymentUnlock,this.onPaymentUnlock)},e}(Ht),_a=function(t){return t.isPayWithSplit="PWS",t.splitOnly="SO",t.splitActivePlan="SAP",t}({}),Ua=tr(Ee,{lowerCase:!0}),La={widgetType:Qt.Compact,buttonType:Yt.Checkout,bnplSelected:!1,borderRadius:16,buttonTheme:Zt.Black,hideWidgetHeader:!1,padding:Xt.Default,widgetSize:te.Medium,widgetBackground:ee.Default,withOutline:!1},Da={type:Yt.Pay,theme:Zt.Black,width:$t.MaxImportant,style:{borderRadius:"16px",height:"100%"},innerType:Jt.Widget},ja=function(t){function e(e,n){var o;(o=t.call(this)||this).hasShadowRoot=!1,o.payment=void 0,o.parent=void 0,o.options=void 0,o.buttonOptions=void 0,o.styleElement=void 0,o.widgetContainerElement=void 0,o.buttonContainer=void 0,o.widget=void 0,o.button=void 0,o.hasButton=void 0,o.renderWatcherUnsubscribe=function(){},o.animateShow=function(){if(o.widgetContainerElement&&!wn(o.payment.sheet)&&o.options.widgetType!==Qt.BnplRequired){var t=o.widgetContainerElement.getBoundingClientRect().width<325?"40px":"48px";qt.style(o.widgetContainerElement,{height:t}),setTimeout((function(){qt.style(o.widgetContainerElement,{transition:"height 150ms ease-in-out"})}))}},o.onButtonClick=function(t){o.emit(Gt.Click,t)},o.onSdkWidgetReady=function(t){o.buttonOptions&&t.buttonTheme&&(o.buttonOptions.theme=t.buttonTheme),o.updateConfig(),o.showWidget(),o.updateButtonOptionsExtra(t.buttonExtra),Wa(o.buttonContainer,200),Wa(o.widgetContainerElement,200),vo.of(o).mark($n.WidgetMounted)},o.onSdkWidgetExtrasChange=function(t){var e,n,r=(e=t,(n={})[_a.isPayWithSplit]=B()(["split","payWithSplit"],void 0,e),n[_a.splitOnly]=B()(["split","onlySplit"],void 0,e),n[_a.splitActivePlan]=B()(["split","activePlan"],void 0,e),n);o.updateButtonOptionsExtra({bnplSelected:r[_a.isPayWithSplit]}),o.payment.emit(wo.PaymentExtra,{innerType:o.buttonOptions.innerType,bnplSelected:o.buttonOptions.bnplSelected}),function(t,e){e&&Le(e)&&(Fr[t.sessionId]=Fr[t.sessionId]||{},Object.entries(e).forEach((function(e){var n=e[0],o=e[1];Fr[t.sessionId][n]=o})))}(o.payment,r)},o.onSdkWidgetSizeChange=function(t){var e=t.widgetSize,n=t.buttonPosition,r=t.badgesHeight,i=n||{},a=i.top,s=i.left,u=i.width,c=i.height;e.height&&o.widgetContainerElement&&(o.widgetContainerElement.style.height=e.height,"0"===e.height?qt.hide(o.widgetContainerElement,!0):qt.show(o.widgetContainerElement)),o.buttonContainer&&(a&&qt.style(o.buttonContainer,{top:a}),s&&qt.style(o.buttonContainer,{left:s}),u&&qt.style(o.buttonContainer,{width:u}),c&&qt.style(o.buttonContainer,{height:c})),r&&o.button&&o.button.setBackdrop(r),c&&o.options.borderRadius&&o.options.borderRadius>=parseFloat(c)/2&&(o.options.borderRadius=parseFloat(c)/2,o.widgetContainerElement&&(o.widgetContainerElement.style.borderRadius=o.options.borderRadius+"px")),o.hasButton&&!o.button&&o.mountButton()},o.onSdkWidgetFailure=function(){o.unmountWidget(),o.unmountButton()};try{o.payment=n,o.options=ae(e,La),o.hasButton=o.options.widgetType!==Qt.BnplPreview;var r=o.isWidgetTypeWithSplitSelect()?o.isBnplSelected():void 0;o.buttonOptions=ie({style:{borderRadius:o.options.borderRadius+"px",height:"100%"},theme:o.options.buttonTheme,innerType:Jt.Widget,bnplSelected:r},Da)}catch(t){throw Y("button create",t),t}return o}K(e,t),e.create=function(t,n){return new e(t,n)};var n=e.prototype;return n.destroy=function(){t.prototype.destroy.call(this),this.unmount()},n.mount=function(t){if(t){vo.of(this).mark($n.WidgetMountingStarted),vo.ofSession(this.payment.sessionId).mark($n.FirstViewMountingStarted),this.parent&&this.unmount();try{this.parent=t,this.hasShadowRoot=void 0!==window.ShadowRoot&&t instanceof ShadowRoot,this.mountStyles(),this.mountWidgetContainer(),this.hasButton&&(this.mountButtonContainer(),wn(this.payment.sheet)||this.options.widgetType===Qt.BnplRequired?(qt.style(this.widgetContainerElement,{transition:""}),qt.style(this.buttonContainer,{transition:""})):this.mountButton()),this.isOnlyButton()||this.mountWidget()}catch(t){Y("button mount",t)}}else Z("SDK: Falsy parent on widget mount",{fn:"Widget.mount",message:"parent: "+t})},n.unmount=function(){this.parent=void 0,this.renderWatcherUnsubscribe(),this.unmountButton(),this.unmountButtonContainer(),this.unmountWidget(),this.unmountWidgetContainer(),this.unmountStyles()},n.mountWidgetContainer=function(){var t=Ua(),e=document.createElement("div");e.setAttribute("class",t),qt.style(e,$r({borderRadius:this.options.borderRadius})),this.parent?qt.add(this.parent,e):H("SDK: Cannot mount widget container: has no parent element"),this.widgetContainerElement=e},n.mountButtonContainer=function(){if(this.widgetContainerElement){var t=Ua("container",{}),e=document.createElement("div");e.setAttribute("class",t),qt.style(e,{position:"absolute",top:"0",right:"0",bottom:"0",left:"0",border:"0",width:"100%",height:"100%","z-index":"2",display:"flex","flex-direction":"column-reverse","justify-content":"flex-end",transition:"top 150ms ease-in-out, left 150ms ease-in-out, width 150ms ease-in-out"}),qt.add(this.widgetContainerElement,e),this.animateShow(),this.buttonContainer=e}else H("SDK: Skip widget button mount on nonexisting parent")},n.unmountWidgetContainer=function(){this.widgetContainerElement&&qt.remove(this.widgetContainerElement)},n.unmountButtonContainer=function(){this.buttonContainer&&qt.remove(this.buttonContainer)},n.mountStyles=function(){var t=document.createElement("style");t.setAttribute("type","text/css"),this.hasShadowRoot?(this.styleElement=t,this.parent?qt.add(this.parent,t):Z("SDK: Widget cannot mount styles: has no parent element")):e.isMainStylesMounted||(document.head.appendChild(t),e.isMainStylesMounted=!0)},n.unmountStyles=function(){this.styleElement&&qt.remove(this.styleElement)},n.mountWidget=function(){this.widgetContainerElement&&this.widgetContainerElement.isConnected?(this.widget=Aa.create(this.payment,this.options),this.widget.mount(this.widgetContainerElement),this.widget.on(Ta.Ready,this.onSdkWidgetReady),this.widget.on(Ta.Failure,this.onSdkWidgetFailure),this.widget.on(Ta.WidgetSizeChange,this.onSdkWidgetSizeChange),this.widget.on(Ta.WidgetExtrasChange,this.onSdkWidgetExtrasChange)):Z("Skip payment-method mount on unconnected button")},n.unmountWidget=function(){this.widget&&this.widget.destroy()},n.showWidget=function(){this.widget&&this.widget.show()},n.updateConfig=function(){var t=this;this.widget&&!bn(this.payment.sheet)&&Promise.all([Fe.getP("split006En"),Fe.getP("split006BL"),Fe.getP("split006WL")]).then((function(e){var n,o=e[0],r=e[1];null===(n=t.widget)||void 0===n||n.updateConfig({split006Promo:o&&!r.has(dn(t.payment.sheet))})}))},n.mountButton=function(){if(this.button&&this.unmountButton(),this.buttonOptions&&this.buttonContainer){var t=Dr.create(this.buttonOptions,this.payment,{disableStickyButton:!0});vo.of(this).fork({isInWidget:!0}).bind(t),this.button=t,this.button.mount(this.buttonContainer),this.button.on(Gt.Click,this.onButtonClick)}else Z("Skip private button mount on nonexisting parent")},n.isOnlyButton=function(){return!wn(this.payment.sheet)&&this.options.widgetType===Qt.Mini},n.unmountButton=function(){this.button&&this.button.destroy()},n.updateButtonOptionsExtra=function(t){t&&(this.buttonOptions=Object.assign({},this.buttonOptions,t))},n.isWidgetTypeWithSplitSelect=function(){return!!this.options.widgetType&&ne.includes(this.options.widgetType)},n.isBnplSelected=function(){return this.options.bnplSelected||this.options.widgetType===Qt.BnplRequired},e}(Ht);ja.isMainStylesMounted=!1;var Fa=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).resolvers={},e.hasListener=function(t){return e.listeners[t]&&e.listeners[t].length>0},e}K(e,t);var n=e.prototype;return n.resolve=function(t,e){var n=this.resolvers[t];n&&je(e)&&e.then(n)},n.on=function(e,n){return t.prototype.on.call(this,e,n)},n.emit=function(t,e){var n=this;(this.listeners[t]||[]).forEach((function(o){var r=o.call(n,e);n.resolve(t,r)}))},e}(Ht),Na=function(t){function e(e){var n;return(n=t.call(this)||this).payment=void 0,n.payment=e,n}return K(e,t),e.prototype.setPayment=function(t){this.payment=t},F(e,[{key:"env",get:function(){return this.payment.env}},{key:"sheet",get:function(){return this.payment.sheet}},{key:"sessionId",get:function(){return this.payment.sessionId}},{key:"signalData",get:function(){return Object.assign({},Fo(Object.assign({env:this.payment.env},this.payment.sheet)),{sessionId:this.sessionId})}}])}(Ht),Ka=["env"],za=Promise.all([U("simple-widget"),Fe.getP("enabledSW"),Fe.getP("blacklistSW")]),Va=function(e){function n(n,o){var r,i;if((r=e.call(this)||this).offFrameBroadcastListener=void 0,r.checkoutCounter=0,r.overlay=void 0,r.connectionOptions=void 0,r.connectionManager=void 0,r.connectionAgent=void 0,r.checkTargetOpeningTimer=void 0,r.abortChecksAttempts=0,r.checkoutSessionCompleted=void 0,r.paymentProcessing=!1,r.formLoading=!1,r.formBaseUrl=void 0,r.formWindowFeatures=void 0,r.proxy=void 0,r.buttons=[],r.widgets=[],r.env=void 0,r.sheet=void 0,r.sessionType=void 0,r.sessionId=void 0,r.onMessage=function(t){var e;if(t&&t.type)switch(t.type){case go.Ready:G("SDK: Form message event",{sdkInFrame:Po(),eventType:t.type}),r.formLoading=!1,r.emit(t.type,t);break;case go.Change:case go.Reset:case go.Setup:r.emit(t.type,t);break;case go.Success:case go.Process:G("SDK: Form message event",{sdkInFrame:Po(),eventType:t.type,sessionType:r.sessionType});var n=t.type===go.Success||t.type===go.Process&&t.paymentMethodInfo.type===tn.Split;r.completeCheckoutSession(),t.type===go.Process&&r.processCheckout(),n||r.closeCheckoutWindow("process"),function(t,e){void 0===e&&(e=0);var n=Date.now();if(!document.visibilityState)return t("undefined");var o=function(){var r=document.visibilityState;"visible"===r?t():e>0&&Date.now()-n>e?t("timer",r):Nn(o,Math.min(e,500))};Nn(o,0)}((function(e,n){e&&Z("SDK: Unexpected page focus",{trigger:e,state:n}),r.emit(t.type,t)}),5e3);break;case go.Abort:G("SDK: Form message event",{sdkInFrame:Po(),eventType:t.type,sessionType:r.sessionType}),r.startCheckingTargetOpening(t);break;case go.Error:G("SDK: Form message event",{sdkInFrame:Po(),eventType:t.type,reason:t.reason,sessionType:r.sessionType}),r.completeCheckoutSession(),r.closeCheckoutWindow("error"),r.emit(t.type,t);break;case go.Ping:var o={type:ko.Ping};null!==(e=r.connectionAgent)&&void 0!==e&&e.isConnected?r.connectionAgent.send(o):r.sendFrameBroadcastMessage(o)}},r.onOverlayClick=function(){r.connectionAgent&&r.connectionAgent.focus()},r.onBeforeUnload=function(){r.destroyChannel()},r.onTargetOpeningCheck=function(t){!(r.connectionAgent&&r.connectionAgent.isConnected)&&(r.abortChecksAttempts+=1),r.abortChecksAttempts>=2&&(r.destroyChannel(),r.checkoutSessionCompleted||(r.completeCheckoutSession(),G("SDK: Not connected",{sdkInFrame:Po(),eventType:t.type,sessionType:r.sessionType}),r.emit(t.type,t)))},null===n)throw H("SDK: Payment create error: payment data is null"),new Error("Payment data is null");try{var a=n.env,s=void 0===a?Ge.Production:a,u=t(n,Ka);r.env=s,r.sheet=u,r.sessionType=u.type,r.sessionId=o,r.proxy=new Na(r),r.overlay=di.getInstance(),r.overlay.on(di.Events.Click,r.onOverlayClick),r.formBaseUrl=(i=r.sessionType)===$e.Payment?fe:[$e.Checkout,$e.CheckoutOld].includes(i)?pe:he,r.formWindowFeatures=function(t){var e=window.screen,n=t[0],o=t[1];if(!(e.width<n||e.height<o))return["scrollbars=yes","resizable=yes","status=no","location=no","toolbar=no","menubar=no","width="+n,"height="+o,"left="+(e.width-n>>1),"top="+(e.height-o>>1)].join(",")}(r.sessionType===$e.Payment?Pe:Ce);var c=jn(r.formBaseUrl,r.sessionId,{env:s,extra:Nr(r.__proxy()),sessionType:r.sessionType,merchantId:dn(r.sheet)}),d=function(t){return t+"-"+Date.now()}("YandexPay");r.connectionOptions=new ct({targetUrl:c,channel:d,sessionId:r.sessionId}),r.connectionManager=new Go(r.connectionOptions),r.connectionManager.on(r.onMessage),qt.on(window,"beforeunload",r.onBeforeUnload),qt.on(window,"unload",r.onBeforeUnload),r.logIfMissedImportantSubscribers(),r.logMissedQueryTokenHandler()}catch(t){throw Y("SDK: Payment create error",t),t}return r}K(n,e);var o=n.prototype;return o.__proxy=function(){return this.proxy},o.mountButton=function(t,e){var n=this,o=new Dr(e,this.proxy);vo.ofSession(this.sessionId).fork().bind(o);var r=o.on(Gt.Click,(function(){return n.checkout()}));o.mount(t),this.buttons.push({parent:t,button:o,offCheckout:r})},o.unmountButton=function(t){this.buttons=this.buttons.filter((function(e){var n=e.parent,o=e.button;return t===n&&o.destroy(),t!==n}))},o.mountWidget=function(t,e){var n=this,o=function(){var o=new ja(e,n.proxy);vo.ofSession(n.sessionId).fork().bind(o);var r=o.on(Gt.Click,(function(){return n.checkout()}));o.mount(t),n.widgets.push({parent:t,widget:o,offCheckout:r})},r=function(){var o=Sa(t,e,n.proxy);o&&n.widgets.push({parent:t,widget:o,offCheckout:function(){}})};if(e.widgetType===Qt.Simple)return r();if(e.widgetType!==Qt.Info){var i;if(e.widgetType===Qt.Ultimate)return function(){if(sn(n.proxy.sheet))throw new Error("Ultimate widget does not support payment sheet v2");var o=Oa(t,e,n.proxy);o&&n.widgets.push({parent:t,widget:o,offCheckout:function(){}})}();e.widgetType===Qt.BnplPreview?za.then((function(t){var e=t[0],i=t[1],a=t[2];!e&&!i||a.has(dn(n.sheet))?o():r()})):o()}else(i=oi(t,e,n.proxy))&&n.widgets.push({parent:t,widget:i,offCheckout:function(){}})},o.unmountWidget=function(t){this.widgets=this.widgets.filter((function(e){var n=e.parent,o=e.widget;return t===n&&o.destroy(),t!==n}))},o.update=function(t){try{$("SDK: Update paymentSheet started"),_n(this.sheet,t)&&this.proxy.emit(wo.PaymentUpdate,null);var e={type:ko.Update,updateData:t};this.connectionAgent&&this.connectionAgent.isConnected?(this.connectionAgent.send(e),this.formLoading&&Y("SDK: Update sheet on form loading, type: "+this.sessionType)):this.sendFrameBroadcastMessage(e)}catch(t){Y("SDK: Update paymentSheet failed",t)}},o.complete=function(t,e){var n={type:ko.Complete,reason:t,errors:JSON.stringify(e)};this.connectionAgent&&this.connectionAgent.isConnected?this.connectionAgent.send(n):(this.sendFrameBroadcastMessage(n),this.destroyChannel())},o.checkout=function(){try{var t=Co.getInstance();if(this.paymentProcessing)return;if(this.connectionAgent)return void this.connectionAgent.focus();var e=t.paymentReady.get(this.sessionId);if(!1===e)return this.proxy.emit(wo.PaymentError,null),void Z("SDK: Payment is forbidden by payment ready check");null==e&&Z("SDK: Check payment ready result is missing"),t.paymentStart.set(this.sessionId,!0),this.checkoutCounter+=1,this.checkoutSessionCompleted=!1,this.formLoading=!0,ui.reachGoal(wn(this.sheet)?"ym-begin-yasplit":"ym-begin-yapay");var n=jr(this.sheet),o=wt?void 0:this.formWindowFeatures,r=jn(this.formBaseUrl,this.sessionId,{checkoutCounter:this.checkoutCounter,env:this.env,sessionType:this.sessionType,extra:Nr(this.__proxy()),amAuth:n.auth,duid:Jo("_ym_uid",void 0),sdkInIframe:Po(),merchantId:dn(this.sheet)});this.connectionManager.options.targetUrl=r;try{this.connectionAgent=this.connectionManager.open({type:ko.Payment,sheet:this.sheet},o,this.logQueryModeInIFrame,n.redirect,Po()),this.startCheckingTargetOpening({type:go.Abort,reason:bo.Close}),wt||this.overlay.show(),Lo.sdk.buttonCheckout(this.proxy.signalData)}catch(t){var i;G("SDK: Start listen broadcast",{sdkInFrame:Po(),sessionType:this.sessionType}),Lo.sdk.buttonCheckoutError(this.proxy.signalData),null===(i=this.overlay)||void 0===i||i.hide(),this.proxy.emit(wo.PaymentError,null),this.startBroadcastMode()}}catch(t){Lo.sdk.buttonCheckoutError(this.proxy.signalData),Y("SDK: Payment checkout error",t)}},o.sendFrameBroadcastMessage=function(t){var e=String(new ht(t,this.connectionOptions.channel,this.connectionOptions.sourceUrl));Co.getInstance().sendMessage({type:wo.SdkBroadcastSendMessage,message:e,channel:this.sessionId})},o.onFrameBroadcastMessage=function(t){var e=new MessageEvent("message",{data:t.message});try{var n=function(t,e){var n=Ot(t);return Bt(n,e)}(e,this.connectionOptions),o=n.payload;this.onMessage(o)}catch(t){Z("SDK: Can't parse broadcast frame message")}},o.startBroadcastMode=function(){var t=this;this.offFrameBroadcastListener=Co.getInstance().on(wo.SdkBroadcastOnMessage,(function(e){return t.onFrameBroadcastMessage(e)})),this.sendFrameBroadcastMessage({type:ko.Ping})},o.completeCheckoutSession=function(){var t;this.checkoutSessionCompleted=!0,this.formLoading=!1,null===(t=this.overlay)||void 0===t||t.hide(),Co.getInstance().paymentStart.delete(this.sessionId)},o.processCheckout=function(){this.paymentProcessing=!0,this.buttons.forEach((function(t){return(0,t.offCheckout)()})),this.proxy.emit(wo.PaymentProcess,null)},o.closeCheckoutWindow=function(t){var e=this;this.connectionAgent&&this.connectionAgent.isConnected?(this.connectionAgent.close(),this.stopCheckingTargetOpening(),setTimeout((function(){e.connectionAgent&&e.connectionAgent.isConnected&&Z("SDK: Pay form not closed",{source:"sdk",from:t})}),3e3)):this.sendFrameBroadcastMessage({type:ko.Complete,reason:So.Close})},o.destroy=function(){e.prototype.destroy.call(this),this.complete(So.Close),this.destroyChannel(),vo.unbindFromSession(this.sessionId),this.sheet=void 0,this.connectionManager.destroy(),this.connectionManager=null,this.overlay.destroy(),this.overlay=null,this.buttons.forEach((function(t){return t.button.destroy()})),this.buttons=[],this.widgets.forEach((function(t){return t.widget.destroy()})),this.widgets=[],this.offFrameBroadcastListener&&this.offFrameBroadcastListener()},o.destroyChannel=function(){this.stopCheckingTargetOpening(),this.connectionAgent&&(this.connectionAgent.destroy(),this.connectionAgent=null),this.overlay&&this.overlay.hide()},o.startCheckingTargetOpening=function(t){this.stopCheckingTargetOpening(),this.checkTargetOpeningTimer=setInterval(this.onTargetOpeningCheck,250,t)},o.stopCheckingTargetOpening=function(){this.checkTargetOpeningTimer&&(clearInterval(this.checkTargetOpeningTimer),this.checkTargetOpeningTimer=void 0,this.abortChecksAttempts=0)},o.logQueryModeInIFrame=function(){var t=Po();return t?Z("SDK: Query mode in iframe"):$("SDK: Query mode in top window"),t},o.logIfMissedImportantSubscribers=function(){var t=this;setTimeout((function(){if(t.sheet){var e=an(t.sheet)?go.Success:go.Process;t.hasListener(e)||(console.warn("Yandex.Pay: Payment object requires subscriptions on %c"+e+" event","font-weight: bold;"),$("SDK: Missed subscription: "+e))}}),10)},o.logMissedQueryTokenHandler=function(){var t,e=this,n=null!==(t=this.connectionManager.hasQueryMessage())&&void 0!==t?t:{},o=n.hasMessage,r=n.hasForceMode;o&&this.once(go.Process,(function(){var t={forceMode:String(r)};e.hasListener(go.Process)?$("SDK: Query token successfully handled",t):$("SDK: Query token not handled by merchant",t)}))},n}(Fa),qa=function(t){function e(e,n){return t.call(this,e,n)||this}return K(e,t),e.prototype.update=function(e){t.prototype.update.call(this,e)},e}(Va),Ha=function(t){return t.toString()},Ya=function(t){return"{"+t+"}"};function Za(t,e){var n;return null!==(n=t.errors)&&void 0!==n&&n.length?$a(t.errors,e):[{path:e,error:{expected:t.expected,got:t.got}}]}function $a(t,e){void 0===e&&(e="");for(var n=[],o=0;o<t.length;o++){var r=e?e+"."+t[o].path.toString():t[o].path,i=Za(t[o].error,r.toString());n.push.apply(n,i)}return n}var Ga=function(t){function e(n,o,r){var i,a,s,u=Ha(n),c="function"==typeof o?String(o):JSON.stringify(o);return(s=t.call(this,"Invalid type! Expected "+u+" but got "+c+"!")||this).details=void 0,s.description=void 0,s.details=r.value,s.description=function(t){try{if(!t)return{};var e=$a(t),n={};return e.forEach((function(t){n[t.path.toString()]=t.error})),n}catch(t){return{error:t}}}(null===(i=s.details)||void 0===i?void 0:i.errors),s.name="ValidationError",null===(a=Error.captureStackTrace)||void 0===a||a.call(Error,s),Object.setPrototypeOf(s,e.prototype),s}return K(e,t),e}(Pn(Error)),Ja=function(t){return function(e){var n=t.__validate(e);if("right"===n._t||"nextValid"===n._t)return n.value;throw new Ga(t,e,n)}},Qa={right:function(t){return{_t:"right",value:t}},left:function(t){return{_t:"left",value:t}},nextValid:function(t){return{_t:"nextValid",value:t}},nextNotValid:function(t){return{_t:"nextNotValid",value:t}}},Xa=function(t,e){return function(n){return Object.assign({},n,{toString:function(){return t=[null==n?void 0:n.toString(),null==e?void 0:e()].filter((function(t){return"string"==typeof t&&""!==t})),o=t.join(" | "),t.length>1?"("+o+")":o;var t,o},__validate:function(e){var o=t.call(this,e,Qa);return"left"===o._t||"right"===o._t?o:n?"nextNotValid"===o._t?n.__validate(o.value.got):n.__validate(o.value):o}})}},ts=Xa((function(t,e){return"string"!=typeof t?e.left({expected:"string",got:t}):e.nextValid(t)}),(function(){return"string"}));function es(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return n.reduce((function(t,e){return e(t)}),"function"==typeof t?t():t)}var ns=function(t){return"object"==typeof t&&null!==t&&"__validate"in t&&"toString"in t},os=function(t,e,n){void 0===e&&(e=function(t){return t});var o=function(){return t.map((function(t){return ns(t)?Ha(t):JSON.stringify(t)})).join(" | ")};return Xa((function(r,i){for(var a=0;a<t.length;++a){var s=t[a];if(ns(s)){var u=s.__validate(r);if("right"===u._t)return i.right(u.value);if("nextValid"===u._t)return i.nextValid(u.value)}var c=e(s);if(e(r)===c)return i.right(c)}return void 0!==n?i.right(n):i.left({expected:o(),got:r})}),(function(){var e=o();return t.length>1?"("+e+")":e}))},rs=Xa((function(t,e){return"boolean"!=typeof t?e.left({expected:"boolean",got:t}):e.nextValid(t)}),(function(){return"boolean"})),is=Xa((function(t,e){return void 0===t?e.right(void 0):e.nextNotValid({expected:"optional",got:t})}),(function(){return"undefined"})),as=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Xa((function(t,n){if(!Array.isArray(t))return n.left({expected:"array",got:t});var o=!1,r=new Array(t.length),i=[];t:for(var a=0;a<t.length;++a){for(var s=t[a],u=void 0,c=void 0,d=0;d<e.length;++d)if("right"===(u=(c=e[d]).__validate(s))._t||"nextValid"===u._t){r[a]=u.value;continue t}u&&c&&("nextNotValid"===u._t||"left"===u._t)&&(i.push({path:a,error:u.value}),o=!0)}return o?n.left({expected:"array",got:t,errors:i}):n.nextValid(r)}),(function(){var t=e.map((function(t){return Ha(t)})).join(" | ");return e.length>1?"("+t+")[]":t+"[]"}))},ss=n(267),us=n.n(ss),cs=n(15),ds=n.n(cs),ls=function(t){return"string"==typeof t?ds()(t):t},hs=function(t){return"string"==typeof t?us()(t):t},fs={allowUnknownKeys:!0},ps=function(t,e){return function(t,e,n){return Xa((function(o,r){if("object"!=typeof o||null===o)return r.left({expected:"object",got:o});var i=Object.assign({},o);if(n)for(var a in n)!i[a]&&n[a]&&(i[a]=n[a]);var s=t,u=!(null==e||!e.allowUnknownKeys),c=[],d=!1,l={};for(var h in i)if(Object.prototype.hasOwnProperty.call(i,h)){var f=i[h],p=s[h];if(p){var m=p.__validate(f);l[h]=m.value,"left"===m._t&&(c.push({path:h,error:m.value}),d=!0)}else u?l[h]=f:(d=!0,c.push({path:h,error:{expected:"unknownKey",got:f}}))}for(var y in s)if(Object.prototype.hasOwnProperty.call(s,y)&&!(y in l)){var v=s[y],g=i[y],b=v.__validate(g);"left"===b._t&&(c.push({path:y,error:b.value}),d=!0)}return d?r.left({expected:"object",got:o,errors:c}):r.nextValid(l)}),(function(){var e=Object.entries(t).map((function(t){var e=t[0],n=t[1];return[e,Ha(n)]}));return 0===e.length?Ya(""):Ya(" "+e.map((function(t){var e,n=t[0],o=t[1];return(/\s/.test(e=n)?'"'+e+'"':e)+": "+o})).join(", ")+" ")}))}(t,fs,e)},ms=Xa((function(t,e){var n="string"==typeof t?t.replace(",","."):t;return isFinite(n)?e.nextValid(Number(n).toFixed(2)):e.left({expected:"Price",got:t})}),(function(){return"Price"})),ys=Xa((function(t,e){return isFinite(t)?e.nextValid(Math.floor("number"==typeof t?t:Number(t))):e.left({expected:"finite integer",got:t})}),(function(){return"finite integer"})),vs=function(t){return isFinite(t)?Number(t):t},gs=ps({count:ys()}),bs=ps({value:ts()}),ws=ps({email:es(os([rs()],Boolean),is),name:es(os([rs()],Boolean),is)}),ks=ps({billingContact:es(ws,is)}),Ss=ps({amount:ms(),type:is(os(Object.values(Xe),ls)()),label:is(ts()),quantity:is(ps({count:ys(),label:is(ts())})())}),Cs=ps({version:os([2],vs)(),merchant:ps({id:ts(),name:ts(),url:es(ts,is)})(),order:ps({id:ts(),items:es(as(Ss()),is),total:ps({amount:ms(),label:es(ts,is)})(),cartExternalId:es(ts,is)})(),currencyCode:os(Object.values(Qe),ls)(),recurringOptions:is(os([ps({type:os([on.Recurring],ls)(),optional:is(rs())})(),ps({type:os([on.Deferred],ls)()})()])()),language:es(os(["ru","en"],hs),is),requiredFields:es(ks,is),env:es(os(Object.values(Ge),ls,Ge.Production),is),type:os(Object.values($e))(),countryCode:os(Object.values(Je),ls)()},{order:{id:"0",total:{amount:"0.00"}}})(),Ps=ps({version:os([3],vs)(),merchantId:ts(),currencyCode:os(Object.values(Qe),ls)(),cart:ps({items:as(ps({productId:ts(),total:ms(),quantity:es(gs,is)})())(),coupons:es(as(bs()),is),externalId:es(ts,is)})(),orderId:es(ts,is),language:es(os(["ru","en"],hs),is),metadata:es(ts,is),availablePaymentMethods:es(as(os(Object.values(tn),ls)()),is),type:os(Object.values($e))(),env:es(os(Object.values(Ge),ls,Ge.Production))})(),xs=Ja(ps({version:os([4],vs)(),merchantId:ts(),currencyCode:os(Object.values(Qe),ls)(),totalAmount:ms(),availablePaymentMethods:es(as(os(Object.values(tn),ls)()),is),language:es(os(["ru","en"],hs),is),type:os(Object.values($e))(),env:es(os(Object.values(Ge),ls,Ge.Production),is)})()),Es=Ja(Ps),Ms=Ja(Cs),Is=function(t,e){try{var n=e(t);return G("Validation V2/V3 OK"),n}catch(e){var o=e.message||e;if("description"in e&&e.description?(G("SDK: Payment validation failed with errors",{merchantId:dn(t),sheetVersion:t.version,errors:e.description}),o="Payment validation failed with errors: "+JSON.stringify(e.description),console.warn(o)):G("SDK: Payment validation failed",e),un(t))throw new Error(o);return t}};function Bs(t){var e,n=(e=t,Object.assign({},e,{type:Wn(e)}));return un(n)?Is(n,xs):an(n)?Is(n,Es):Is(n,Ms)}var Os={__proxy:function(){return new Na(this)},env:Ge.Production,sessionId:"deprecatedButtonFallbackPayment",sheet:{type:$e.Payment,version:3,merchantId:"deprecatedButtonFallbackMerchantId",cart:{items:[]},currencyCode:Qe.Rub}},Ts=function(t){function e(n){var o;$("SDK: Usage of DeprecatedButton");var r=e.lastPayment,i=r?r.__proxy():new Na(Os);return o=t.call(this,n,i)||this,r||(e.waitProxies.push(i),Z("Create button without payment")),o}return K(e,t),e.create=function(t){return new e(t)},e.setPayment=function(t){e.lastPayment=t,e.waitProxies.forEach((function(e){e.setPayment(t)})),e.waitProxies=[]},e}(Dr);Ts.lastPayment=void 0,Ts.waitProxies=[];var Rs=function(t){function e(e,n){var o;return(o=t.call(this,e,n)||this).resolvers[go.Change]=function(t){t&&o.update(t)},o.resolvers[go.Reset]=function(t){t&&o.update(t)},o.resolvers[go.Setup]=function(t){t&&o.setup(t)},o}K(e,t);var n=e.prototype;return n.createButton=function(t){var e=new Dr(t,this.proxy);return vo.ofSession(this.sessionId).fork().bind(e),e},n.setup=function(t){this.connectionAgent&&this.connectionAgent.isConnected&&this.connectionAgent.send({type:ko.Setup,setupData:t})},n.checkout=function(){return t.prototype.checkout.call(this)},e}(Va),Ws=function(t){return t};function As(t,e){return new Promise((function(n,o){var r,i,a=[{supportedMethods:"yandexpay",data:{uid:"",paymentSheet:t,sessionId:e}}],s={id:i=hn(r=t),total:{label:sn(r)&&void 0!==r.order.total.label?r.order.total.label:Ws("Заказ")+" "+i,amount:{value:pn(r),currency:r.currencyCode}}};try{var u=new PaymentRequest(a,s),c=setTimeout((function(){o(new Error("PaymentRequest timeout"))}),5e3);u.canMakePayment().then((function(t){t?u.show(Promise.resolve(s)).then((function(t){clearTimeout(c),n(t)}),o):o(new Error("Can't make payment"))}),o)}catch(t){o(t)}}))}function _s(t){return t.paymentMethodType===tn.Card?{type:tn.Card,cardLast4:t.cardLast4,cardNetwork:t.cardNetwork}:{type:tn.Cash}}var Us=function(t){function e(e,n){var o;return(o=t.call(this,e,n)||this).praStatus=void 0,o.praStatus="init",o}K(e,t);var n=e.prototype;return n.createButton=function(t){var e=new Dr(t,this.proxy);return vo.ofSession(this.sessionId).fork().bind(e),e},n.checkoutByPaymentRequestApi=function(){var t=this;return new Promise((function(e,n){As(Object.assign({},t.sheet,{env:t.env}),t.sessionId).then((function(n){var o=n.details,r=o.paymentResult,i=o.details;if($('PaymentRequestApiResponse in PP. Result="'+r+'"'),r===go.Process){var a={paymentMethodInfo:_s(i),type:go.Process,token:i.paymentToken,orderAmount:pn(t.sheet)};i.email&&(a.billingContact={email:i.email}),t.emit(go.Process,a)}else r===go.Abort?(n.complete("unknown"),t.emit(go.Abort,{type:go.Abort})):(n.complete("fail"),t.emit(go.Error,{type:go.Error,reason:i.error}));e()})).catch((function(t){Z("PaymentRequestApiError in PP",{message:t.name+": "+t.message}),n(t)}))}))},n.checkout=function(){var e=this;if("failed"===this.praStatus||!Pt||Po()||Fe.get("disabledPRA")||!(Ct||St&&Fe.get("hasNewPRA")))return t.prototype.checkout.call(this);"pending"!==this.praStatus&&(this.praStatus="pending",this.checkoutByPaymentRequestApi().then((function(){e.praStatus="init"}),(function(){e.praStatus="failed",t.prototype.checkout.call(e)})))},n.update=function(e){t.prototype.update.call(this,e)},e}(Va);var Ls=["env"],Ds=Promise.all([U("simple-widget"),Fe.getP("enabledSW"),Fe.getP("blacklistSW")]),js=function(){function e(e,n,o){this.checkoutCounter=0,this.formLoading=!1,this.onFormOpenError=void 0,this.onPayButtonClick=void 0,this.onWidgetCheckoutClick=void 0,this.proxy=void 0,this.buttons=[],this.widgets=[],this.env=void 0,this.sheet=void 0,this.sessionId=void 0;try{var r=o.onFormOpenError,i=o.onPayButtonClick,a=o.onWidgetCheckoutClick;if(null===e)throw new Error("Payment data is null");if(!i||!De(i))throw new Error("onPayButtonClick must be a function");a&&!De(a)&&console.warn("Yandex.Pay: onWidgetCheckoutClick must be a function","font-weight: bold;");var s=e.env,u=void 0===s?Ge.Production:s,c=t(e,Ls);this.onPayButtonClick=i,this.onFormOpenError=r,De(a)&&(this.onWidgetCheckoutClick=a),this.env=u,this.sheet=c,this.sessionId=n,this.proxy=new Na(this)}catch(t){throw Y("SDK: PaymentV4 create error",t),t}}var n=e.prototype;return n.__proxy=function(){return this.proxy},n.mountButton=function(t,e){var n=this,o=new Dr(e,this.proxy);vo.ofSession(this.sessionId).fork().bind(o);var r=o.on(Gt.Click,(function(){n.checkout()}));o.mount(t),this.buttons.push({parent:t,button:o,offCheckout:r})},n.unmountButton=function(t){this.buttons=this.buttons.filter((function(e){var n=e.parent,o=e.button;return t===n&&o.destroy(),t!==n}))},n.mountWidget=function(t,e){var n=this,o=function(){var o=new ja(e,n.proxy);vo.ofSession(n.sessionId).fork().bind(o);var r=o.on(Gt.Click,(function(){return n.checkout()}));o.mount(t),n.widgets.push({parent:t,widget:o,offCheckout:r})},r=function(){var o=Sa(t,e,n.proxy,n.onWidgetCheckoutClick);o&&n.widgets.push({parent:t,widget:o,offCheckout:function(){}})};if(e.widgetType===Qt.Simple)return r();if(e.widgetType!==Qt.Info){var i;if(e.widgetType===Qt.Ultimate)return function(){var o=Oa(t,e,n.proxy,n.onWidgetCheckoutClick);o&&n.widgets.push({parent:t,widget:o,offCheckout:function(){}})}();e.widgetType===Qt.BnplPreview?Ds.then((function(t){var e=t[0],i=t[1],a=t[2];!e&&!i||a.has(dn(n.sheet))?o():r()})):o()}else(i=oi(t,e,n.proxy))&&n.widgets.push({parent:t,widget:i,offCheckout:function(){}})},n.unmountWidget=function(t){this.widgets=this.widgets.filter((function(e){var n=e.parent,o=e.widget;return t===n&&o.destroy(),t!==n}))},n.update=function(t){_n(this.sheet,t)&&this.proxy.emit(wo.PaymentUpdate,null),this.formLoading&&Y("SDK: Update sheet on form loading, type: Redirect")},n.onClick=function(){var t=this;return Yn(Te.SdkByTokenRequest),Yn(Te.SdkByTokenRequestError),new Promise((function(e,n){var o=function(){Y("SDK: Go to unknown url after buttonClick")};window.addEventListener("beforeunload",o);var r=t.onPayButtonClick();je(r)||(r=Promise.resolve(r));var i=setTimeout((function(){Z("SDK: onClick is awaiting for 10000ms")}),1e4);setTimeout((function(){window.removeEventListener("beforeunload",o),n(new Error("Yandex.Pay: onPayButtonClick canceled by timeout"))}),3e4),r.catch((function(){Zn(Te.SdkByTokenRequest),window.removeEventListener("beforeunload",o),n(new Mn("Yandex.Pay: onPayButtonClick Promise was rejected"))})).then((function(t){if(!t||"string"!=typeof t)throw new Error("Yandex.Pay: onPayButtonClick must return a Payment URL as a string");Zn(Te.SdkByTokenRequest),window.removeEventListener("beforeunload",o),e(t)})).catch((function(t){Zn(Te.SdkByTokenRequestError),window.removeEventListener("beforeunload",o),n(t)})).finally((function(){clearTimeout(i)}))}))},n.checkout=function(){var t=this;this.checkoutCounter+=1,this.formLoading=!0;var e=jr(this.sheet);this.proxy.emit(wo.PaymentLock,null),this.onClick().then((function(n){var o=Co.getInstance();o.once(wo.SdkCheckPaymentResponse,(function(n){var r=n.fullPaymentUrl;if(!r)return Lo.sdk.buttonCheckoutError(t.proxy.signalData),Y("SDK CheckPayment: Incorrect payment params"),t.emitError(new Error("Yandex.Pay: Incorrect payment params")),void t.onCheckoutError();var i=o.paymentReady.get(t.sessionId);if(!1===i)return Lo.sdk.buttonCheckoutError(t.proxy.signalData),t.proxy.emit(wo.PaymentError,null),void Z("SDK: Payment is forbidden by payment ready check");null==i&&Z("SDK: Check payment ready result is missing");var a=function(t,e,n){void 0===n&&(n={});var o=t,r=Dn(e,n),i=X(t),a=X(pe);return n.env!==Ge.Sandbox&&(o=t.replace(i,a)),ot(o,r)}(r,t.sessionId,{checkoutCounter:t.checkoutCounter,env:t.env,extra:Nr(t.proxy),amAuth:e.auth,duid:Jo("_ym_uid",void 0),merchantId:dn(t.sheet)});ui.reachGoal(wn(t.sheet)?"ym-begin-yasplit":"ym-begin-yapay"),Lo.sdk.buttonCheckout(t.proxy.signalData),setTimeout((function(){var t;t=a,window.top&&(window.top.location.href=t)}),500)})),o.sendMessage({type:wo.CheckPayment,env:t.env,paymentUrl:n,merchantId:dn(t.sheet)})})).catch((function(e){e instanceof Mn?(Lo.sdk.buttonCheckoutAbort(t.proxy.signalData),Z("SDK: Merchant error",e)):(Lo.sdk.buttonCheckoutError(t.proxy.signalData),Y("SDK: PaymentV4 checkout error",e),t.emitError(e)),t.onCheckoutError()}))},n.destroy=function(){this.sheet=void 0,this.buttons.forEach((function(t){return t.button.destroy()})),this.buttons=[],this.widgets.forEach((function(t){return t.widget.destroy()})),this.widgets=[]},n.emitError=function(t){console.error(t.message),this.onFormOpenError&&this.onFormOpenError(t.message)},n.onCheckoutError=function(){var t=this;this.proxy.emit(wo.PaymentError,null),setTimeout((function(){t.proxy.emit(wo.PaymentUnlock,null)}),3e3),this.formLoading=!1},e}();var Fs,Ns,Ks=function(){function t(t,e,n){this.paymentData=t,this.options=e,this.payment=void 0;var o=e.onAbort,r=e.onError,i=e.onProcess,a=e.onSuccess,s=e.onPayButtonClick,u=e.onWidgetCheckoutClick,c=e.onFormOpenError;this.payment=function(t,e,n){var o=Wn(t);return o===$e.ByToken?new js(t,e,n):[$e.Payment,$e.Checkout].includes(o)?new qa(t,e):new Us(t,e)}(t,n,{onPayButtonClick:s,onWidgetCheckoutClick:u,onFormOpenError:c}),this.payment instanceof js||(o&&this.payment.on(go.Abort,(function(t){o(t)})),r&&this.payment.on(go.Error,(function(t){r(t)})),i&&this.payment.on(go.Process,(function(t){i(t)})),a&&this.payment.on(go.Success,(function(t){a(t)})))}var e=t.prototype;return e.mountButton=function(t,e){return this.payment.mountButton(t,e)},e.unmountButton=function(t){return this.payment.unmountButton(t)},e.mountWidget=function(t,e){return this.payment.mountWidget(t,Object.assign({},e,{buttonType:(n=this.paymentData,[$e.Payment,$e.Token].includes(n.type)?Yt.Pay:[$e.Checkout,$e.CheckoutOld].includes(n.type)?Yt.Checkout:Yt.Simple)}));var n},e.unmountWidget=function(t){return this.payment.unmountWidget(t)},e.update=function(t){var e=this;if(De(t)){var n=t();je(n)?(this.payment.__proxy().emit(wo.PaymentLock,null),n.then((function(t){return e.payment.update(t)})).finally((function(){return e.payment.__proxy().emit(wo.PaymentUnlock,null)}))):this.payment.update(n)}else console.warn("Yandex Pay SDK: paymentSession.update requires a function as an argument.")},e.destroy=function(){return vo.unbindFromSession(this.payment.sessionId),this.payment.destroy()},t}(),zs=[],Vs=window.requestAnimationFrame||setTimeout,qs=function(){for(Fs=!0,Ns=!1;zs.length;){var t=zs.shift();null==t||t()}Fs=!1},Hs=function(t){return Xa((function(e,n){return e.length>=t?n.nextValid(e):n.left({expected:"minStringLength",got:e,args:[t]})}))},Ys=["s","m","l"],Zs=["dark","light"],$s=ps({type:os(["bnpl","cashback"])(),amount:ms(),align:es(os(["left","center","right"],hs,"left"),is),"merchant-id":es(ts,Hs(1))})(),Gs=ps({type:os(["bnpl"])(),amount:ms(),"merchant-id":es(ts,Hs(1)),size:es(os(Ys,hs,"l"),is),theme:es(os(Zs,hs,"light"),is),currency:es(os(["RUB"],ls,"RUB"),is),color:es(os(["primary","green","grey","transparent"],hs,"primary"),is),variant:es(os(["simple","detailed"],hs,"detailed"),is)})(),Js=ps({type:os(["cashback"])(),amount:ms(),"merchant-id":es(ts,Hs(1)),size:es(os(Ys,hs,"l"),is),theme:es(os(Zs,hs,"light"),is),currency:es(os(["RUB"],ls,"RUB"),is),color:es(os(["primary","grey","transparent"],hs,"primary"),is)})(),Qs=Ja($s),Xs=Ja(Gs),tu=Ja(Js),eu=function(t,e){try{return e(t)}catch(t){var n=t.message||t;throw"description"in t&&t.description&&(n="Badge validation failed with errors: "+JSON.stringify(t.description)),new Error(n)}};function nu(t){return eu(t,Qs),"bnpl"===t.type?eu(t,Xs):eu(t,tu)}var ou={l:24,m:18,s:14},ru=ou.l=24,iu="image",au="variables",su=["type","amount","merchant-id","size","currency","color","variant","theme","align"],uu=["size"],cu=["type","size","variant"],du="split006",lu=function(t){var e="https://pay.yandex.ru/api/v1/badge",n={};return n.type=t.type,n.amount=t.amount,n.currency=t.currency,n.merchant_id=t["merchant-id"],n.render_data=JSON.stringify({color:t.color,variant:t.variant,theme:t.theme,align:t.align}),window.__YAPAY_BADGE_SANDBOX&&(e=Ln(e)),ot(e,n)},hu=function(){var t=new WeakMap,e=function(t){return e=t,Ys.includes(e)?t:"l";var e},n=new window.IntersectionObserver(ir()(125,(function(t){t.forEach((function(t){var e,n=t.isIntersecting,o=t.target;n&&("badgeInternalId"in(e=o)&&"render"in e)&&o.render()}))})),{rootMargin:"250px 100px"});return function(o){function r(){for(var n,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=o.call.apply(o,[this].concat(i))||this).badgeInternalId=zn("badge"),n.badgeId="no-bid",n.lastOptions=void 0,n.throwJs=!1,n.naturalWidth=void 0,n.getBadgeOptions=function(){var t=nu({type:n.getAttribute("type"),amount:n.getAttribute("amount"),"merchant-id":n.getAttribute("merchant-id"),size:n.getAttribute("size"),currency:n.getAttribute("currency"),color:n.getAttribute("color"),variant:n.getAttribute("variant"),theme:n.getAttribute("theme"),align:n.getAttribute("align")});return n.lastOptions=t,t},n.updateSize=function(){var o=t.get(n),r=qt.findNode("."+au,o);if(r)try{var i=n.getBadgeOptions(),a=e(i.size),s=ou[a],u="s"===a&&n.naturalWidth&&n.naturalWidth>=252?du:void 0,c=function(t,e,n){return"cashback"===t?"compact"===e?100/ru:245/ru:n===du?"detailed"===e?310/ru:252/ru:"detailed"===e?310/ru:195/ru}(i.type,i.variant,u);r.textContent="\n                        :host {\n                            height: "+s+"px;\n                            width: "+c*Number(s)+"px;\n                        }\n                    "}catch(t){Z("SDK: Badge update size failed",t),console.error(t)}},n}K(r,o);var i=r.prototype;return i.connectedCallback=function(){var e,o=this;try{var r=this.getBadgeOptions();this.badgeId=function(t){return["b",t["merchant-id"],C(6),Date.now()].join(".")}(r)}catch(t){}try{if(!t.has(this)){var i=this.attachShadow({mode:"closed"}),a=document.createElement("style"),s=document.createElement("style");s.textContent="\n    :host {\n        display: inline-block;\n        overflow: hidden;\n        vertical-align: middle;\n        -webkit-tap-highlight-color: transparent;\n        line-height: 0;\n    }\n\n    .image {\n        height: 100%;\n        width: auto;\n        max-width: 100%;\n        object-fit: contain;\n    }",a.className=au,t.set(this,i),e=function(){i.appendChild(a),i.appendChild(s),o.updateSize()},Fs?e():(zs.push(e),Ns||(Ns=!0,Vs(qs)))}n.observe(this)}catch(t){Y("Sdk: badge ShadowRoot already exists")}},i.disconnectedCallback=function(){},i.attributeChangedCallback=function(e){var n=t.get(this);n&&(cu.includes(e)&&this.updateSize(),!uu.includes(e)&&qt.findNode("."+iu,n)&&this.render())},i.render=function(){var e=this,o=t.get(this);if(o)try{var r=this.getBadgeOptions(),i=qt.findNode("."+iu,o);i||(i=document.createElement("img"),qt.addClass(i,iu),i.height=ru,i.width=1,qt.on(i,"error",(function(){qt.style(i,{display:"none"}),Z("SDK: Badge image error",e.lastOptions)})),qt.on(i,"load",(function(){i&&(e.naturalWidth=i.naturalWidth,e.updateSize()),qt.style(i,{display:""})}))),qt.style(i,{cursor:"default"}),qt.attrs(i,{src:lu(r)}),qt.add(o,i),n.unobserve(this)}catch(t){Z("SDK: Badge render failed",t),console.error(t)}},F(r,null,[{key:"observedAttributes",get:function(){return su}}])}(Pn(HTMLElement))},fu=function(){try{return window instanceof Window}catch(t){return!1}}(),pu=n(296),mu=n.n(pu);var yu={getTabIcon:function(){return Promise.resolve("")}},vu=function(t){return!!t&&null!==t.match(/pay\.yandex\.ru\/sdk\/v1\/pay\.js:2:\d{1,20}([\\n]|.)?$/)};function gu(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return bu(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bu(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var wu=function(){function t(t,e){this.buttonWatcher=void 0,this.criticalPoints=void 0,this.active=void 0,this.timings=void 0,this.buttonWatcher=t,this.criticalPoints=Array.from(e).sort(),this.active=new Map,this.timings=[]}var e=t.prototype;return e.start=function(){var t=this;this.buttonWatcher.on("change",(function(e){var n=e.mounted,o=e.unmounted;if(n&&n.length)for(var r,i=gu(n);!(r=i()).done;){var a=r.value;t.active.get(a)?Z("Trying to log already mounted button"):t.active.set(a,performance.now())}if(o&&o.length)for(var s,u=gu(o);!(s=u()).done;){var c=s.value,d=t.active.get(c);d?(t.timings.push(performance.now()-d),t.active.delete(c)):Z("Trying to log unmount on not mounted button")}}));var e=function(){t.send()};qt.on(document,"beforeunload",e),qt.on(document,"unload",e)},e.median=function(t){var e=t.length/2;return t.length%2==0?(t[e]+t[e-1])/2:t[Math.floor(e)]},e.calculate=function(){var t=Array.from(this.timings).sort(),e=t[0],n=t[t.length-1],o=t.reduce((function(t,e){return t+e}),0);return{timings:t,min:e,max:n,average:o/t.length,median:this.median(t)}},e.send=function(){for(var t,e,n=this.calculate(),o=this.buttonWatcher.values.map((function(t){return t.merchant.id})),r=Object.assign({},n,{merchants:(t=o,Array.from(new Set(t)))}),i=gu(this.criticalPoints);!(e=i()).done;){var a=e.value;if(r.min<a){$("Merchant placed button for less than "+a+"ms",r);break}}},t}(),ku=new wu(Mr,[500,1e3,2e3]),Su=["merchantId"];var Cu,Pu,xu,Eu={},Mu={},Iu=function(t){var e=et(t.name);if(X(t.name)===xu){var n=tt(t.name);Eu[n]&&Cu(Eu[n],t,t.name)}Mu[e]&&Cu(Mu[e],t,t.name)};var Bu={connectEnd:2116,connectStart:2114,decodedBodySize:2886,domComplete:2124,domContentLoadedEventEnd:2131,domContentLoadedEventStart:2123,domInteractive:2770,domLoading:2769,domainLookupEnd:2113,domainLookupStart:2112,duration:2136,encodedBodySize:2887,entryType:2888,fetchStart:2111,initiatorType:2889,loadEventEnd:2126,loadEventStart:2125,nextHopProtocol:2890,redirectCount:1385,redirectEnd:2110,redirectStart:2109,requestStart:2117,responseEnd:2120,responseStart:2119,secureConnectionStart:2115,startTime:2322,transferSize:2323,type:76,unloadEventEnd:2128,unloadEventStart:2127,workerStart:2137};function Ou(t,e){l("690.2096.2044",Object.assign({1701:t},v(),function(t){var e={};return Object.entries(Bu).forEach((function(n){var o=n[0],r=n[1];if(o in t){var i=t[o];"string"!=typeof i&&"number"!=typeof i||!i&&0!==i||(e[r]=Vn(i))}})),e}(e)),g())}var Tu=new URL(he).origin,Ru=[{rumId:"script--sdk",payPath:"/sdk/v1/pay.js"},{rumId:"frame--init",payPath:tt(me)},{rumId:"assets--button-ru-white",payPath:String(cr)},{rumId:"assets--button-en-white",payPath:String(ur)},{rumId:"assets--button-ru-black",payPath:String(sr)},{rumId:"assets--button-en-black",payPath:String(ar)}];var Wu,Au,_u,Uu,Lu,Du=function(t){return t.Coupon="COUPON",t}({});Wu={reqid:Ae,url:Be,env:Oe,page:"sdk",version:"53"},y(Object.assign({},r(Wu),{initTimestamp:Date.now()})),M.hit(),window.addEventListener("error",(function(t){var e,n;vu(null===(e=t.error)||void 0===e?void 0:e.stack)&&Y("SDK: unhandled error",{error:t.error,message:t.message,stack:null===(n=t.error)||void 0===n?void 0:n.stack})})),window.addEventListener("unhandledrejection",(function(t){var e,n;vu(null===(e=t.reason)||void 0===e?void 0:e.stack)&&Y("SDK: unhandledrejection error",{reason:t.reason,stack:null===(n=t.reason)||void 0===n?void 0:n.stack})})),window.YaPay||(_u=(Au={baseOrigin:Tu,filter:Ru,sendTimingInstance:Ou}).baseOrigin,Uu=Au.filter,Lu=Au.sendTimingInstance,Uu.forEach((function(t){var e=t.rumId,n=t.payPath,o=t.url;n&&(Eu[n]=e);var r=et(null!=o?o:"");r&&(Eu[r]=e)})),Pu||(Pu=new PerformanceObserver((function(t){t.getEntries().forEach(Iu)})),setTimeout((function(){Pu.observe({type:"resource",buffered:!0}),Pu.observe({type:"navigation",buffered:!0})}),0)),Cu||(Cu=Lu),xu||(xu=_u),Lo.init({env:Oe,version:"53"}),_.then((function(t){var e=t.flags,n=t.testIds,o=t.boxes;Lo.update({experiments:e,testIds:n,boxes:o}),y({experiments:e,testIds:n,boxes:o})})),function(){if(fu){var t="IntersectionObserver"in window,e="attachShadow"in document.createElement("div"),n="customElements"in window,o="URLSearchParams"in window;t&&e&&n&&o?window.customElements.get(Ie)||window.customElements.define(Ie,hu()):$("SDK: Browser does not support required features for badges",{hasIntersectionObserver:t,hasShadowRoot:e,hasCustomElements:n,hasURLSearchParams:o})}else $("SDK: Badges can be inited in browser only")}(),l("690.1033",v(),g()),Co.getInstance(),$("SDK: Loaded",{sdkInFrame:Po()}),window.crossOriginIsolated&&$("[COOP]: Cross origin isolated"),Or.start(),ku.start(),window.YaPay={createPayment:function(t){var e=vo.primary.fork();e.mark($n.SessionCreationStarted),vo.primary.mark($n.FirstSessionCreationStarted);var n=Bs(t);Do(n),On(n);var o=kn(n);e.bindBySession(o),y({sessionId:o,sheetEnv:n.env}),jo(n);var r=!1;try{r=Co.getInstance().isReady}catch(t){Z("SDK: Init frame readiness error",t)}return Lo.sdk.createSession(Object.assign({isFrameReady:r},Fo(n),{sdkVariant:"createPayment",sessionId:o})),new Promise((function(t,r){try{var i=Co.getInstance(),a=function(t,e){if(an(t))return new qa(t,e);if(Bn(t))return new Rs(t,e);if(un(t))throw new Error("createPayment does not support version 4");return new Us(t,e)}(n,o);t(a),i.sendMessage({type:wo.IsReadyToPay,env:n.env,merchantId:dn(n),merchantUrl:cn(n),isCheckoutV2:Bn(n),paymentV3:An(n.type)}),i.once(wo.SdkReady,(function(t){var e=t.isWebview&&Po();i.paymentStart.get(o)&&Z("SDK: Payment started before init-frame was ready"),e&&t.readyToPay&&$("SDK: Webview in iframe",{fn:"createPayment"}),i.paymentReady.set(o,t.readyToPay&&!e)})),Ts.setPayment(a),e.mark($n.SessionCreated)}catch(t){Y("SDK: createPayment error",t),r(t)}}))},createCheckout:function(t){var e=vo.primary.fork();e.mark($n.SessionCreationStarted),vo.primary.mark($n.FirstSessionCreationStarted);var n=Bs(t);Do(n),On(n);var o=kn(n);e.bindBySession(o),y({sessionId:o,sheetEnv:n.env}),jo(n);var r=!1;try{r=Co.getInstance().isReady}catch(t){Z("SDK: Init frame readiness error",t)}return Lo.sdk.createSession(Object.assign({isFrameReady:r},Fo(n),{sdkVariant:"createCheckout",sessionId:o})),new Promise((function(t,r){try{var i=Co.getInstance();t(new qa(n,o)),i.sendMessage({type:wo.IsReadyToPay,env:n.env,merchantId:n.merchantId,merchantUrl:cn(n),isCheckoutV2:!1,paymentV3:An(n.type)}),i.once(wo.SdkReady,(function(t){var e,n,r=t.isWebview&&Po();(null===(e=i.paymentStart)||void 0===e?void 0:e.get(o))&&Z("SDK: Payment started before init-frame was ready"),r&&t.readyToPay&&$("SDK: Webview in iframe",{fn:"createCheckout"}),null===(n=i.paymentReady)||void 0===n||n.set(o,t.readyToPay&&!r)})),e.mark($n.SessionCreated)}catch(t){Y("SDK: createCheckout error",t),r(t)}}))},createSession:function(t,e){void 0===e&&(e={});var n=vo.primary.fork();n.mark($n.SessionCreationStarted),vo.primary.mark($n.FirstSessionCreationStarted);var o=Bs(t);Do(o),On(o);var r=kn(o);n.bindBySession(r),y({sessionId:r,sheetEnv:o.env}),jo(o);var i=!1;try{i=Co.getInstance().isReady}catch(t){Z("SDK: Init frame readiness error",t)}return Lo.sdk.createSession(Object.assign({isFrameReady:i},Fo(o),{sdkVariant:"createSession",sessionId:r})),new Promise((function(t,i){try{var a=Co.getInstance();t(new Ks(o,e,r)),a.sendMessage({type:wo.IsReadyToPay,env:o.env,merchantId:dn(o),merchantUrl:cn(o),isCheckoutV2:!1,paymentV3:An(o.type)||(s=o.type,[$e.ByToken].includes(s))}),a.once(wo.SdkReady,(function(t){var e=t.isWebview&&Po();a.paymentStart.get(r)&&Z("SDK: Payment started before init-frame was ready"),e&&t.readyToPay&&$("SDK: Webview in iframe",{fn:"createSession"}),a.paymentReady.set(r,t.readyToPay&&!e)})),n.mark($n.SessionCreated)}catch(t){Y("SDK: createSession error",t),i(t)}var s}))},readyToPayCheck:function(){return Promise.resolve(!0)},splitAvailableCheck:function(){return $("SDK: Deprecated split available check"),Promise.resolve(!0)},checkSplitAvailable:function(t){return new Promise((function(e){Co.getInstance().sendMessage(Object.assign({type:wo.SdkIsSplitAvailable},t)),Co.getInstance().on(wo.SdkIsSplitAvailableResponse,(function(t){var n=t.splitAvailable;e(n)}))}))},mountBadge:function(e,n){try{if(!(e instanceof HTMLElement))throw new Error("The first argument should be an HTMLElement");var o=nu(function(e){var n=e.merchantId,o=t(e,Su);return Object.assign({},o,{"merchant-id":n})}(n)),r=document.createElement(Ie);r.throwJs=!0,Object.entries(o).forEach((function(t){var e=t[0],n=t[1];r.setAttribute(e,n)})),e.appendChild(r)}catch(t){Z("SDK: mountBadge error",t),console.error(t)}},Button:Ts,Robokassa:yu,Env:Ge,PaymentEnv:Ge,CountryCode:Je,CurrencyCode:Qe,PaymentMethodType:tn,OrderItemType:Xe,AllowedAuthMethod:en,AllowedCardNetwork:nn,CheckoutEventType:go,PaymentEventType:go,AbortEventReason:bo,ErrorEventReason:function(){var t={};try{return new Proxy(t,{get:function(t,e){var n=String(e);return $("Usage of YaPay.ErrorEventReason."+n),console.warn("Yandex Pay SDK: YaPay.ErrorEventReason is deprecated."),mu()(n).toUpperCase()}})}catch(e){return $("YaPay.ErrorEventReason fallback returned",e),t}}(),UpdateErrorCode:Du,MessageType:ko,CompleteReason:So,ButtonType:Yt,ButtonTheme:Zt,ButtonWidth:$t,ButtonEventType:Gt,WidgetType:Qt,WidgetTheme:oe,WidgetPaddingType:Xt,RecurringType:on})})()})();